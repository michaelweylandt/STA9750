<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>STA 9750 Mini-Project #03: Visualizing and Maintaining the Green Canopy of NYC – STA 9750</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../_houndfavicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-1c47065645911eb62ace0da5c8a22cd9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">STA 9750</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href=".././syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././preassignments.html"> 
<span class="menu-text">Pre-Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././labs.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././miniprojects.html"> 
<span class="menu-text">Mini Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././project.html"> 
<span class="menu-text">Course Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././resources.html"> 
<span class="menu-text">Additional Resources and Course Policies</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././objectives.html"> 
<span class="menu-text">Learning Objectives</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-prior-offerings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Prior Offerings</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-prior-offerings">
<li>
    <a class="dropdown-item" href=".././archive/AY-2024-SPRING/">
 <span class="dropdown-text">Spring 2025</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href=".././archive/AY-2024-FALL/">
 <span class="dropdown-text">Fall 2024</span></a>
  </li>  
    </ul>
</li>
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#due-dates" id="toc-due-dates" class="nav-link active" data-scroll-target="#due-dates">Due Dates</a></li>
  <li>
<a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
<li><a href="#student-responsbilities" id="toc-student-responsbilities" class="nav-link" data-scroll-target="#student-responsbilities">Student Responsbilities</a></li>
  <li><a href="#rubric" id="toc-rubric" class="nav-link" data-scroll-target="#rubric">Rubric</a></li>
  <li><a href="#submission-instructions" id="toc-submission-instructions" class="nav-link" data-scroll-target="#submission-instructions">Submission Instructions</a></li>
  </ul>
</li>
  <li>
<a href="#mini-project" id="toc-mini-project" class="nav-link" data-scroll-target="#mini-project">Mini-Project #03: Visualizing and Maintaining the Green Canopy of NYC</a>
  <ul class="collapse">
<li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link" data-scroll-target="#data-acquisition">Data Acquisition</a></li>
  <li><a href="#data-integration-and-initial-exploration" id="toc-data-integration-and-initial-exploration" class="nav-link" data-scroll-target="#data-integration-and-initial-exploration">Data Integration and Initial Exploration</a></li>
  <li><a href="#government-project-design" id="toc-government-project-design" class="nav-link" data-scroll-target="#government-project-design">Government Project Design</a></li>
  </ul>
</li>
  <li>
<a href="#extra_credit" id="toc-extra_credit" class="nav-link" data-scroll-target="#extra_credit">Extra Credit Opportunities</a>
  <ul class="collapse">
<li><a href="#ec01" id="toc-ec01" class="nav-link" data-scroll-target="#ec01">Extra Credit Opportunity #01: Improved Tree Map Visualizations</a></li>
  <li><a href="#ec02" id="toc-ec02" class="nav-link" data-scroll-target="#ec02">Extra Credit Opportunity #02: Additional Parks Data</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/miniprojects/mini03.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/miniprojects/mini03.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">STA 9750 Mini-Project #03: Visualizing and Maintaining the Green Canopy of NYC</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="due-dates" class="level3"><h3 class="anchored" data-anchor-id="due-dates">Due Dates</h3>
<ul>
<li>Released to Students: 2025-10-21</li>
<li><strong>Initial Submission: 2025-11-14 11:59pm ET on GitHub and Brightspace</strong></li>
<li>
<strong>Peer Feedback:</strong>
<ul>
<li>Peer Feedback Assigned: 2025-11-17 on GitHub</li>
<li><strong>Peer Feedback Due: 2025-11-28 11:59pm ET on GitHub</strong></li>
</ul>
</li>
</ul>
<p><em>Estimated Time to Complete: 5 Hours</em></p>
<p><em>Estimated Time for Peer Feedback: 1 Hour</em></p>
<hr></section><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Welcome to Mini-Project #03!</p>
<p><a href="https://www.nytimes.com/2025/10/05/nyregion/new-york-city-green-space.html">NYC’s many green spaces are beloved by the community</a>, and represent a major ongoing investment by both city government and by a network of over 550 non-profit organizations and volunteer groups. With a budget of over $675,000,000 and over 5,000 full-time employees,<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> the Department of Parks and Recreation (DPR) maintains over 30,000 acres of public parkland. DPR is also responsible for almost 900,000 trees, representing over 500 different species, across the city. In this mini-project, we will explore the <a href="https://tree-map.nycgovparks.org/tree-map">NYC TreeMap</a> data set, with an eye towards creating compelling visualizations of this beloved element of NYC’s urban fabric. Based on these visualizations, you will propose a new program for the NYC Parks Department that attempts to make the benefits of NYC trees available to all New Yorkers.</p>
<p>Also note that this mini-project is intended to be a bit less demanding than <a href="./mini02.html">Mini-Project #02</a>. At this point in the course, you should be diving into your <a href="../project.html">Course Project</a>, which should consume the majority of your out-of-class time dedicated to this course for the remainder of the semester.</p>
<section id="student-responsbilities" class="level3"><h3 class="anchored" data-anchor-id="student-responsbilities">Student Responsbilities</h3>
<p>Recall our basic analytic workflow and table of student responsibilities:</p>
<ul>
<li>Data Ingest and Cleaning: Given a single data source, read it into <code>R</code> and transform it to a reasonably useful standardized format.</li>
<li>Data Combination and Alignment: Combine multiple data sources to enable insights not possible from a single source.</li>
<li>Descriptive Statistical Analysis: Take a data table and compute informative summary statistics from both the entire population and relevant subgroups</li>
<li>Data Visualization: Generate insightful data visualizations to spur insights not attainable from point statistics</li>
<li>Inferential Statistical Analysis and Modeling: Develop relevant predictive models and statistical analyses to generate insights about the <em>underlying population</em> and not simply the data at hand.</li>
</ul>
<table class="table-hover caption-top table">
<caption>Students’ Responsibilities in Mini-Project Analyses</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 22%">
<col style="width: 27%">
<col style="width: 12%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">Ingest and Cleaning</th>
<th style="text-align: center;">Combination and Alignment</th>
<th style="text-align: center;">Descriptive Statistical Analysis</th>
<th style="text-align: center;">Visualization</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #01</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #02</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #03</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #04</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
</tbody>
</table>
<p>In this project, I am no longer providing code to download and read the necessary data files. The data files I have selected for this mini-project are relatively easy to work with and should not provide a significant challenge, particularly after our in-class discussion of Data Import. See the modified rubric below which now includes a grade for Data Preparation.</p>
</section><section id="rubric" class="level3"><h3 class="anchored" data-anchor-id="rubric">Rubric</h3>
<p>STA 9750 Mini-Projects are evaluated using <em>peer grading</em> with <em>meta-review</em> by the course GTAs. The following rubric will be used for this mini-project:</p>
<table id="rubric_table" class="table-hover caption-top table" width="1,1,1,1,1,1">
<thead><tr class="header">
<th style="text-align: center;">Course Element</th>
<th style="text-align: left;">Excellent (9-10)</th>
<th style="text-align: left;">Great (7-8)</th>
<th style="text-align: left;">Good (5-6)</th>
<th style="text-align: left;">Adequate (3-4)</th>
<th style="text-align: left;">Needs Improvements (1-2)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Written Communication</td>
<td style="text-align: left;">Report is well-written and flows naturally. Motivation for key steps is clearly explained to reader without excessive detail. Key findings are highlighted and appropriately given context.</td>
<td style="text-align: left;">Report has no grammatical or writing issues. Writing is accessible and flows naturally. Key findings are highlighted, but lack suitable motivation and context.</td>
<td style="text-align: left;">Report has no grammatical or writing issues. Key findings are present but insufficiently highlighted.</td>
<td style="text-align: left;">Writing is intelligible, but has some grammatical errors. Key findings are obscured.</td>
<td style="text-align: left;">Report exhibits significant weakness in written communication. Key points are difficult to discern.</td>
</tr>
<tr class="even">
<td style="text-align: center;">Project Skeleton</td>
<td style="text-align: left;">Code completes all instructor-provided tasks correctly. Responses to open-ended tasks are particularly insightful and creative.</td>
<td style="text-align: left;">Code completes all instructor-provided tasks satisfactorily.</td>
<td style="text-align: left;">Response to one instructor provided task is skipped, incorrect, or otherwise incomplete.</td>
<td style="text-align: left;">Responses to two instructor provided tasks are skipped, incorrect, or otherwise incomplete.</td>
<td style="text-align: left;">Response to three or more instructor provided tasks are skipped, incorrect, or otherwise incomplete.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><p>Formatting &amp; Display</p></td>
<td style="text-align: left;">
<p>Tables and figures are full ‘publication-quality.’</p>
<p>Report includes at least one animated visualization designed to effectively communicate findings.</p>
</td>
<td style="text-align: left;">
<p>Tables have well-formatted column names, suitable numbers of digits, and attractive presentation.</p>
<p>Figures are ‘publication-quality,’ with suitable axis labels, well-chosen structure, attractive color schemes, titles, subtitles, and captions, <em>etc.</em></p>
</td>
<td style="text-align: left;">
<p>Tables are well-formatted, but still have room for improvement.</p>
<p>Figures are above ‘exploratory-quality,’ but do not reach full ‘publication-quality.’</p>
</td>
<td style="text-align: left;">
<p>Tables lack significant ‘polish’ and need improvement in substance (filtering and down-selecting of presented data) or style.</p>
<p>Figures are suitable to support claims made, but are ‘exploratory-quality,’ reflecting minimal effort to customize and ‘polish’ beyond <code>ggplot2</code> defaults.</p>
</td>
<td style="text-align: left;">
<p>Unfiltered ‘data dump’ instead of curated table.</p>
<p>Baseline figures that do not fully support claims made.</p>
</td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Code Quality</p></td>
<td style="text-align: left;">
<p>Code is (near) flawless.</p>
<p>Code passes all <code>styler</code> and <code>lintr</code> type analyses without issue.</p>
</td>
<td style="text-align: left;"><p>Comments give context of the analysis, not simply defining functions used in a particular line.</p></td>
<td style="text-align: left;"><p>Code has well-chosen variable names and basic comments.</p></td>
<td style="text-align: left;"><p>Code executes properly, but is difficult to read.</p></td>
<td style="text-align: left;"><p>Code fails to execute properly.</p></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Data Preparation</td>
<td style="text-align: left;">Data import is fully-automated and efficient, taking care to only download from web-sources if not available locally.</td>
<td style="text-align: left;">Data is imported and prepared effectively, in an automated fashion with minimal hard-coding of URLs and file paths.</td>
<td style="text-align: left;">Data is imported and prepared effectively, though source and destination file names are hard-coded.</td>
<td style="text-align: left;">Data is imported in a manner likely to have errors.</td>
<td style="text-align: left;">Data is hard-coded and not imported from an external source.</td>
</tr>
</tbody>
</table>
<p>For this mini-project, no more than <strong>4</strong> total points of extra credit can be be awarded. Opportunities for extra credit exist for students who go <em>above and beyond</em> the instructor-provided scaffolding. Specific opportunities for extra credit can be <a href="#extra_credit">found below</a>.</p>
<p>Students pursuing careers in data analytics are strongly encouraged to go beyond the strict ambit of the mini-projects to</p>
<ol type="i">
<li>further refine their skills;</li>
<li>learn additional techniques that can be used in the final course project; and</li>
<li>develop a more impressive professional portfolio.</li>
</ol>
<p>Because students are encouraged to use STA 9750 mini-projects as the basis for a professional portfolio, the basic skeleton of each project will be released under a fairly permissive usage license. Take advantage of it!</p>
</section><section id="submission-instructions" class="level3"><h3 class="anchored" data-anchor-id="submission-instructions">Submission Instructions</h3>
<p>After completing the analysis, write up your findings, <em>showing all of your code</em>, using a dynamic <code>quarto</code> document and post it to your course repository. The <code>qmd</code> file should be named <code>mp03.qmd</code> (lower case!) so the rendered document can be found at <code>docs/mp03.html</code> in the student’s repository and will be served at the URL:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<blockquote class="blockquote">
<p><code>https://&lt;GITHUB_ID&gt;.github.io/STA9750-2025-FALL/mp03.html</code></p>
</blockquote>
<p>You can use the helper function <code>mp_start</code> available at in the <a href="../tips.html#mp_start">Course Helper Functions</a> to create a file with the appropriate name and some meta-data already included. Do so by running the following command at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_start(N=03)</code></p>
</blockquote>
<p>After completing this mini-project, upload your rendered output and necessary ancillary files to GitHub to make sure your site works. The <code>mp_submission_ready</code> function in the <a href="../tips.html#mp_submission_ready">Course Helper Functions</a> can perform some of these checks automatically. You can run this function by running the following commands at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_submission_ready(N=03)</code></p>
</blockquote>
<p>Once you confirm this website works (substituting <code>&lt;GITHUB_ID&gt;</code> for the actual GitHub username provided to the professor in <a href="./mini00.html">MP#00</a> of course), open a GitHub issue on the instructor’s repository to submit your completed work.</p>
<p>The easiest way to do so is by use of the <code>mp_submission_create</code> function in the <a href="../tips.html#mp_submission_create">Course Helper Functions</a>, which can be used by running the following command at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_submission_create(N=03)</code></p>
</blockquote>
<p>Alternatively, if you wish to submit manually, open a new issue at</p>
<blockquote class="blockquote">
<p><code>https://github.com/michaelweylandt/STA9750-2025-FALL/issues/new</code> .</p>
</blockquote>
<p>Title the issue <code>STA 9750 &lt;GITHUB_ID&gt; MiniProject #03</code> and fill in the following text for the issue:</p>
<div id="submission-text">
<pre><code>Hi @michaelweylandt!

I've uploaded my work for MiniProject #**03** - check it out!

&lt;https://&lt;GITHUB_ID&gt;.github.io/STA9750-2025-FALL/mp03.html&gt;</code></pre>
</div>
<p>Once the submission deadline passes, the instructor will tag classmates for peer feedback in this issue thread.</p>
<p><em>Additionally</em>, a PDF export of this report should be submitted on Brightspace. To create a PDF from the uploaded report, simply use your browser’s ‘Print to PDF’ functionality.</p>
<p><strong>NB</strong>: The analysis outline below specifies key <em>tasks</em> you need to perform within your write up. Your peer evaluators will check that you complete these. You are encouraged to do extra analysis, but the bolded <strong>Tasks</strong> are <em>mandatory</em>.</p>
<p><strong>NB</strong>: Your final submission should look like a <em>report</em>, not simply a list of facts answering questions. Add introductions, conclusions, and your own commentary. You should be practicing both raw <em>coding</em> skills and written <em>communication</em> in all mini-projects. There is little value in data points stated without context or motivation.</p>
</section></section><section id="mini-project" class="level2"><h2 class="anchored" data-anchor-id="mini-project">Mini-Project #03: Visualizing and Maintaining the Green Canopy of NYC</h2>
<section id="data-acquisition" class="level3"><h3 class="anchored" data-anchor-id="data-acquisition">Data Acquisition</h3>
<section id="nyc-city-council-districts" class="level4"><h4 class="anchored" data-anchor-id="nyc-city-council-districts">NYC City Council Districts</h4>
<p>NYC is divided into 51 City Council Districts. As we intend to analyze the number and types of trees in each council district, we need to download a file containing the boundaries of these districts.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> These data can be found <a href="https://www.nyc.gov/content/planning/pages/resources/datasets/city-council">on the NYC Department of Planning site</a>.</p>
<p>This file is hosted as a <em>static file</em> and does not require any special techniques for access, so we will begin by downloading it. Identify the URL for the most recent NYC City Council data <em>as a <code>zip</code> file</em>.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> You can then download this data into a local directory <code>data/mp03/</code>. Because this data is a <code>zip</code> file, we will need to unzip it before use. After the data is unzipped, you can read it into <code>R</code> using the <code>st_read</code> function from the <code>sf</code> package.</p>
<p>When downloading data, it is important to always be respectful of the data provider and not abuse their servers. In particular, whenever possible, you should avoid repeatedly downloading the same data as it drives up hosting costs for the data provider.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 1: Download NYC Citcy Council District Boundaries">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 1: Download NYC Citcy Council District Boundaries
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write a function to download the NYC City Council District Boundaries <em>responsibly</em>. When this function is called, it should</p>
<ol type="i">
<li><p>Create a directory called <code>data/mp03</code> (that is, a folder <code>mp03</code> within the <code>data</code> folder from previous assignments) <em>only if needed</em>.</p></li>
<li><p>Download the <code>zip</code> file containing the NYC District boundaries from NYC Planning into the <code>data/mp03</code> directory <em>only if needed</em>. Because this is a simple file, you can use the <code>download.file</code> command.</p></li>
<li><p>Unzip the <code>zip</code> file using the <code>unzip</code> command <em>only if needed</em>.</p></li>
<li><p>Read the <code>shp</code> file in the unzipped directory using <code><a href="https://r-spatial.github.io/sf/reference/st_read.html">sf::st_read</a></code>.</p></li>
<li>
<p>Transform the result of reading the <code>shp</code> file to <a href="https://en.wikipedia.org/wiki/World_Geodetic_System">WGS 84</a> using the <code>st_transform</code> function like <code>st_transform(DATA, crs="WGS84")</code>.</p>
<p>(You do not need to understand this transformation: in brief, it transforms the district boundaries from a NYC-specific coordinate system used by the Planning Department to a more standard system. This will allow us to align different data sets later in this Mini-Project.)</p>
</li>
<li><p>Return the transformed data to the user.</p></li>
</ol>
</div>
</div>
<p>Once this data has been downloaded and read into <code>R</code>, it can be manipulated using <code>dplyr</code> tools like a standard data frame. This <code>sf</code> object is a special kind of data frame that comes with additional <em>metadata</em> describing the underlying map model used to represent this data. You will not need to directly interact with this metadata, but you may see it when printing results. This <code>sf</code> data also comes with a <code>geometry</code> column that contains <code>MULTIPOLYGON</code>s representing the shape of each district. (In essence, a list of points at the corners of each district; by connecting this points in order, the district is traced out.)</p>
<div class="callout callout-style-default callout-note callout-titled" title="Hint: Look at Previous Mini-Projects">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint: Look at Previous Mini-Projects
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Previous Mini-Projects provide a template for responsible downloading of public data sets. As you work to download the data for this Mini-Project, review the data downloading code from two prior Mini-Projects and see if it can be adapted to this Mini-Project. In particular, please refer back to</p>
<ul>
<li>
<a href="https://michael-weylandt.com/STA9750/archive/AY-2024-SPRING/miniprojects/mini01.html">MP#01 Spring 2025</a> (particularly for the Tree Points data below)</li>
<li><a href="./mini02.html">MP#02 Fall 2025</a></li>
</ul>
<p>for inspiration.</p>
</div>
</div>
</div>
<p>The NYC District shape files are very high resolution and can be somewhat slow to plot.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> To speed up computation, you may want to simplify the district boundary lines using the <code>st_simplify</code> function from the <code>sf</code> package. This function takes an argument <code>dTolerance</code> which specifies (in meters) the minimum resolution of the simplified representation. For example, setting <code>dTolerance=5</code> will remove any boundary edges shorter than 5 meters (about 16.5 feet). If you find plotting in later sections to be slow, consider simplifying these district boundaries, using a <code>mutate(geometry = st_simplify(geometry, ...))</code>-like command. I recommend plotting the resulting district boundaries and setting <code>dTolerance</code> as high as you can without suffering any visual degredation of the boundaries.</p>
</section><section id="nyc-tree-points" class="level4"><h4 class="anchored" data-anchor-id="nyc-tree-points">NYC Tree Points</h4>
<p>We next need to download the <a href="https://data.cityofnewyork.us/Environment/Forestry-Tree-Points/hn5i-inap/about_data">NYC Forestry Tree Points</a> from NYC OpenData using the provided API. To access this API, click “Export” near the top right corner of the NYC OpenData page. Then select “API endpoint” and “Data Format: GeoJSON” to get the base URL for this API.</p>
<p>By default, if you simply download directly from that URL you will only get the first 1000 trees in the data set. To download the full data set, you will need to adjust the <code>$limit</code> and <code>$offset</code> parameters in your API call. The</p>
<ul>
<li><p><code>$limit</code> controls the number of results returned per query. It defaults to 1000, but can be set much larger than this. Note that you do not necessarily want to set <code>$limit</code> <em>too large</em> as this decreases download times and increases the chance of corruption or time-outs during download.</p></li>
<li>
<p><code>$offset</code> adjusts the results returned from a query. It defaults to 0, returning items 1 to 1000 (at the default <code>$limit</code> of 1000). If you set <code>$offset</code> to 1000, you will instead retrieve rows 1001 to 2000 (at the default <code>$limit</code> of 1000). By iteratively adjusting <code>$offset</code>, you can “page through” the entire data set.</p>
<p>If there are not <code>$limit</code> results remaining, you will get only as many results as can be returned after the offset. So, in a data set of 1500 observations, a query with <code>$limit=1000</code> and <code>$offset=1000</code> will return rows 1001 to 1500. The fact that this is less than <code>$limit</code> can be used to identify the end of the data set.</p>
</li>
</ul>
<p>Using these two query parameters you will be able to download the NYC Tree Points data <em>responsibly</em>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 2: Download Tree Points">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 2: Download Tree Points
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write a function to download the NYC Tree Points data <em>correctly</em> and <em>responsibly</em>. When this function is called, it should</p>
<ol type="i">
<li>Download any data that is not stored locally</li>
<li>Read in all <code>GeoJSON</code> data files using the <code>st_read</code> function from the <code>sf</code> package</li>
<li>Combine all data sets using the <code>bind_rows</code> function from the <code>dplyr</code> package.</li>
</ol>
</div>
</div>
<p>To be responsible, your code to download the Tree Points data should:</p>
<ol type="i">
<li>Page through the entire data set, with a suitable use of <code>$limit</code> and <code>$offset</code> to ensure the entire data set is downloaded.</li>
<li>Save the result of each query to a separate file in <code>data/mp03</code>. These files should have a consistent naming schema.</li>
<li>Only download files <em>if they are not already saved</em>. NYC OpenData is a free resource and we do not want to abuse it by unnecessarily downloading many copies of the same data set.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled" title="API Usage **Required**">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
API Usage <strong>Required</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You must use <code>httr2</code> (not <code>httr</code>) to access the API directly to download this data</strong>.</p>
<p>A primary learning goal of this Mini-Project is to practice use of programmatic APIs for data acquisition. The platform underlying NYCOpenData, <a href="https://dev.socrata.com/">Socrata</a>, is widely used and familiarity with this API will be useful for interacting with many government sources.</p>
<p>If you download a data file manually, use the <code>RSocrata</code> package, or otherwise avoid using the API directly, you will receive a 0 for the Project Skeleton, Code Quality, and Data Preparation portions of your grade.</p>
</div>
</div>
<p>After downloading this data, review <a href="https://data.cityofnewyork.us/Environment/Forestry-Tree-Points/hn5i-inap/about_data">the data documentation</a> to ensure you understand the various columns in this data set.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Hint: Working with Large Data">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint: Working with Large Data
</div>
</div>
<div class="callout-body-container callout-body">
<p>This tree points data set is quite large and working with it may be slow, particularly if you have a computer with smaller memory. While this is not a problem <em>per se</em>, it can make it difficult to maintain the recommended ‘Render Regularly’ workflow. Consider adopting the following techniques to make working with large data a bit easier:</p>
<ol type="1">
<li>
<p>Only work with a small subset of the data at first.</p>
<p>Write all of your code using a small subset (say 10,000) of the trees and then, when you are happy with everything, adjust your code to use the full data set.</p>
<p>You can implement this by either adding an additional argument to your Tree Points function that limits the amount of data read in (a bit more complicated) or by subsetting your data after reading it, using a function like <code>slice_sample</code> (a bit simpler, but slower since it still requires you to read all of the data at least once). Whichever you do, make sure to revert back to the full data set before submitting your final product.</p>
</li>
<li>
<p>Adopt a strategy of <a href="https://en.wikipedia.org/wiki/Cache_(computing)"><em>caching results</em></a>.</p>
<p>Caching is the practice of saving results and the code that generated them. Then, before re-running some code, you can look up and see if you have already saved the results. This lets you avoid repeating expensive steps unnecessarily.</p>
<p>While simple in theory, the details of caching – particularly <em>cache invalidation</em> or knowing when to delete data from the cache – are quite finicky. Thankfully, <code>Quarto</code> has reasonably good support for caching <a href="https://quarto.org/docs/computations/caching.html#knitr-cache">built-in</a>. You can turn on caching document-wide (so all code chunks are cached) or on a chunk-by-chunk basis.</p>
<p>Caching can be a useful strategy, but it can occasionally lead to strange bugs where old results are being used incorrectly. Because of this, deleting the cache and running the whole document <em>from scratch</em> is often necessary to debug some problems. I also recommend deleting your cache and running all code from scratch before submitting your final report in order to guarantee that your code and results actually line up.</p>
</li>
</ol>
</div>
</div>
</section></section><section id="data-integration-and-initial-exploration" class="level3"><h3 class="anchored" data-anchor-id="data-integration-and-initial-exploration">Data Integration and Initial Exploration</h3>
<p>Before we can prepare our final report, it is worthwhile to visually inspect the distribution of trees in NYC.</p>
<section id="mapping-nyc-trees" class="level4"><h4 class="anchored" data-anchor-id="mapping-nyc-trees">Mapping NYC Trees</h4>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 3: Plot All Tree Points">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 3: Plot All Tree Points
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a <code>ggplot2</code> map that superimposes trees as points over the council districts of NYC.</p>
<p>This will require a bit more advanced <code>ggplot2</code> than we have used so far. In particular, we will want different <em>layers</em> of the map to have different spatial elements:</p>
<ul>
<li>One layer will be the council district boundaries</li>
<li>One layer will be points representing each tree</li>
</ul>
<p>To do so, you will need to pass the <code>data</code> and <code>mapping</code> arguments directly to the different <code>geom_sf()</code> layers, rather than setting them globally in the initial call to <code>ggplot</code>. <code>geom_sf</code> is smart enough to figure out what type of object to display based on the type of the <code>geometry</code> column (<code>POINT</code> vs <code>POLYGON</code>).</p>
<p>Note that there are a <em>lot</em> of trees in NYC. You may need to adjust some of the default settings (<code>alpha</code>, point size, <em>etc.</em>) to make your plot more legible. We will make a more focused plot later in this assignment, so you don’t need to work too hard to make this one perfectly legible.</p>
</div>
</div>
</section><section id="district-level-analyses-of-trees" class="level4"><h4 class="anchored" data-anchor-id="district-level-analyses-of-trees">District-Level Analyses of Trees</h4>
<p>Before we can further analyze our NYC trees, we need to join the Tree Points data onto the District boundaries. This can be done using the <code>st_join</code> function, which implements <em>spatial</em> joins, not the simple equality joins we have used up to this point. This join requires a slightly different syntax, including specification of the ‘check’ used to align rows:</p>
<ul>
<li>
<code>st_contains</code>: Does the spatial region in the first table contain the points in the second table? (Regions first argument, points second argument)</li>
<li>
<code>st_intersects</code>: Does a point from the first table fall in a region from the second table? (Points first argument, regions second argument)</li>
</ul>
<p>These functions are passed (without parentheses or any arguments) as the <code>join</code> argument of <code>st_join</code>. Either of these can work for this step; you simply need to make sure you’re passing the <code>join</code> that corresponds to the order of the tables.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 4: District-Level Analysis of Tree Coverage">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 4: District-Level Analysis of Tree Coverage
</div>
</div>
<div class="callout-body-container callout-body">
<p>Join together the tree points and district boundaries using the steps outlined above and answer the following exploratory questions:</p>
<ol type="1">
<li><p>Which council district has the most trees?</p></li>
<li><p>Which council district has the highest density of trees? The <code>Shape_Area</code> column from the district shape file will be helpful here.</p></li>
<li><p>Which district has highest fraction of dead trees out of all trees?</p></li>
<li>
<p>What is the most common tree species in Manhattan?</p>
<p>To answer this question, you need to create a new column to the joined data set. You can do this using a call to the <code>case_when</code> function in conjunction with the following</p>
<table class="caption-top table">
<thead><tr class="header">
<th>Districts</th>
<th>Borough</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1 - 10</td>
<td>Manhattan</td>
</tr>
<tr class="even">
<td>11 - 18</td>
<td>Bronx</td>
</tr>
<tr class="odd">
<td>19 - 32</td>
<td>Queens</td>
</tr>
<tr class="even">
<td>33 - 48</td>
<td>Brooklyn</td>
</tr>
<tr class="odd">
<td>48 - 51</td>
<td>Staten Island</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What is the species of the tree closest to Baruch’s campus?</p>
<p>Computing distances from spatial data can be a little tricky. You first need to create a point equipped with the relevant CRS and then can use the <code>st_distance</code> function to compute distance. The following function will make a suitable point object:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">new_st_point</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">lat</span>, <span class="va">lon</span>, <span class="va">...</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu">st_sfc</span><span class="op">(</span>point <span class="op">=</span> <span class="fu">st_point</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">lat</span>, <span class="va">lon</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">st_set_crs</span><span class="op">(</span><span class="st">"WGS84"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can then use this point object as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">...</span> <span class="op">|&gt;</span> <span class="fu">mutate</span><span class="op">(</span>distance <span class="op">=</span> <span class="fu">st_distance</span><span class="op">(</span><span class="va">geometry</span>, <span class="va">my_point</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>where <code>my_point</code> is a point you created above.</p>
</li>
</ol>
</div>
</div>
</section></section><section id="government-project-design" class="level3"><h3 class="anchored" data-anchor-id="government-project-design">Government Project Design</h3>
<p>In NYC, members of the city council have significant influence – official and unofficial – over the discretionary activities of the city government. You are a city council member - or more likely, a staffer to a city council member - who wants the parks department to dedicate some additional funding to a tree project in your district. Using the data sets from above, write a brief document (no more than a page in length if it were printed separately) describing and making an argument for a new tree program.</p>
<p>Your proposal should include the following:</p>
<ul>
<li><p>A brief description of the proposed project. (This does not need to be data-driven.)</p></li>
<li><p>A quantitative statement of the desired scope of the project (X trees, Y stumps, Z new plantings, etc.)</p></li>
<li><p>A ‘zoomed-in’ map visualization of the trees in your district: visualize either all trees or only the subset relevant to your proposed project. This visualization should <em>only show your district</em> and the ‘field of view’ should be zoomed in accordingly.</p></li>
<li>
<p>A quantitative comparison as to why your district is the right place for this project. You should compare to at least 3 other districts on whatever factors motivate this project.</p>
<p>These comparisons can be positive-spin (we have the most Species X trees) or negative-spin (we have one of the lowest tree densities), depending on the scope of your proposed projects.</p>
</li>
<li><p>At least one non-map graphic supporting the quantitative comparison (<em>i.e.</em>, visualize the results of the previous bullet).</p></li>
<li>
<p>A visualization showing</p>
<ul>
<li>A map-based comparison of your district with at least one other district in a manner relevant to your proposal; OR</li>
<li>A non-map visualization making an argument for the proposed scope of your project.</li>
</ul>
</li>
</ul>
<p>You can represent any district - the district where Baruch is located, the district where you grew up or where you currently live, or even a district which you just like visiting.</p>
<p>Your proposed project can be on anything tree-related you like, but here are some ideas to get you started:</p>
<ul>
<li>Replacing dead trees in a region (<em>cf.</em>, the <code>tpcondition</code> column)</li>
<li>Planting new trees of a particular species (<em>cf.</em> the <code>genusspecies</code> column)</li>
<li>Performing maintenance on particularly risky trees (<em>cf.</em> the `riskrating`` column) to improve public safety</li>
<li>Advertising particularly notable (<em>i.e.</em>, large or old) trees as the focus of a Parks-sponsored community event</li>
<li>Hosting a community event to celebrate the blooming of a particular tree species (similar to DC’s famous <a href="https://nationalcherryblossomfestival.org/">Cherry Blossom Festival</a>)</li>
<li>Replacing residual stumps with new plantings</li>
<li>Eliminating invasive species</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 5: NYC Parks Proposal">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 5: NYC Parks Proposal
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write up a one-page summary of your proposed district-level tree program for the NYC Parks Department.</p>
</div>
</div>
</section></section><section id="extra_credit" class="level2"><h2 class="anchored" data-anchor-id="extra_credit">Extra Credit Opportunities</h2>
<p>For this mini-project, no more than 4 total points of extra credit may be awarded.</p>
<section id="ec01" class="level3"><h3 class="anchored" data-anchor-id="ec01">Extra Credit Opportunity #01: Improved Tree Map Visualizations</h3>
<p><strong>Possible Extra Credit: Up to 2 Point</strong></p>
<p>The map of all trees is a bit too dense to be truly legible. Modify that graph using some sort of animated (max 1 point) or interactive (max 2 points) visualization to improve legibility.</p>
</section><section id="ec02" class="level3"><h3 class="anchored" data-anchor-id="ec02">Extra Credit Opportunity #02: Additional Parks Data</h3>
<p><strong>Possible Extra Credit: Up to 2 Points</strong></p>
<p>The Parks Department makes other data sets available including details of the <a href="https://data.cityofnewyork.us/Environment/Forestry-Risk-Assessments/259a-b6s7/about_data">safety risk proposed by unhealthy trees</a> and <a href="https://data.cityofnewyork.us/Environment/Forestry-Work-Orders/bdjm-n7q4/about_data">ongoing maintenance orders</a>.</p>
<p>One point of extra credit is available for each of these data sets used in your analysis and proposal. To get the point of extra credit, you <em>must</em> download this data ‘politely’ using the same approach used to download the Tree Points. (Note that this data should be downloaded as <code>csv</code> or <code>json</code>, not <code>geojson</code>, and can be read into <code>R</code> using <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv</a></code> or <code><a href="https://jeroen.r-universe.dev/jsonlite/reference/read_json.html">jsonlite::read_json</a></code>.)</p>
<hr>
<p>This work ©2025 by <a href="https://michael-weylandt.com">Michael Weylandt</a> is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">Creative Commons BY-NC-SA 4.0</a> license. <img src="http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" class="img-fluid" style="width:10.0%"></p>


</section></section><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>See the NYC City Council’s latest review of DPR at <a href="https://council.nyc.gov/compliance/nycc-soc-report-card/parks-and-recreation/" class="uri">https://council.nyc.gov/compliance/nycc-soc-report-card/parks-and-recreation/</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Throughout this section, replace <code>&lt;GITHUB_ID&gt;</code> with your GitHub ID from <a href="./mini00.html">Mini-Project #00</a>, making sure to remove the angle brackets. Note that the automated course infrastructure will be looking for precise formatting, so follow these instructions closely.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>For some reason, I can only find the city council districts including water areas on the NYC OpenData site. Since we’re looking at planted trees, the water area is not helpful to us and will make our maps look a bit funny.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>As of the time of writing this assignment, the latest <code>zip</code> file can be downloaded by clicking the <code>Download Files</code> button for the “Clipped to Shoreline” data. Right click this button to get the necessary URL.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>This is especially true for districts with waterfront as the shape files capture every little in-and-out of the coastline. This complexity is historically important as it was a driving factor in the development of fractal mathematics, which attempted to resolve the so-called <a href="https://en.wikipedia.org/wiki/Coastline_paradox">Coastline Paradox</a>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/michael-weylandt\.com\/STA9750\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/miniprojects/mini03.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/miniprojects/mini03.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>