<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>STA 9750 Mini-Project #04: Just the Fact(-Check)s, Ma’am! – STA 9750</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../_houndfavicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-1c47065645911eb62ace0da5c8a22cd9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">STA 9750</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href=".././syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././preassignments.html"> 
<span class="menu-text">Pre-Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././labs.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././miniprojects.html"> 
<span class="menu-text">Mini Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././project.html"> 
<span class="menu-text">Course Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././resources.html"> 
<span class="menu-text">Additional Resources and Course Policies</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././objectives.html"> 
<span class="menu-text">Learning Objectives</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-prior-offerings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Prior Offerings</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-prior-offerings">
<li>
    <a class="dropdown-item" href=".././archive/AY-2024-SPRING/">
 <span class="dropdown-text">Spring 2025</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href=".././archive/AY-2024-FALL/">
 <span class="dropdown-text">Fall 2024</span></a>
  </li>  
    </ul>
</li>
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#due-dates" id="toc-due-dates" class="nav-link active" data-scroll-target="#due-dates">Due Dates</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li>
<a href="#the-final-mini-project" id="toc-the-final-mini-project" class="nav-link" data-scroll-target="#the-final-mini-project">The Final Mini-Project</a>
  <ul class="collapse">
<li><a href="#student-responsbilities" id="toc-student-responsbilities" class="nav-link" data-scroll-target="#student-responsbilities">Student Responsbilities</a></li>
  <li><a href="#rubric" id="toc-rubric" class="nav-link" data-scroll-target="#rubric">Rubric</a></li>
  <li><a href="#submission-instructions" id="toc-submission-instructions" class="nav-link" data-scroll-target="#submission-instructions">Submission Instructions</a></li>
  </ul>
</li>
  <li>
<a href="#mini-project" id="toc-mini-project" class="nav-link" data-scroll-target="#mini-project">Mini-Project #04: Just the Fact(-Check)s, Ma’am!</a>
  <ul class="collapse">
<li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link" data-scroll-target="#data-acquisition">Data Acquisition</a></li>
  <li><a href="#data-integration-and-exploration" id="toc-data-integration-and-exploration" class="nav-link" data-scroll-target="#data-integration-and-exploration">Data Integration and Exploration</a></li>
  <li><a href="#statistical-analysis" id="toc-statistical-analysis" class="nav-link" data-scroll-target="#statistical-analysis">Statistical Analysis</a></li>
  <li><a href="#fact-check-bls-revisions" id="toc-fact-check-bls-revisions" class="nav-link" data-scroll-target="#fact-check-bls-revisions">Fact Check BLS Revisions</a></li>
  </ul>
</li>
  <li><a href="#extra_credit" id="toc-extra_credit" class="nav-link" data-scroll-target="#extra_credit">Extra Credit Opportunities</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/miniprojects/mini04.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/miniprojects/mini04.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">STA 9750 Mini-Project #04: Just the Fact(-Check)s, Ma’am!</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p><span class="math display">\[\newcommand{\P}{\mathbb{P}} \newcommand{\E}{\mathbb{E}}\]</span></p>
<section id="due-dates" class="level3"><h3 class="anchored" data-anchor-id="due-dates">Due Dates</h3>
<ul>
<li>Released to Students: 2025-11-01</li>
<li><strong>Initial Submission: 2025-12-05 11:59pm ET on GitHub and Brightspace</strong></li>
<li>
<strong>Peer Feedback:</strong>
<ul>
<li>Peer Feedback Assigned: 2025-12-08 on GitHub</li>
<li><strong>Peer Feedback Due: 2025-12-19 11:59pm ET on GitHub</strong></li>
</ul>
</li>
</ul>
<p><em>Estimated Time to Complete: 5 Hours</em></p>
<p><em>Estimated Time for Peer Feedback: 1 Hour</em></p>
<hr></section><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Welcome to Mini-Project #04!</p>
<p>On August 1st, 2025, President Donald Trump announced in <a href="https://truthsocial.com/@realDonaldTrump/posts/114954846612623858">a post on Truth Social</a> that he was instructing his staff to fire <a href="https://en.wikipedia.org/wiki/Erika_McEntarfer">Dr.&nbsp;Erika McEntarfer</a>, the Commissioner of Labor Statistics. As the head of the <a href="https://www.bls.gov/">Bureau of Labor Statistics</a>, Dr.&nbsp;McEntarfer had responsibility for all of the BLS’s statistical programs and reporting. None of these reports is more closely watched than the BLS’s Monthly Current Employment Statistics (CES), colloquially known as the “jobs number”. The monthly jobs report regularly moves financial markets, is scrutinized and analyzed by economists, investors, and business leaders of every stripe, and is used by politicians and political analysts as the primary measure of “the economy,” alongside major stock indices.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>The sudden dismissal of Dr.&nbsp;McEntarfer was quickly and emphatically criticized by economists from both <a href="https://www.nytimes.com/live/2025/08/01/opinion/thepoint#bls-commissioner-trump-fire-erika-mcentarfer">left-</a> and <a href="https://x.com/MichaelRStrain/status/1951365737647415593">right-of center</a> who worried that even the appearance of politicization would permanently create doubt in the quality of BLS’s work. Defenders of the President’s actions pointed to the size and direction of recent <em>revisions</em> to CES numbers as a cause for concern. Supporters of BLS and Dr.&nbsp;McEntarer concede that BLS and CES face non-trivial challenges but deny any political valence to these challenges. Indeed, as one former BLS Commissioner has noted, the Commissioner has minimal-to-no ability to view or edit CES numbers before publication and that revisions are an expected part of the process:</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/jBBxVKB-LPk" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p><a href="https://www.piie.com/blogs/realtime-economics/2025/bls-investigation-challenges-yes-rigged-data-no">This report</a>, jointly published by Bloomberg News and the Petersen Institute for International Economics (a left-of-center think-tank), goes into great detail about the source, necessity, and procedures for month-over-month revisions.</p>
<p>In this final Mini-Project, you will investigate recent patterns in BLS CES estimates and revisions, with an eye to evaluating the truth of the President’s claimed rationale for firing Dr.&nbsp;McEntarfer. While briefer than the previous Mini-Projects, this project will bring together all of the skills you have developed in this course:</p>
<ul>
<li>Accessing data from the web using HTTP requests (<code>httr2</code>)</li>
<li>Extracting data from HTML and cleaning it (<code>rvest</code>, <code>stringr</code>)</li>
<li>Joining together data from different tables (multi-table <code>dplyr</code>)</li>
<li>“Pivoting” and preparing data for analysis (single-table <code>dplyr</code>)</li>
<li>Exploring and visualizing data (<code>ggplot2</code>)</li>
<li>Statistical analysis and inference (<code>infer</code> or <code>stats</code>)</li>
<li>Communicating your findings using web-based reproducible research tools (Quarto)</li>
</ul>
<p>For this mini-project, you will evaluate the veracity of these competing claims about the accuracy of BLS reports in the form of a political “fact check.” That is, you will find a claim made by a public figure and see whether the data supports, refutes, or - most likely - is only partially consistent with that claim.</p>
<p>There is no <em>right</em> answer to this analysis: as in so many things, the specific way you interpret question will dictate the answer you find. It is true that recent BLS revisions have been among the largest in history, but the working population is also among the largest in history, so <em>proportionally</em> these revisions may not be quite so large. As you complete this assignment, I <em>strongly</em> encourage you to attempt to work <em>apolitically</em>, letting the data and your analysis lead wherever they may: this is a complex question about statistical methodology and evaluation and people of good will may and do disagree on it.</p>
<p>Any sign of politics leaching into the peer evaluation process will be <strong>rapidly</strong> and <strong>forcefully</strong> addressed by the instructor.</p>
<p>Note that, compared to previous mini-projects, the scope of this project is relatively smaller: in light of this, and the more advanced skills you have spent the past 3 months developing, this mini-project should be the least demanding of the course. (It is still likely to be the most <em>difficult</em> simply because you are responsible for more steps of the data analysis than any prior project.) At this point in the course, you should be spending the majority of your out-of-class hours on your <a href="../project.html">Course Project</a>.</p>
</section><section id="the-final-mini-project" class="level2"><h2 class="anchored" data-anchor-id="the-final-mini-project">The Final Mini-Project</h2>
<p>This mini-project completes our whirlwind tour of several different forms of data-driven writing:</p>
<ul>
<li>Marketing and Press Releases</li>
<li>Policy Briefs and Political Lobbying</li>
<li>Program Design and Non-Profit Grant Writing</li>
<li>Fact Checking Controversial Claims</li>
</ul>
<p>You have applied your skills to a wide range of topics, including trending content on Netflix, Forestry records of New York City, housing development permitting, and employment reports.</p>
<p>There are, of course, many other ways that data can be used to generate and communicate insights and many other topics where your skills can be applied, but hopefully this “hit parade” has given you a sense of just how widely your new skills can take you. In each of these domains, you have seen how sophisticated and thoughtful analysis - not simply computing a single mean or regression coefficient - has allowed deeper understanding of the complexities of real world problems. You have learned to think beyond the simple binary “correct/incorrect” of an analysis and to see that even superficially simple questions - “is this true?”, “what is the average?”, “is there a correlation?” - can lead down deep and rewarding rabbit holes of complexity. But those rabbit holes are where your real power as a data analyst can be found.</p>
<p>The tools of quantitative analysis and communication you have developed in this course can be used in essentially infinite contexts– we have only scratched the surface–and I’m excited to see what you do in the remainder of this course, in your remaining time at Baruch, and in your future careers.</p>
<section id="student-responsbilities" class="level3"><h3 class="anchored" data-anchor-id="student-responsbilities">Student Responsbilities</h3>
<p>Recall our basic analytic workflow and table of student responsibilities:</p>
<ul>
<li>Data Ingest and Cleaning: Given a single data source, read it into <code>R</code> and transform it to a reasonably useful standardized format.</li>
<li>Data Combination and Alignment: Combine multiple data sources to enable insights not possible from a single source.</li>
<li>Descriptive Statistical Analysis: Take a data table and compute informative summary statistics from both the entire population and relevant subgroups</li>
<li>Data Visualization: Generate insightful data visualizations to spur insights not attainable from point statistics</li>
<li>Inferential Statistical Analysis and Modeling: Develop relevant predictive models and statistical analyses to generate insights about the <em>underlying population</em> and not simply the data at hand.</li>
</ul>
<table class="table-hover caption-top table">
<caption>Students’ Responsibilities in Mini-Project Analyses</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 22%">
<col style="width: 27%">
<col style="width: 12%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">Ingest and Cleaning</th>
<th style="text-align: center;">Combination and Alignment</th>
<th style="text-align: center;">Descriptive Statistical Analysis</th>
<th style="text-align: center;">Visualization</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #01</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #02</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #03</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #04</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
</tbody>
</table>
<p>In this mini-project, you are in charge of the whole pipeline, from data acquisition to statistical inference. The rubric below evaluates your work on all aspects of this project.</p>
</section><section id="rubric" class="level3"><h3 class="anchored" data-anchor-id="rubric">Rubric</h3>
<p>STA 9750 Mini-Projects are evaluated using <em>peer grading</em> with <em>meta-review</em> by the course GTAs. The following rubric will be used for this mini-project:</p>
<table id="rubric_table" class="table-hover caption-top table" width="1,1,1,1,1,1">
<thead><tr class="header">
<th style="text-align: center;">Course Element</th>
<th style="text-align: left;">Excellent (9-10)</th>
<th style="text-align: left;">Great (7-8)</th>
<th style="text-align: left;">Good (5-6)</th>
<th style="text-align: left;">Adequate (3-4)</th>
<th style="text-align: left;">Needs Improvements (1-2)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Written Communication</td>
<td style="text-align: left;">Report is well-written and flows naturally. Motivation for key steps is clearly explained to reader without excessive detail. Key findings are highlighted and appropriately given context.</td>
<td style="text-align: left;">Report has no grammatical or writing issues. Writing is accessible and flows naturally. Key findings are highlighted, but lack suitable motivation and context.</td>
<td style="text-align: left;">Report has no grammatical or writing issues. Key findings are present but insufficiently highlighted.</td>
<td style="text-align: left;">Writing is intelligible, but has some grammatical errors. Key findings are obscured.</td>
<td style="text-align: left;">Report exhibits significant weakness in written communication. Key points are difficult to discern.</td>
</tr>
<tr class="even">
<td style="text-align: center;">Project Skeleton</td>
<td style="text-align: left;">Code completes all instructor-provided tasks correctly. Responses to open-ended tasks are particularly insightful and creative.</td>
<td style="text-align: left;">Code completes all instructor-provided tasks satisfactorily.</td>
<td style="text-align: left;">Response to one instructor provided task is skipped, incorrect, or otherwise incomplete.</td>
<td style="text-align: left;">Responses to two instructor provided tasks are skipped, incorrect, or otherwise incomplete.</td>
<td style="text-align: left;">Response to three or more instructor provided tasks are skipped, incorrect, or otherwise incomplete.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><p>Formatting &amp; Display</p></td>
<td style="text-align: left;">
<p>Tables and figures are full ‘publication-quality.’</p>
<p>Report includes at least one animated visualization designed to effectively communicate findings.</p>
</td>
<td style="text-align: left;">
<p>Tables have well-formatted column names, suitable numbers of digits, and attractive presentation.</p>
<p>Figures are ‘publication-quality,’ with suitable axis labels, well-chosen structure, attractive color schemes, titles, subtitles, and captions, <em>etc.</em></p>
</td>
<td style="text-align: left;">
<p>Tables are well-formatted, but still have room for improvement.</p>
<p>Figures are above ‘exploratory-quality,’ but do not reach full ‘publication-quality.’</p>
</td>
<td style="text-align: left;">
<p>Tables lack significant ‘polish’ and need improvement in substance (filtering and down-selecting of presented data) or style.</p>
<p>Figures are suitable to support claims made, but are ‘exploratory-quality,’ reflecting minimal effort to customize and ‘polish’ beyond <code>ggplot2</code> defaults.</p>
</td>
<td style="text-align: left;">
<p>Unfiltered ‘data dump’ instead of curated table.</p>
<p>Baseline figures that do not fully support claims made.</p>
</td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Code Quality</p></td>
<td style="text-align: left;">
<p>Code is (near) flawless.</p>
<p>Code passes all <code>styler</code> and <code>lintr</code> type analyses without issue.</p>
</td>
<td style="text-align: left;"><p>Comments give context of the analysis, not simply defining functions used in a particular line.</p></td>
<td style="text-align: left;"><p>Code has well-chosen variable names and basic comments.</p></td>
<td style="text-align: left;"><p>Code executes properly, but is difficult to read.</p></td>
<td style="text-align: left;"><p>Code fails to execute properly.</p></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Data Preparation</td>
<td style="text-align: left;">Data import is fully-automated and efficient, taking care to only download from web-sources if not available locally.</td>
<td style="text-align: left;">Data is imported and prepared effectively, in an automated fashion with minimal hard-coding of URLs and file paths.</td>
<td style="text-align: left;">Data is imported and prepared effectively, though source and destination file names are hard-coded.</td>
<td style="text-align: left;">Data is imported in a manner likely to have errors.</td>
<td style="text-align: left;">Data is hard-coded and not imported from an external source.</td>
</tr>
</tbody>
</table>
<p>For this mini-project, no more than <strong>4</strong> total points of extra credit can be be awarded. Opportunities for extra credit exist for students who go <em>above and beyond</em> the instructor-provided scaffolding. Specific opportunities for extra credit can be <a href="#extra_credit">found below</a>.</p>
<p>Students pursuing careers in data analytics are strongly encouraged to go beyond the strict ambit of the mini-projects to</p>
<ol type="i">
<li>further refine their skills;</li>
<li>learn additional techniques that can be used in the final course project; and</li>
<li>develop a more impressive professional portfolio.</li>
</ol>
<p>Because students are encouraged to use STA 9750 mini-projects as the basis for a professional portfolio, the basic skeleton of each project will be released under a fairly permissive usage license. Take advantage of it!</p>
</section><section id="submission-instructions" class="level3"><h3 class="anchored" data-anchor-id="submission-instructions">Submission Instructions</h3>
<p>After completing the analysis, write up your findings, <em>showing all of your code</em>, using a dynamic <code>quarto</code> document and post it to your course repository. The <code>qmd</code> file should be named <code>mp04.qmd</code> (lower case!) so the rendered document can be found at <code>docs/mp04.html</code> in the student’s repository and will be served at the URL:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<blockquote class="blockquote">
<p><code>https://&lt;GITHUB_ID&gt;.github.io/STA9750-2025-FALL/mp04.html</code></p>
</blockquote>
<p>You can use the helper function <code>mp_start</code> available at in the <a href="../tips.html#mp_start">Course Helper Functions</a> to create a file with the appropriate name and some meta-data already included. Do so by running the following command at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_start(N=04)</code></p>
</blockquote>
<p>After completing this mini-project, upload your rendered output and necessary ancillary files to GitHub to make sure your site works. The <code>mp_submission_ready</code> function in the <a href="../tips.html#mp_submission_ready">Course Helper Functions</a> can perform some of these checks automatically. You can run this function by running the following commands at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_submission_ready(N=04)</code></p>
</blockquote>
<p>Once you confirm this website works (substituting <code>&lt;GITHUB_ID&gt;</code> for the actual GitHub username provided to the professor in <a href="./mini00.html">MP#00</a> of course), open a GitHub issue on the instructor’s repository to submit your completed work.</p>
<p>The easiest way to do so is by use of the <code>mp_submission_create</code> function in the <a href="../tips.html#mp_submission_create">Course Helper Functions</a>, which can be used by running the following command at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_submission_create(N=04)</code></p>
</blockquote>
<p>Alternatively, if you wish to submit manually, open a new issue at</p>
<blockquote class="blockquote">
<p><code>https://github.com/michaelweylandt/STA9750-2025-FALL/issues/new</code> .</p>
</blockquote>
<p>Title the issue <code>STA 9750 &lt;GITHUB_ID&gt; MiniProject #04</code> and fill in the following text for the issue:</p>
<div id="submission-text">
<pre><code>Hi @michaelweylandt!

I've uploaded my work for MiniProject #**04** - check it out!

&lt;https://&lt;GITHUB_ID&gt;.github.io/STA9750-2025-FALL/mp04.html&gt;</code></pre>
</div>
<p>Once the submission deadline passes, the instructor will tag classmates for peer feedback in this issue thread.</p>
<p><em>Additionally</em>, a PDF export of this report should be submitted on Brightspace. To create a PDF from the uploaded report, simply use your browser’s ‘Print to PDF’ functionality.</p>
<p><strong>NB</strong>: The analysis outline below specifies key <em>tasks</em> you need to perform within your write up. Your peer evaluators will check that you complete these. You are encouraged to do extra analysis, but the bolded <strong>Tasks</strong> are <em>mandatory</em>.</p>
<p><strong>NB</strong>: Your final submission should look like a <em>report</em>, not simply a list of facts answering questions. Add introductions, conclusions, and your own commentary. You should be practicing both raw <em>coding</em> skills and written <em>communication</em> in all mini-projects. There is little value in data points stated without context or motivation.</p>
</section></section><section id="mini-project" class="level2"><h2 class="anchored" data-anchor-id="mini-project">Mini-Project #04: Just the Fact(-Check)s, Ma’am!</h2>
<section id="data-acquisition" class="level3"><h3 class="anchored" data-anchor-id="data-acquisition">Data Acquisition</h3>
<p>Your analysis will depend on two separate data sources:</p>
<ul>
<li>The (final) CES estimates of the total employment level of the United States; and</li>
<li>The cycle-to-cycle <em>revisions</em> of the CES estimate.</li>
</ul>
<p>For this mini-project, will will exclusively focus on <em>seasonally-adjusted</em> <strong>total non-farm payroll</strong> as this is the most politically salient number that CES reports. Note also that CES principally computes the <strong>total payroll number</strong>, but the quantity of primary interest in political discussion is typically the <em>change</em> in this number.</p>
<section id="final-ces-estimates" class="level4"><h4 class="anchored" data-anchor-id="final-ces-estimates">Final CES Estimates</h4>
<p>The Final CES Estimates are published by BLS in several places. We are going to access them through BLS Data Finder 1.1. Before attempting to access this data in <code>R</code>, it is useful to practice accessing them through your webbrowser.</p>
<p>Navigate to <a href="https://data.bls.gov/toppicks?survey=ce" class="uri">https://data.bls.gov/toppicks?survey=ce</a>. Select the first row “Total Nonfarm Employment, Seasonally Adjusted” and hit “Retrieve Data” at the bottom of the page. You will then be taken to a page with the URL <a href="https://data.bls.gov/pdq/SurveyOutputServlet" class="uri">https://data.bls.gov/pdq/SurveyOutputServlet</a> and approximately 10 years of data below. Adjust the years at the top of the page to start at <code>1979</code> and hit “Go” to view the full table.</p>
<p><strong>Note that you cannot go directly to <a href="https://data.bls.gov/pdq/SurveyOutputServlet" class="uri">https://data.bls.gov/pdq/SurveyOutputServlet</a> and get useful results. This page requires an HTTP request more sophisticated than a simple <code>GET</code> in order to work properly.</strong></p>
<p>In order to complete this mini-project, you will need to make an equivalent HTTP request using <code>httr2</code> to get the entire table.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 1: Download CES Total Nonfarm Payroll">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 1: Download CES Total Nonfarm Payroll
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using <code>httr2</code> and <code>rvest</code>, access and download the CES Total Nonfarm Payroll Seasonally Adjusted for each month from January 1979 to June of 2025.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Return your results in a data frame of the following form:</p>
<table class="caption-top table">
<thead><tr class="header">
<th>date</th>
<th>level</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1979-01-01</td>
<td>88808</td>
</tr>
<tr class="even">
<td>1979-02-01</td>
<td>89055</td>
</tr>
</tbody>
</table>
<p>continued through 2025-06-01. (Note that this will require some clean-up, dplyr, and pivot work).</p>
<p><em>Do not download the XLSX file and read that. The point of this exercise is to practice working with HTML.</em></p>
</div>
</div>
<p>Replicating a suitable HTTP request in <code>R</code> using <code>httr2</code> can be subtle, so I recommend following these steps:</p>
<ol type="1">
<li><p>Use your browser’s introspection tools (<code>Inspect</code>, <code>Developer Tools</code>, or similar) to inspect the <em>final</em> HTTP request that shows the table starting in 1979.</p></li>
<li>
<p>Replicate all elements of this HTTP request in <code>httr2</code>, including both</p>
<ul>
<li>the correct HTTP verb and</li>
<li>the request body (using form-encoding <em>via</em> <code>req_body_form()</code>)</li>
</ul>
<p>and confirm that your request is successful.</p>
</li>
<li><p>View the HTML source of the page and identify the table element you want to extract.</p></li>
<li><p>Using the tools of <code>rvest</code>, select the correct HTML element and turn it into an <code>R</code> data frame.</p></li>
<li><p>Pivot that table into an appropriate format.</p></li>
<li>
<p>Modify the column types as needed using the <code>as.*****</code>-family of functions for basic conversions or the functions from the <code>lubridate</code> package to parse dates and times. Finally, use <code><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na()</a></code> to remove any values that do not convert directly (including the footnote row about preliminary values).</p>
<ul>
<li>The <code>ym</code> function from the <code>lubridate</code> package will be useful in parsing dates. It takes a <em>string</em> like <code>1979 Jan</code> and returns a <code>Date</code> object of <code>1979-01-01</code>. You may need to use string functions to combine multiple columns into a single string vector that can be passed to <code>ym</code>.</li>
</ul>
</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled" title="API Usage **Required**">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
API Usage <strong>Required</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You must use <code>httr2</code> and <code>rvest</code> (not <code>httr</code>) to access and process the page directly to download this data</strong>.</p>
<p>A primary learning goal of this Mini-Project is to practice use of web scraping for data acquisition. If you download a data file manually, from a different source, use a “wrapper” package, or otherwise avoid scraping the page directly, you will receive a 0 for the Project Skeleton, Code Quality, and Data Preparation portions of your grade.</p>
</div>
</div>
<p>This does not need to be a <em>long</em> bit of code when it is all done. My code to do all of these steps totals only 17 lines, generously formatted. Getting it right may require some effort, so make sure you are constantly printing output and checking it ‘manually’ to ensure your code is working as expected. It may also take a bit of trial-and-error to determine which elements of the HTTP request your browser makes are actually essential to replicate in <code>R</code> and which can be safely dropped.</p>
</section><section id="ces-revisions" class="level4"><h4 class="anchored" data-anchor-id="ces-revisions">CES Revisions</h4>
<p>Revisions to the CES Non-Farm Payroll Employment number are reported on a static page:</p>
<p><a href="https://www.bls.gov/web/empsit/cesnaicsrev.htm" class="uri">https://www.bls.gov/web/empsit/cesnaicsrev.htm</a></p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 2: Download CES Revisions Tables">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 2: Download CES Revisions Tables
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using <code>httr2</code> and <code>rvest</code>, access and download the CES Revisions for each month from January 1979 to June of 2025.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Return your results in a data frame of the following form:</p>
<table class="caption-top table">
<thead><tr class="header">
<th>date</th>
<th>original</th>
<th>final</th>
<th>revision</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1979-01-01</td>
<td>325</td>
<td>243</td>
<td>-82</td>
</tr>
<tr class="even">
<td>1979-02-01</td>
<td>301</td>
<td>294</td>
<td>-7</td>
</tr>
</tbody>
</table>
<p>continued through June 2025. Here the <code>revision</code> column is obtained by taking the difference in <code>original</code> (the first estimate) and <code>final</code> (the third estimate).</p>
</div>
</div>
<p>This structure of this page is somewhat complex, so I recommend that you follow the following steps:</p>
<ol type="1">
<li><p>Review the <em>source</em> of the page linked above and identify the tables of interest. There is a pattern to the HTML identifiers used for these tables: note it for later use.</p></li>
<li>
<p>Construct a suitable <code>httr2</code> request and verify that it can indeed access the BLS page linked above.</p>
<ul>
<li>A ‘default’ request will receive a 403 Forbidden error when trying to access the BLS page. Refer back to previous Mini-Projects for examples of how you can access BLS resources using <code>httr2</code>.</li>
</ul>
</li>
<li>
<p>Write a function to extract the desired data from the <em>2024</em> table. (It will be easier to develop your function on the 2024 table rather than the incomplete 2025 table.) Your function should take a single year as input and return a twelve-row data frame structured with the four columns as above.</p>
<p>Some hints:</p>
<ul>
<li><p>The column names of these tables are difficult to access since they are spread across three rows. It will likely be easier to select only the relevant table body, pass it to <code><a href="https://rvest.tidyverse.org/reference/html_table.html">rvest::html_table</a></code> after disabling <code>header</code>, and to manually set the relevant column names.</p></li>
<li><p>You will need to use the <code>slice</code> function (or some other <code>slice_*</code>-type function) to select only the first 12 rows from each table.</p></li>
<li>
<p>The <code>select</code> function can be used to select columns <em>by position</em> and to rename them at the same time: <em>e.g.</em>,</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">penguins</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span></span>
<span>   bill_length <span class="op">=</span> <span class="fl">3</span>, </span>
<span>   bill_depth  <span class="op">=</span> <span class="fl">4</span>, </span>
<span>   body_mass   <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  bill_length bill_depth body_mass
1        39.1       18.7      3750
2        39.5       17.4      3800
3        40.3       18.0      3250
4          NA         NA        NA
5        36.7       19.3      3450</code></pre>
</div>
</div>
</li>
<li><p>The <code>ym</code> function from the <code>lubridate</code> package will be useful in parsing dates. It takes a <em>string</em> like <code>1979 Jan</code> and returns a <code>Date</code> object of <code>1979-01-01</code>. You may need to use string functions to combine multiple columns into a single string vector that can be passed to <code>ym</code>.</p></li>
</ul>
</li>
<li>
<p>Use either the <code>map</code> function from the <code>purrr</code> package or a <code>for</code> loop to apply your function to all years from 1979 to 2025 and to combine the results into a data frame.</p>
<p>The <code><a href="https://purrr.tidyverse.org/reference/list_c.html">purrr::list_rbind</a></code> or <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">dplyr::bind_rows</a></code> functions will be useful in combining the different years into a large single table.</p>
</li>
</ol>
<p>This does not need to be a <em>long</em> bit of code when it is all done. My code to do all of these steps totals only 18 lines, generously formatted. Getting it right may require some effort, so make sure you are constantly printing output and checking it ‘manually’ to ensure your code is working as expected.</p>
<div class="callout callout-style-default callout-caution callout-titled" title="API Usage **Required**">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
API Usage <strong>Required</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You must use <code>httr2</code> and <code>rvest</code> (not <code>httr</code>) to access and process the page directly to download this data</strong>.</p>
<p>A primary learning goal of this Mini-Project is to practice use of web scraping for data acquisition. If you download a data file manually, from a different source, use a “wrapper” package, or otherwise avoid scraping the page directly, you will receive a 0 for the Project Skeleton, Code Quality, and Data Preparation portions of your grade.</p>
</div>
</div>
</section></section><section id="data-integration-and-exploration" class="level3"><h3 class="anchored" data-anchor-id="data-integration-and-exploration">Data Integration and Exploration</h3>
<p>Join together these two tables and perform exploratory data analysis to investigate trends in CES levels and revisions.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 3: Data Exploration and Visualization">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 3: Data Exploration and Visualization
</div>
</div>
<div class="callout-body-container callout-body">
<p>After joining your two tables, perform both visual (<code>ggplot2</code>-based) and quantitative (<code>dplyr</code>-based) exploratory analysis.</p>
<p>You will need to:</p>
<ul>
<li>Compute at least <em>6</em> statistics about CES over the past 45 years</li>
<li>Construct at least <em>4</em> visualizations of CES estimates and accuracy over the past 45 years.</li>
</ul>
<p>You can perform any analysis that supports your final write-up (below), but here are some ideas that might be useful:</p>
<ol type="1">
<li>What and when were the largest revisions (positive and negative) in CES history?</li>
<li>What fraction of CES revisions are positive in each year? In each decade?</li>
<li>How has the relative CES revision magnitude (absolute value of revision amount over final estimate) changed over time?</li>
<li>How has the absolute CES revision as a percentage of overall employment level changed over time?</li>
<li>Are there any months that systematically have larger or smaller CES revisions?</li>
<li>How large is the average CES revision in absolute terms? In terms of percent of that month’s CES level?</li>
</ol>
</div>
</div>
</section><section id="statistical-analysis" class="level3"><h3 class="anchored" data-anchor-id="statistical-analysis">Statistical Analysis</h3>
<p>While Exploratory Data Analysis (EDA) can inspire questions, it remains useful to perform <em>formal statistical inference</em> to assess whether observed differences are larger than can be explained by pure randomness. The <code>infer</code> package can be used to neatly integrate <span class="math inline">\(t\)</span>-tests and binomial proportion tests into a <code>tidyverse</code> workflow.</p>
<p>We will use the <code>t_test</code> and <code>prop_test</code> functions from this package to complete our analyses. These can be used as demonstrated below.</p>
<ul>
<li>
<p>Example 01: Suppose we want to test whether Gentoo penguins are heavier than Adelie penguins on average. Since we have a numerical response and two different groups, this is a <em>two-sample <span class="math inline">\(t\)</span> test</em>:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/infer">infer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">penguins_ok</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="co"># Things will work better if we ensure species is a character vector </span></span>
<span>    <span class="co"># and not a factor vector</span></span>
<span>    <span class="co"># </span></span>
<span>    <span class="co"># You probably don't need to copy this step since your import is unlikely</span></span>
<span>    <span class="co"># to 'accidentally' make a factor</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">penguins_ok</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">!=</span> <span class="st">"Chinstrap"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://infer.tidymodels.org/reference/t_test.html">t_test</a></span><span class="op">(</span><span class="va">body_mass</span> <span class="op">~</span> <span class="va">species</span>, </span>
<span>           order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Adelie"</span>, <span class="st">"Gentoo"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  statistic  t_df  p_value alternative estimate lower_ci upper_ci
      &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1     -23.3  242. 1.22e-63 two.sided     -1386.   -1504.   -1269.</code></pre>
</div>
</div>
<p>From this, we see that Adelie penguins are 1375 grams <em>lighter</em> on average than Gentoos and the <span class="math inline">\(p\)</span>-value is far less than 0.01, so the difference is unlikely to be solely due to sampling variability.</p>
<p>Here, we perform the test by specifying the <code>response</code> (quantity of interest) on the left hand side of the <code>~</code> and the <code>explanatory</code> variable (that which might meaningfully predict a differerence in groups) on the right hand side of the <code>~</code>. If we swap the order (or don’t provide it), the sign of the estimated difference may differ, but the actual <span class="math inline">\(p\)</span>-value won’t change for a two-sided test (as done here).</p>
<p>We can extend this analysis to perform it separately for each of three years using a bit of nested data trickery. The mechanics of this are more advanced, but you should be able to extend this to your own analysis by just changing variable names:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">penguins_ok</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">!=</span> <span class="st">"Chinstrap"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">nest</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>p_value_adelie_gentoo <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">data</span>, \<span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="fu"><a href="https://infer.tidymodels.org/reference/t_test.html">t_test</a></span><span class="op">(</span><span class="va">d</span>, </span>
<span>                                                     <span class="va">body_mass</span> <span class="op">~</span> <span class="va">species</span>,</span>
<span>                                                     order<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Adelie"</span>, <span class="st">"Gentoo"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html">unnest</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 265 × 15
# Groups:   year [3]
    year species island  bill_len bill_dep flipper_len body_mass sex   statistic
   &lt;int&gt; &lt;chr&gt;   &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt;     &lt;int&gt; &lt;fct&gt;     &lt;dbl&gt;
 1  2007 Adelie  Torger…     39.1     18.7         181      3750 male      -11.6
 2  2007 Adelie  Torger…     39.5     17.4         186      3800 fema…     -11.6
 3  2007 Adelie  Torger…     40.3     18           195      3250 fema…     -11.6
 4  2007 Adelie  Torger…     36.7     19.3         193      3450 fema…     -11.6
 5  2007 Adelie  Torger…     39.3     20.6         190      3650 male      -11.6
 6  2007 Adelie  Torger…     38.9     17.8         181      3625 fema…     -11.6
 7  2007 Adelie  Torger…     39.2     19.6         195      4675 male      -11.6
 8  2007 Adelie  Torger…     41.1     17.6         182      3200 fema…     -11.6
 9  2007 Adelie  Torger…     38.6     21.2         191      3800 male      -11.6
10  2007 Adelie  Torger…     34.6     21.1         198      4400 male      -11.6
# ℹ 255 more rows
# ℹ 6 more variables: t_df &lt;dbl&gt;, p_value &lt;dbl&gt;, alternative &lt;chr&gt;,
#   estimate &lt;dbl&gt;, lower_ci &lt;dbl&gt;, upper_ci &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Here, we see that our result has columns for the <span class="math inline">\(t\)</span> statistic, the <span class="math inline">\(p\)</span>-value, the estimated difference, and many other useful inferential quantities.</p>
</li>
</ul>
<ol start="2" type="1">
<li>
<p>Example 02: In other contexts, we may have a <em>categorial</em> response. In this case, we should not perform a <span class="math inline">\(t\)</span>-test on means, but we instead want to use a binomial proportion test <em>via</em> the <code>prop_test</code> function. For instance, if we want to see whether Adelie penguins are more likely to be female than Gentoos:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/infer">infer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">penguins_ok</span> <span class="op">|&gt;</span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">!=</span> <span class="st">"Chinstrap"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>   <span class="fu"><a href="https://infer.tidymodels.org/reference/prop_test.html">prop_test</a></span><span class="op">(</span><span class="va">sex</span> <span class="op">~</span> <span class="va">species</span>, </span>
<span>             order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Adelie"</span>, <span class="st">"Gentoo"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  statistic chisq_df p_value alternative lower_ci upper_ci
      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1   0.00650        1   0.936 two.sided     -0.116    0.141</code></pre>
</div>
</div>
<p>As before, we see that there is basically no evidence that the fraction of female penguins differs by species. Note the key difference between the <code>t_test</code> and the <code>prop_test</code>: in <code>t_test</code> the response is a numeric variable and we are testing the <em>mean</em> of that distribution; in a <code>prop_test</code> the response is a Boolean (TRUE/FALSE) value and we are testing the probability of observing a TRUE.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>We can also use this with a derived quantity. For instance, if we want to see if Gentoos are more likely to be over 4000 grams than non-Gentoos:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>is_gentoo <span class="op">=</span> <span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Gentoo"</span><span class="op">)</span>,</span>
<span>           over_4k <span class="op">=</span> <span class="va">body_mass</span> <span class="op">&gt;</span> <span class="fl">4000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://infer.tidymodels.org/reference/prop_test.html">prop_test</a></span><span class="op">(</span><span class="va">over_4k</span> <span class="op">~</span> <span class="va">is_gentoo</span>, </span>
<span>              order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TRUE"</span>, <span class="st">"FALSE"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  statistic chisq_df  p_value alternative lower_ci upper_ci
      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1      181.        1 3.50e-41 two.sided      0.699    0.828</code></pre>
</div>
</div>
<p>Here, we see that there is <em>strong</em> statistical evidence (in the form of a tiny <span class="math inline">\(p\)</span>-value) that being a Gentoo penguin increases probability of weighing over 4000 grams.</p>
<p>We can also modify this to be a one-sided test:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>is_gentoo <span class="op">=</span> <span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Gentoo"</span><span class="op">)</span>,</span>
<span>           over_4k <span class="op">=</span> <span class="va">body_mass</span> <span class="op">&gt;</span> <span class="fl">4000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://infer.tidymodels.org/reference/prop_test.html">prop_test</a></span><span class="op">(</span><span class="va">over_4k</span> <span class="op">~</span> <span class="va">is_gentoo</span>, </span>
<span>              alternative <span class="op">=</span> <span class="st">"greater"</span>,</span>
<span>              order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TRUE"</span>, <span class="st">"FALSE"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  statistic chisq_df  p_value alternative lower_ci upper_ci
      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1      181.        1 1.75e-41 greater        0.709        1</code></pre>
</div>
</div>
<p>Finally, recall that these values can be pulled out of the test result and used in the body of your text using the <code>pull</code> function from the <code>dplyr</code> package.</p>
</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 4: Statistical Inference">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 4: Statistical Inference
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the <code>t_test</code> and <code>prop_test</code> functions to perform at least <em>2</em> statistical tests about CES revisions.</p>
<p>You can perform any tests that support your final write-up (below), but here are some ideas that might be useful:</p>
<ol type="1">
<li><p>Has the fraction of negative revisions increased post-2000?</p></li>
<li><p>Has the fraction of revisions of more than 1% increased post-2020?</p></li>
<li><p>Is the average revision significantly different from zero?</p></li>
<li><p>Has the average revision increased post-2020?</p></li>
<li>
<p>Are revisions larger when the underlying change in CES level is larger?</p>
<p><em>You can binarize the CES change as “large” or “not” and use the two sample tests described above or use the <code>cor.test</code> included in base <code>R</code> (not <code>infer</code>).</em></p>
</li>
</ol>
</div>
</div>
</section><section id="fact-check-bls-revisions" class="level3"><h3 class="anchored" data-anchor-id="fact-check-bls-revisions">Fact Check BLS Revisions</h3>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 5: Fact Checks of Claims about BLS">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 5: Fact Checks of Claims about BLS
</div>
</div>
<div class="callout-body-container callout-body">
<p>Go online and find two politicians or commentators talking about CES revisions and the firing of Dr.&nbsp;McEntarfer. Use their claims as the basis of a ‘fact check’ and evaluate them using the <a href="https://www.politifact.com/truth-o-meter/">Politifact Fact-o-Meter</a> on a scale from “True” to “Pants-on-Fire”.</p>
<p>For each claim, your fact check should include:</p>
<ul>
<li>At least 3 numbers (statistics) that you computed in Task 3</li>
<li>At least 2 visualizations (plots) from Task 3</li>
<li>A hypothesis test of the underlying claim (<em>cf.</em> Task 4)</li>
</ul>
<p>Note that you shouldn’t need to do much <em>new</em> work for this task. This is principally about organizing and combining your results into a coherent analysis.</p>
</div>
</div>
<p><em>At least one</em> of your analyses must use both the absolute levels (Task 1) and the revisions (Task 2). If you cannot find a claim to ‘fact check’ that uses the absolute levels, you can create a fake claim (from a fake politician, clearly marked as such) as the basis of one of your fact checks.</p>
<p>Note that this final write up can be the place where your results from Tasks 3 and 4 are presented.</p>
<p>If the claim you choose to fact check has an explicit partisan basis, the following may be useful:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">presidents_party</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html">expand_grid</a></span><span class="op">(</span>year<span class="op">=</span><span class="fl">1979</span><span class="op">:</span><span class="fl">2025</span>, </span>
<span>                                       month <span class="op">=</span> <span class="va">month.name</span>, </span>
<span>                                       president <span class="op">=</span> <span class="cn">NA</span>, </span>
<span>                                       party <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>president <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"January"</span><span class="op">)</span>  <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1979</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Carter"</span>,</span>
<span>        <span class="co"># BLS jobs reports come out on the first Friday, so February</span></span>
<span>        <span class="co"># is the first time a new president 'owns' the jobs number </span></span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1981</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Reagan"</span>,</span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1989</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Bush 41"</span>,</span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1993</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Clinton"</span>,</span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2001</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Bush 43"</span>,</span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2009</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Obama"</span>,</span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2017</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Trump I"</span>,</span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2021</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Biden"</span>,</span>
<span>        <span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"February"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2025</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Trump II"</span>,</span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/fill.html">fill</a></span><span class="op">(</span><span class="va">president</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>party <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">president</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Carter"</span>, <span class="st">"Clinton"</span>, <span class="st">"Obama"</span>, <span class="st">"Biden"</span><span class="op">)</span>, </span>
<span>                           <span class="st">"D"</span>, </span>
<span>                           <span class="st">"R"</span><span class="op">)</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="extra_credit" class="level2"><h2 class="anchored" data-anchor-id="extra_credit">Extra Credit Opportunities</h2>
<p>For this mini-project, no more than 4 total points of extra credit may be awarded.</p>
<p>Above, you were required to use the <code>infer</code> package which wraps the traditional (theory-based) Student’s <span class="math inline">\(t\)</span>-test and binomial proportion test, but the primary aim of the <code>infer</code> package is actually to provide an easy-to-use interface for computationally-intensive statistical inference. For extra credit, you will explore this additional functionality.</p>
<p>In particular, one point of extra credit may be included for each of:</p>
<ul>
<li>Providing a non-technical explanation of computationally-intensive statistical inference. By “non-technical”, I mean at a level suitable for inclusion in a general audience site like Politifact, not a statistics or economics textbook or research paper.</li>
<li>Including an schematic visualization of how these computationally intensive methods work. (This is not a <code>ggplot</code> of a sampling distribution) This should be something in a “flowchart” or “how to guide” style, not the results of a specific analysis.</li>
<li>Applying computationally intensive techniques in your fact check. (You need to perform a theory-based parametric test for Task 4, so the <code>infer</code> usage here would be a second statistical test of the same underlying claim.)</li>
<li>Implementing at least three different tests, with at least one testing the mean revision, median revision, and probability of positive revisions; <em>i.e.</em>, computational analogues of a <span class="math inline">\(t\)</span>-test, a Wilcoxon test, and a binomial proportion test.</li>
</ul>
<p>To earn any of these extra credit points, you must use <em>computationally-intensive</em> inference, <em>i.e.</em>, techniques like the bootstrap or permutation test. It is not enough to simply sample from a parametric null distribution using <code>infer</code>’s <code>hypothesize(type="draw")</code> mode.</p>
<p>Part III of the book <a href="https://moderndive.com/"><em>Statistical Inference via Data Science</em></a> will provide useful background on these topics.</p>
<hr>
<p>This work ©2025 by <a href="https://michael-weylandt.com">Michael Weylandt</a> is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">Creative Commons BY-NC-SA 4.0</a> license. <img src="http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" class="img-fluid" style="width:10.0%"></p>


</section><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>We will not dwell on the absurdity of reducing the total economic activity of over 300 million people down to a single number here.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Throughout this section, replace <code>&lt;GITHUB_ID&gt;</code> with your GitHub ID from <a href="./mini00.html">Mini-Project #00</a>, making sure to remove the angle brackets. Note that the automated course infrastructure will be looking for precise formatting, so follow these instructions closely.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>At the time of writing this assignment, June 2025 is the final month for which all revisions have been published. Given the ongoing lapse in federal government appropriations, it is unclear when revisions to later tables will be released.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>At the time of writing this assignment, June 2025 is the final month for which all revisions have been published. Given the ongoing lapse in federal government appropriations, it is unclear when revisions to later tables will be released.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Of course, if you haven taken <a href="https://michael-weylandt.com/STA9715/">STA 9715</a>, you know that there is only one univariate Boolean distribution (the Bernoulli) and that the probability of observing a success is equal to the mean of the distribution. (<span class="math inline">\(X \sim \text{Bernoulli} \implies \E[X] = \P(X = 1)\)</span> and all that). This might lead you to ask whether there really is a meaningful difference between a <span class="math inline">\(t\)</span>-test and a proportion test. These are good questions to ask your STA 9719 professor.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/michael-weylandt\.com\/STA9750\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/miniprojects/mini04.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/miniprojects/mini04.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>