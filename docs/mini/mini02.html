<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>STA 9750 Mini-Project #02: How Do You Do ‘You Do You’? – STA 9750</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../_houndfavicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-1c47065645911eb62ace0da5c8a22cd9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">STA 9750</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href=".././syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././preassignments.html"> 
<span class="menu-text">Pre-Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././labs.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././miniprojects.html"> 
<span class="menu-text">Mini Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././project.html"> 
<span class="menu-text">Course Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././resources.html"> 
<span class="menu-text">Additional Resources and Course Policies</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href=".././objectives.html"> 
<span class="menu-text">Learning Objectives</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-prior-offerings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Prior Offerings</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-prior-offerings">
<li>
    <a class="dropdown-item" href=".././archive/AY-2025-FALL/">
 <span class="dropdown-text">Fall 2025</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href=".././archive/AY-2024-SPRING/">
 <span class="dropdown-text">Spring 2025</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href=".././archive/AY-2024-FALL/">
 <span class="dropdown-text">Fall 2024</span></a>
  </li>  
    </ul>
</li>
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#due-dates" id="toc-due-dates" class="nav-link active" data-scroll-target="#due-dates">Due Dates</a></li>
  <li>
<a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
<li><a href="#student-responsibilities" id="toc-student-responsibilities" class="nav-link" data-scroll-target="#student-responsibilities">Student Responsibilities</a></li>
  <li><a href="#rubric" id="toc-rubric" class="nav-link" data-scroll-target="#rubric">Rubric</a></li>
  <li><a href="#submission-instructions" id="toc-submission-instructions" class="nav-link" data-scroll-target="#submission-instructions">Submission Instructions</a></li>
  </ul>
</li>
  <li>
<a href="#mini-project" id="toc-mini-project" class="nav-link" data-scroll-target="#mini-project">Mini-Project #02: How Do You Do ‘You Do You’?</a>
  <ul class="collapse">
<li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link" data-scroll-target="#data-acquisition">Data Acquisition</a></li>
  <li><a href="#data-cleaning-and-preparation" id="toc-data-cleaning-and-preparation" class="nav-link" data-scroll-target="#data-cleaning-and-preparation">Data Cleaning and Preparation</a></li>
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda">Data Integration and Initial Exploration</a></li>
  <li><a href="#final-deliverable-market-research-on-time-use-patterns-in-target-demographics" id="toc-final-deliverable-market-research-on-time-use-patterns-in-target-demographics" class="nav-link" data-scroll-target="#final-deliverable-market-research-on-time-use-patterns-in-target-demographics">Final Deliverable: Market Research on Time Use Patterns in Target Demographics</a></li>
  </ul>
</li>
  <li><a href="#ai-usage-statement" id="toc-ai-usage-statement" class="nav-link" data-scroll-target="#ai-usage-statement">AI Usage Statement</a></li>
  <li>
<a href="#extra_credit" id="toc-extra_credit" class="nav-link" data-scroll-target="#extra_credit">Extra Credit Opportunities</a>
  <ul class="collapse">
<li><a href="#ec01" id="toc-ec01" class="nav-link" data-scroll-target="#ec01">Extra Credit Opportunity #01: Relationship Diagram</a></li>
  <li><a href="#ec02" id="toc-ec02" class="nav-link" data-scroll-target="#ec02">Extra Credit Opportunity #02: Ring Visualizations</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/mini/mini02.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/mini/mini02.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">STA 9750 Mini-Project #02: How Do You Do ‘You Do You’?</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="due-dates" class="level3"><h3 class="anchored" data-anchor-id="due-dates">Due Dates</h3>
<ul>
<li>Released to Students: 2026-03-13</li>
<li><strong>Initial Submission: 2026-04-03 11:59pm ET on GitHub and Brightspace</strong></li>
<li>
<strong>Peer Feedback:</strong>
<ul>
<li>Peer Feedback Assigned: 2026-04-06 on GitHub</li>
<li><strong>Peer Feedback Due: 2026-04-12 11:59pm ET on GitHub</strong></li>
</ul>
</li>
</ul>
<p><em>Estimated Time to Complete: 13-15 Hours</em></p>
<p><em>Estimated Time for Peer Feedback: 1 Hour</em></p>
<hr></section><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Welcome to Mini-Project #02! In this mini-project, we will explore data from the <em>American Time Use Survey</em> (ATUS). ATUS is a joint effort of the US Bureau of Labor Statistics and the US Census Bureau, which attempts to characterize how Americans spend their time. Like most government data products, ATUS data is released in two forms:</p>
<ol type="1">
<li>
<em>Summary Data</em>: these are large-sample statistical aggregates that use advanced survey weighting methods to get the most accurate estimates from small data sizes. These are not statements about individuals, <em>per se</em>, but estimates about subpopulations of interest. (<em>E.g.</em>, middle aged men spend 5 hours a week on lawn care) These results are the highest-quality and most accurate estimates available, but-as a consumer-you can only get the answers the census bureau makes available to you.</li>
<li>
<em>Public Use Microdata</em>: these are ‘raw data’ from a representative subset of respondents. Because microdata are taken from a subset of the full survey data, they are less accurate (smaller samples, higher variance) but they allow analysts to ask their own questions of the data.</li>
</ol>
<p>In this mini-project, we will explore ATUS microdata from the past 20 years. You will see how other Americans spend their time and compare your findings with your own time usage patterns. Your will use your findings to estimate the total amount of unpaid labor in the US.</p>
<p>In this mini-project, you will:</p>
<ol type="1">
<li>Practice use of <code>dplyr</code> for combining and manipulating data from distinct sources</li>
<li>Practice use of <code>ggplot2</code> to create compelling statistical visualizations. Note that this assignment only requires “basic” <code>ggplot2</code> visualizations like scatterplots or line graphs; <a href="../mini/mini03.html">Mini-Project #03</a> will require more complex visualization.</li>
<li>Practice summarizing complex analytical pipelines for non-technical audiences.</li>
</ol>
<p>As with <a href="../mini/mini01.html">Mini-Project #01</a>, a major portion of your grade is based on the <em>communication and writing</em> elements of this mini-project, so make sure to budget sufficient time for the writing process. Code without context has little practical value - you are always writing and conveying your analysis to a specific target audience.</p>
<section id="student-responsibilities" class="level3"><h3 class="anchored" data-anchor-id="student-responsibilities">Student Responsibilities</h3>
<p>Recall our basic analytic workflow and table of student responsibilities:</p>
<ul>
<li>Data Ingest and Cleaning: Given a data source, read it into <code>R</code> and transform it to a reasonably useful and standardized (‘tidy’) format.</li>
<li>Data Combination and Alignment: Combine multiple data sources to enable insights not possible from a single source.</li>
<li>Descriptive Statistical Analysis: Take a data table and compute informative summary statistics from both the entire population and relevant subgroups</li>
<li>Data Visualization: Generate insightful data visualizations to spur insights not attainable from point statistics</li>
<li>Inferential Statistical Analysis and Modeling: Develop relevant predictive models and statistical analyses to generate insights about the <em>underlying population</em> and not simply the data at hand.</li>
</ul>
<p>In this course, our primary focus is on the first four stages: you will take other courses that develop analytical and modeling techniques for a variety of data types. As we progress through the course, you will eventually be responsible for the first four steps. Specifically, you are responsible for the following stages of each mini-project:</p>
<table class="table-hover caption-top table">
<caption>Students’ Responsibilities in Mini-Project Analyses</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 22%">
<col style="width: 27%">
<col style="width: 12%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">Ingest and Cleaning</th>
<th style="text-align: center;">Combination and Alignment</th>
<th style="text-align: center;">Descriptive Statistical Analysis</th>
<th style="text-align: center;">Visualization</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #01</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #02</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #03</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #04</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
</tbody>
</table>
<p>In this mini-project, you are mainly responsible for data alignment and basic statistical analyses. While not the main focus of this mini-project, you are also expected to provide basic data visualizations to support your findings; the grading rubric, below, emphasizes the <code>dplyr</code> tools used in this project, but reports without any visualization will be penalized severely. Note that data visualization will play a larger role in Mini-Project #03.</p>
<p>As before, I will provide code to automatically download and read in the data used for this project. Also note that, as compared with Mini-Project #01, I am providing less ‘scaffolding’ for tabular display and EDA: students are more responsible for directing their own analyses.</p>
</section><section id="rubric" class="level3"><h3 class="anchored" data-anchor-id="rubric">Rubric</h3>
<p>STA 9750 Mini-Projects are evaluated using <em>peer grading</em> with <em>meta-review</em> by the course staff. The following basic rubric will be used for all mini-projects:</p>
<table id="mp_rubric" class="table-hover caption-top table" width="1,1,1,1,1,1">
<thead><tr class="header">
<th style="text-align: center;">Course Element</th>
<th style="text-align: left;">Excellent (9-10)</th>
<th style="text-align: left;">Great (7-8)</th>
<th style="text-align: left;">Good (5-6)</th>
<th style="text-align: left;">Adequate (3-4)</th>
<th style="text-align: left;">Needs Improvement (1-2)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Written Communication</td>
<td style="text-align: left;">Report is very well-written and flows naturally. Motivation for key steps is clearly explained to reader without excessive detail. Key findings are highlighted and appropriately given sufficient context, including reference to related work where appropriate.</td>
<td style="text-align: left;">Report has no grammatical or writing issues.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Writing is accessible and flows naturally. Key findings are highlighted and clearly explained, but lack suitable motivation and context.</td>
<td style="text-align: left;">Report has no grammatical or writing issues. Key findings are present but insufficiently highlighted or unclearly explained.</td>
<td style="text-align: left;">Writing is intelligible, but has some grammatical errors. Key findings are difficult to discern.</td>
<td style="text-align: left;">Report exhibits significant weakness in written communication. Key points are nearly impossible to identify.</td>
</tr>
<tr class="even">
<td style="text-align: center;">Project Skeleton</td>
<td style="text-align: left;">Code completes all instructor-provided tasks correctly. Responses to open-ended tasks are <strong>especially</strong> insightful and creative.</td>
<td style="text-align: left;">Code completes all instructor-provided tasks satisfactorily. Responses to open-ended tasks are insightful, creative, and do not have any minor flaws.</td>
<td style="text-align: left;">Response to one instructor provided task is skipped, incorrect, or otherwise incomplete. Responses to open-ended tasks are solid and without serious flaws.</td>
<td style="text-align: left;">Responses to two instructor provided tasks are skipped, incorrect, or otherwise incomplete. Responses to open-ended tasks are acceptable, but have at least one serious flaw.</td>
<td style="text-align: left;">Response to three or more instructor provided tasks are skipped, incorrect, or otherwise incomplete. Responses to open-ended tasks are seriously lacking.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Tables &amp; Document Presentation</td>
<td style="text-align: left;">Tables go beyond standard publication-quality formatting, using advanced features like color formatting, interactivity, or embedded visualization.</td>
<td style="text-align: left;">Tables are well-formatted, with publication-quality selection of data to present, formatting of table contents (<em>e.g.</em>, significant figures) and column names.</td>
<td style="text-align: left;">Tables are well-formatted, but still have room for improvement in one of these categories: subsetting and selection of data to present, formatting of table contents (<em>e.g.</em>, significant figures), column names.</td>
<td style="text-align: left;">Tables lack significant ‘polish’ and need improvement in substance (filtering and down-selecting of presented data) or style. Document is difficult to read due to distracting formatting choices.</td>
<td style="text-align: left;">Unfiltered ‘data dump’ instead of curated table. Document is illegible at points.</td>
</tr>
<tr class="even">
<td style="text-align: center;">Data Visualization</td>
<td style="text-align: left;">Figures go beyond standard publication-quality formatting, using advanced features like animation, interactivity, or advanced plot types implemented in <code>ggplot2</code> extension packages.</td>
<td style="text-align: left;">Figures are ‘publication-quality,’ with suitable axis labels, well-chosen structure, attractive color schemes, titles, subtitles, and captions, <em>etc.</em>
</td>
<td style="text-align: left;">Figures are above ‘exploratory-quality’ and reflect a moderate degree of polish, but do not reach full ‘publication-quality’ in one-to-two ways.</td>
<td style="text-align: left;">Figures are above ‘exploratory-quality’ and reflect a moderate degree of polish, but do not reach full ‘publication-quality’ in three or more distinct ways.</td>
<td style="text-align: left;">Figures are suitable to support claims made, but are ‘exploratory-quality,’ reflecting zero-to-minimal effort to customize and ‘polish’ beyond <code>ggplot2</code> defaults.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Exploratory Data Analysis</td>
<td style="text-align: left;">Deep and ‘story-telling’ EDA identifying non-obvious patterns that are then used to drive further analysis in support of the project. All patterns and irregularities are noted and well characterized, demonstrating mastery and deep understanding of all data sets used.</td>
<td style="text-align: left;">Meaningful ‘story-telling’ EDA identifying non-obvious patterns in the data. Major and pinor patterns and irregularities are noted and well characterized at a level sufficient to achieve the goals of the analysis. EDA demonstrates clear understanding of all data sets used.</td>
<td style="text-align: left;">Extensive EDA that thoroughly explores the data, but lacks narrative and does not deliver a meaningful ‘story’ to the reader. Obvious patterns or irregularities noted and well characterized, but more subtle structure may be overlooked or not fully discussed. EDA demonstrates competence and basic understanding of the data sets used.</td>
<td style="text-align: left;">Solid EDA that identifies major structure to the data, but does not fully explore all relevant structure. Obvious patterns or irregularities ignored or missed. EDA demonstrates familiarity with high-level structure of the data sets used.</td>
<td style="text-align: left;">Minimal EDA, covering only standard summary statistics, and providing limited insight into data patterns or irregularities. EDA fails to demonstrate familiarity with even the most basic properties of the data sets being analyzed.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Code Quality</p></td>
<td style="text-align: left;">
<p>Code is (near) flawless. Intent is clear throughout and all code is efficient, clear, and fully idiomatic.</p>
<p>Code passes all <code>styler</code> and <code>lintr</code> type analyses without issue.</p>
</td>
<td style="text-align: left;"><p>Comments give context and structure of the analysis, not simply defining functions used in a particular line. Intent is clear throughout, but code can be minorly improved in certain sections.</p></td>
<td style="text-align: left;"><p>Code has well-chosen variable names and basic comments. Intent is generally clear, though some sections may be messy and code may have serious clarity or efficiency issues.</p></td>
<td style="text-align: left;"><p>Code executes properly, but is difficult to read. Intent is generally clear and code is messy or inefficient.</p></td>
<td style="text-align: left;"><p>Code fails to execute properly.</p></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Data Preparation</td>
<td style="text-align: left;">Data import is fully-automated and efficient, taking care to only download from web-sources if not available locally. All data cleaning steps are fully-automated and robustly implemented, yielding a clean data set that can be widely used.</td>
<td style="text-align: left;">Data is imported and prepared effectively, in an automated fashion with minimal hard-coding of URLs and file paths. Data cleaning is fully-automated and sufficient to address all issues relevant to the analysis at plan.</td>
<td style="text-align: left;">Data is imported and prepared effectively, though source and destination file names are hard-coded. Data cleaning is rather manual and hard-codes most transformations.</td>
<td style="text-align: left;">Data is imported in a manner likely to have errors. Data cleaning is insufficient and fails to address clear problems.</td>
<td style="text-align: left;">Data is hard-coded and not imported from an external source.</td>
</tr>
<tr class="even">
<td style="text-align: center;">Analysis and Findings</td>
<td style="text-align: left;">Analysis demonstrates uncommon insight and quality, providing unexpected and subtle insights.</td>
<td style="text-align: left;">Analysis is clear and convincing, leaving essentially no doubts about correctness.</td>
<td style="text-align: left;">Analysis clearly appears to be correct and passes the “sniff test” for all findings, but a detailed review notes some questions remain unanswered.</td>
<td style="text-align: left;">Analysis is not clearly flawed at any point and is likely to be within the right order of magnitude for all findings.</td>
<td style="text-align: left;">Analysis is clearly incorrect in at least one major finding, reporting clearly implausible results that are likely off by an order of magnitude or more.</td>
</tr>
</tbody>
</table>
<p>Note that the “Excellent” category for most elements applies only to truly exceptional “above-and-beyond” work. Most student submissions will likely fall in the “Good” to “Great” range.</p>
<p>At this point, you are responsible for (elementary) data visualization and will be graded on that aspect of the rubric, as well as the sections on which you were assessed in <a href="../mini/mini01.html">the previous mini-project</a>.</p>
<p>Note that, because I am still providing code to download the data, load it into <code>R</code>, and prepare it for analysis, all reports submitted using my code will receive an automatic 10/10 for the ‘Data Preparation’ element of the rubric. Additionally, reports completing all tasks described under <a href="#eda">Data Integration and Exploration</a> below should receive a 10/10 for the ‘Exploratory Data Analysis’ rubric element.</p>
<p>Taken together, you are only really responsible for these portions of the rubric in this assignment:</p>
<ul>
<li>Written Communication</li>
<li>Project Skeleton</li>
<li>Tables &amp; Document Presentation</li>
<li>Data Visualization</li>
<li>Code Quality</li>
<li>Analysis and Findings</li>
</ul>
<p>Reports completing all key steps outlined below essentially start with 20 free points.</p>
<p>For this mini-project, no more than <strong>6</strong> total points of extra credit can be be awarded. Opportunities for extra credit exist for students who go <em>above and beyond</em> the instructor-provided scaffolding. Specific opportunities for extra credit can be <a href="#extra_credit">found below</a>.</p>
<p>Students pursuing careers in data analytics are strongly encouraged to go beyond the strict ambit of the mini-projects to</p>
<ol type="i">
<li>further refine their skills;</li>
<li>learn additional techniques that can be used in the final course project; and</li>
<li>develop a more impressive professional portfolio.</li>
</ol>
<p>Because students are encouraged to use STA 9750 mini-projects as the basis for a professional portfolio, the basic skeleton of each project will be released under a fairly permissive usage license. Take advantage of it!</p>
</section><section id="submission-instructions" class="level3"><h3 class="anchored" data-anchor-id="submission-instructions">Submission Instructions</h3>
<p>After completing the analysis, write up your findings, <em>showing all of your code</em>, using a dynamic <code>quarto</code> document and post it to your course repository. The <code>qmd</code> file should be named <code>mp02.qmd</code> (lower case!) so the rendered document can be found at <code>docs/mp02.html</code> in the student’s repository and will be served at the URL:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<blockquote class="blockquote">
<p><code>https://YOUR_GITHUB_ID.github.io/STA9750-2026-SPRING/mp02.html</code></p>
</blockquote>
<p>You can use the helper function <code>mp_start</code> available at in the <a href="../tips.html#mp_start">Course Helper Functions</a> to create a file with the appropriate name and some meta-data already included. Do so by running the following command at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_start(N=02)</code></p>
</blockquote>
<p>After completing this mini-project, upload your rendered output and necessary ancillary files to GitHub to make sure your site works. The <code>mp_submission_ready</code> function in the <a href="../tips.html#mp_submission_ready">Course Helper Functions</a> can perform some of these checks automatically. You can run this function by running the following commands at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_submission_ready(N=02)</code></p>
</blockquote>
<p>Once you confirm this website works (substituting <code>YOUR_GITHUB_ID</code> for the actual GitHub username provided to the professor in <a href="./mini00.html">MP#00</a> of course), open a GitHub issue on the instructor’s repository to submit your completed work.</p>
<p>The easiest way to do so is by use of the <code>mp_submission_create</code> function in the <a href="../tips.html#mp_submission_create">Course Helper Functions</a>, which can be used by running the following command at the <code>R</code> <code>Console</code>:</p>
<blockquote class="blockquote">
<p><code>source("https://michael-weylandt.com/STA9750/load_helpers.R"); mp_submission_create(N=02)</code></p>
</blockquote>
<p>Alternatively, if you wish to submit manually, open a new issue at</p>
<blockquote class="blockquote">
<p><code>https://github.com/michaelweylandt/STA9750-2026-SPRING/issues/new</code> .</p>
</blockquote>
<p>Title the issue <code>STA 9750 YOUR_GITHUB_ID MiniProject #02</code> and fill in the following text for the issue:</p>
<div id="submission-text">
<pre><code>Hi @michaelweylandt!

I've uploaded my work for MiniProject #**02** - check it out!

&lt;https://&lt;GITHUB_ID&gt;.github.io/STA9750-2026-SPRING/mp02.html&gt;</code></pre>
</div>
<p>At various points before and after the submission deadline, the instructor will run some automated checks to ensure your submission has all necessary components. Please respond to any issues raised in a timely fashion as failing to address them may lead to a lower set of scores when graded.</p>
<p><em>Additionally</em>, a PDF export of this report should be submitted on Brightspace. To create a PDF from the uploaded report, simply use your browser’s ‘Print to PDF’ functionality.</p>
<p><strong>NB</strong>: The analysis outline below specifies key <em>tasks</em> you need to perform within your write up. Your peer evaluators will check that you complete these. You are encouraged to do extra analysis, but the bolded <strong>Tasks</strong> are <em>mandatory</em>.</p>
<p><strong>NB</strong>: Your final submission should look like a <em>report</em>, not simply a list of facts answering questions. Add introductions, conclusions, and your own commentary. You should be practicing both raw <em>coding</em> skills and written <em>communication</em> in all mini-projects. There is little value in data points stated without context or motivation.</p>
</section></section><section id="mini-project" class="level2"><h2 class="anchored" data-anchor-id="mini-project">Mini-Project #02: How Do You Do ‘You Do You’?</h2>
<section id="data-acquisition" class="level3"><h3 class="anchored" data-anchor-id="data-acquisition">Data Acquisition</h3>
<p>For this project, we will use the <em>2003-2024</em> aggregate microdata files, published at <a href="https://www.bls.gov/tus/data/datafiles-0324.htm" class="uri">https://www.bls.gov/tus/data/datafiles-0324.htm</a>. These combine data in a standard format from the past 21 years of ATUS.</p>
<p>We will use the following tables:</p>
<ul>
<li>The <a href="https://www.bls.gov/tus/datafiles/atusact-0324.zip">ATUS Activity Data File</a> which contains (self-reported) time spent on various activities from over 250,000 Americans over a 20 year period.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>
</li>
<li>The <a href="https://www.bls.gov/tus/datafiles/atusresp-0324.zip">ATUS Respondent File</a> which contains demographic information for the survey respondents.</li>
<li>The <a href="https://www.bls.gov/tus/datafiles/atusrost-0324.zip">ATUS Roster File</a> which includes additional demographic information on who was present for various activities. <em>E.g.</em>, if a mother of two responded to ATUS, the respondent file will contain her demographics, while the roster file will also contain information on the age of her children if they were present for any activities she performed during the reporting period. This is probably the least important file and you might not use it often, but I’m making it available if you want it.</li>
<li>An <a href="./atus_activity_codes.csv">instructor-provided CSV</a> that can be used to map ATUS activity codes to actual activities.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>
</li>
</ul>
<p>The following code snippets will download the relevant files into a <code>data/mp02</code> directory in your <code>STA9750-2026-SPRING</code> folder for use:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://glue.tidyverse.org/">glue</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://httr2.r-lib.org">httr2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">load_atus_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">file_base</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"resp"</span>, <span class="st">"rost"</span>, <span class="st">"act"</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"mp02"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"mp02"</span><span class="op">)</span>, showWarnings<span class="op">=</span><span class="cn">FALSE</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    </span>
<span>    <span class="va">file_base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.arg.html">match.arg</a></span><span class="op">(</span><span class="va">file_base</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">file_name_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, </span>
<span>                               <span class="st">"mp02"</span>, </span>
<span>                               <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"atus{file_base}_0324.dat"</span><span class="op">)</span><span class="op">)</span></span>
<span>        </span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="va">file_name_out</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>        </span>
<span>        <span class="va">url_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"atus{file_base}-0324.zip"</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="va">temp_zip</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span>fileext<span class="op">=</span><span class="st">".zip"</span><span class="op">)</span></span>
<span>        <span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/fileutils.html">file_path_sans_ext</a></span><span class="op">(</span><span class="va">temp_zip</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="fu"><a href="https://httr2.r-lib.org/reference/request.html">request</a></span><span class="op">(</span><span class="st">"https://www.bls.gov"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://httr2.r-lib.org/reference/req_url.html">req_url_path</a></span><span class="op">(</span><span class="st">"tus"</span>, <span class="st">"datafiles"</span>, <span class="va">url_end</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://httr2.r-lib.org/reference/req_headers.html">req_headers</a></span><span class="op">(</span>`User-Agent` <span class="op">=</span> <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://httr2.r-lib.org/reference/req_perform.html">req_perform</a></span><span class="op">(</span><span class="va">temp_zip</span><span class="op">)</span></span>
<span>    </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span><span class="op">(</span><span class="va">temp_zip</span>, exdir <span class="op">=</span> <span class="va">temp_dir</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="va">temp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html">basename</a></span><span class="op">(</span><span class="va">file_name_out</span><span class="op">)</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span><span class="op">(</span><span class="va">temp_file</span>, <span class="va">file_name_out</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    </span>
<span>    <span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">file_name_out</span>, </span>
<span>                     show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">file_base</span>, </span>
<span>           resp<span class="op">=</span><span class="va">file</span> <span class="op">|&gt;</span> </span>
<span>                  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>survey_weight <span class="op">=</span> <span class="va">TUFNWGTP</span>, </span>
<span>                         time_alone <span class="op">=</span> <span class="va">TRTALONE</span>, </span>
<span>                         survey_year <span class="op">=</span> <span class="va">TUYEAR</span><span class="op">)</span>,</span>
<span>           rost<span class="op">=</span><span class="va">file</span> <span class="op">|&gt;</span></span>
<span>                  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_match.html">case_match</a></span><span class="op">(</span><span class="va">TESEX</span>, <span class="fl">1</span> <span class="op">~</span> <span class="st">"M"</span>, <span class="fl">2</span> <span class="op">~</span> <span class="st">"F"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>           act <span class="op">=</span><span class="va">file</span> <span class="op">|&gt;</span></span>
<span>                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>activity_n_of_day <span class="op">=</span> <span class="va">TUACTIVITY_N</span>, </span>
<span>                       time_spent_min <span class="op">=</span> <span class="va">TUACTDUR24</span>, </span>
<span>                       start_time <span class="op">=</span> <span class="va">TUSTARTTIM</span>,</span>
<span>                       stop_time <span class="op">=</span> <span class="va">TUSTOPTIME</span>, </span>
<span>                       level1_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">TRTIER1P</span>, <span class="st">"0000"</span><span class="op">)</span>, </span>
<span>                       level2_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">TRTIER2P</span>, <span class="st">"00"</span><span class="op">)</span>,</span>
<span>                       level3_code <span class="op">=</span> <span class="va">TRCODEP</span><span class="op">)</span> </span>
<span>           <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>participant_id <span class="op">=</span> <span class="va">TUCASEID</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"[:lower:]"</span>, </span>
<span>                               ignore.case<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">load_atus_activities</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"mp02"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"mp02"</span><span class="op">)</span>, showWarnings<span class="op">=</span><span class="cn">FALSE</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    </span>
<span>    <span class="va">dest_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data"</span>,</span>
<span>                           <span class="st">"mp02"</span>,</span>
<span>                           <span class="st">"atus_activity_codes.csv"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="va">dest_file</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span><span class="st">"https://michael-weylandt.com/STA9750/mini/atus_activity_codes.csv"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    </span>
<span>    <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">dest_file</span>, show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 1: Data Acquisition">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 1: Data Acquisition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using the code above, acquire the relevant ATUS files. Copy the code into your Quarto document and make sure it runs successfully.</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="Do Not `git add` Data Files">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Do Not <code>git add</code> Data Files
</div>
</div>
<div class="callout-body-container callout-body">
<p>Make sure that <code>git</code> is set to ignore data files, such as the one created above. Check the <code>git</code> pane in <code>RStudio</code> and make sure that the files created in <code>data/mp02</code> do not appear. (If you set up your <code>.gitignore</code> file correctly in <a href="../mini/mini00.html">MP#00</a>, it should already be ignored.) If it is appearing, you may need to edit your <code>.gitignore</code> file.</p>
<p>Removing a large data file from <code>git</code> is possible, but difficult. Don’t get into a bad state!</p>
</div>
</div>
</section><section id="data-cleaning-and-preparation" class="level3"><h3 class="anchored" data-anchor-id="data-cleaning-and-preparation">Data Cleaning and Preparation</h3>
<p>Use the two functions above to create <em>four</em> data frames suitable for your analyses: three of these will be created using the <code>load_atus_data</code> function with different inputs and one with the <code>load_atus_activities</code> function.</p>
<p>After each data frame has been read into <code>R</code>, use the baseline type and distribution checks described <a href="../mini/mini01.html#exploratory-analysis">in the previous assignment</a> to confirm that you understand the types of all columns in the four tables and that they will be suitable for your analyses.</p>
<p>As part of this analysis, review the various tables and begin to map out how they fit together and will be used for your analysis; see <span id="ec01">below</span> for one possible way to visualize and explore data of this format.</p>
<p>Before proceeding, you will want to consider how you will want to join these data files together. In this case, there are sometimes <em>several</em> possible ways to join together a pair of tables. This mental checklist will help you maximize the probability that you’re using the correct join for your analysis.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<ol type="1">
<li><p>What two pieces of information am I looking to connect? <em>Answer(s)</em>: two columns from different tables. (If the columns are already in the same table, you don’t need a join.)</p></li>
<li><p>What is the common feature(s) I can use to join together these two tables? <em>Answer(s)</em>: one or more columns that have corresponding values in each table. It is not required for the columns to have the same name or the exact same set of values in both tables. (If there is not a natural pair of combining columns, you might need to introduce a third table to your analyis.)</p></li>
<li>
<p>Join type:</p>
<ol type="a">
<li>Do I want to <em>guarantee</em> use all of the rows from Table 1, filling in with missing values if no corresponding row is found in Table 2?</li>
<li>Do I want to <em>guarantee</em> use all of the rows from Table 2, filling in with missing values if no corresponding row is found in Table 1?</li>
</ol>
<p>If “yes/yes”, you probably want a <code>full_join</code>; if “yes/no”, you probably want a <code>left_join</code>; if “no/yes”, you probably want a <code>right_join</code>; if “no/no”, you probably want an <code>inner_join</code>.</p>
</li>
<li>
<p>Construct a potential join:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">JOIN_TYPE</span><span class="op">(</span><span class="va">TABLE_1_NAME</span>, </span>
<span>          <span class="va">TABLE_2_NAME</span>, </span>
<span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="va">TABLE_1_KEY_COLUMN</span> <span class="op">==</span> <span class="va">TABLE_2_KEY_COLUMN</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, replace all values with the answers from your questions above. (We are not considering non-equality joins here.)</p>
</li>
<li><p>Run your join and make sure you get no “many-to-many” or “many-to-one” warnings.</p></li>
<li><p>Embed your join into your full analysis</p></li>
</ol>
<p>For example, if we want to answer the question “Who played guitar in which bands?” using the <code>band_members</code> and <code>band_instruments</code> tables in the <code>dplyr</code> package, the join-design flowchart would go something like this:</p>
<ol type="1">
<li><p>I want to connect the <code>plays</code> column from <code>band_instruments</code> to the <code>band</code> column of <code>band_members</code>.</p></li>
<li><p>The common feature (“key”) connecting the <code>band_instruments</code> and <code>band_members</code> table is the <code>name</code> column, which has the same name and consistent values in both tables.</p></li>
<li>
<ol type="a">
<li>I am fine dropping rows from the <code>band_instruments</code> table if I am unable to determine what band someone was a part of.</li>
<li>I am fine dropping rows from the <code>band_members</code> table if I am unable to determine what instrument someone played.</li>
</ol>
<p>These suggest I want to use an <code>inner_join</code>.</p>
</li>
<li>
<p>My candidate join is:</p>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">band_members</span>, </span>
<span>           <span class="va">band_instruments</span>, </span>
<span>           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>::: {.cell-output .cell-output-stdout}</p>
<pre><code># A tibble: 2 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 John  Beatles guitar
2 Paul  Beatles bass  </code></pre>
<p>::: :::</p>
</li>
<li><p>This runs without any warnings or other danger signs, so I’m good to proceed.</p></li>
<li>
<p>I can use this join to find one guitarist in my data set with a known band:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">band_members</span>, </span>
<span>           <span class="va">band_instruments</span>, </span>
<span>           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">plays</span> <span class="op">==</span> <span class="st">"guitar"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 John  Beatles guitar</code></pre>
</div>
</div>
<p>so the one row in our result is John (Lennon) playing guitar in the Beatles. Sadly, our datasets were incomplete and we lost track of <a href="https://en.wikipedia.org/wiki/Keith_Richards">Keith Richards</a>, guitarist in the Rolling Stones.</p>
</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 2: Practice Joining Data Files">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 2: Practice Joining Data Files
</div>
</div>
<div class="callout-body-container callout-body">
<p>Work through the join-design flowchart for the following questions based on the ATUS data:</p>
<ol type="1">
<li>
<p>How many total hours were recorded on sleeping-type activities?</p>
<p><em>Hint</em>: Make sure you identify the correct “level” of task precision to construct your join.</p>
</li>
<li><p>How many female participants reported spending no time alone in 2003?</p></li>
</ol>
<p><em>Note</em>: You do not need to actually include your answers to these questions in your submission. You will demonstrate knowledge of proper joining strategies in the EDA questions and your final deliverable.</p>
</div>
</div>
<p>When dealing with complex datasets, it is important to be able to interpret and make use of the documentation to interpret complex data representations. For surveys like ATUS, where the respondent gives an interview, the survey administrator will “code” the qualitative responses into quantitative values: <em>e.g.</em>, after asking the respondent their gender, which can elicit a wide range of responses (“male”, “man”, “guy”, <em>etc.</em>), the response will be encoded as a simple <code>1</code> or <code>2</code> using pre-defined rules. This simplified representation is easier to work with than free-text responses. When working with data in <code>R</code>, it is typically easier to use a (standardized) set of string values (<em>e.g.</em>, “male” and “female” or “man” and “woman”), rather than an uninterpretable numeric value.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 3: Adding Additional Demographic Variables">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 3: Adding Additional Demographic Variables
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will need to add a few more demographic variables to the data frames generated by <code>load_atus_data</code> to complete your analysis. Specifically, modify <code>load_atus_data</code> to additionally report the following information:</p>
<ol type="1">
<li><p>How many children under the age of 18 live in the respondent’s home?</p></li>
<li><p>Is the respondent married?</p></li>
<li><p>What is the respondent’s employment status (employed, unemployed, retired, <em>etc.</em>)?</p></li>
<li><p>Location of activity</p></li>
<li>
<p>Is the respondent enrolled in a college or university (not high school)?</p>
<p><em>Hint</em>: This will require use of at least two ATUS variables which will need to be combined using Boolean operators.</p>
</li>
</ol>
<p>Use the <a href="https://www.bls.gov/tus/dictionaries/atusintcodebk0324.pdf">ATUS Data Dictionary</a> to identify appropriate variables and to determine a suitable mapping from numeric codes to interpretable values, <em>e.g.</em>, recoding the <code>TESEX</code> variable from 1/2 to “M”/“F”. You will want to use the <code>case_match</code> function to implement these transformations.</p>
<p>Note that some of these variables are present in multiple files and can be incorporated in the data set in multiple ways.</p>
<p><em>Note</em>: You do not need to have a copy of “my” <code>load_atus_data</code> and your modified <code>load_atus_data</code> function. Just include the final version in your submission.</p>
</div>
</div>
</section><section id="eda" class="level3"><h3 class="anchored" data-anchor-id="eda">Data Integration and Initial Exploration</h3>
<section id="survey-weighting" class="level4"><h4 class="anchored" data-anchor-id="survey-weighting">Survey Weighting</h4>
<p>When working with microdata, you rarely want to use ‘raw’ averages from the sampled subjects to estimate population averages. Because survey respondent distributions rarely match the actual population distributions (<em>e.g.</em>, because younger people are less likely to respond to phone polls than senior citizens), <em>weighted</em> averages are used to adjust the sample to match the demographics of the population.</p>
<p>For example, if a survey has 100 men and 200 women reply, but we want to make an inference about the US population as a whole (50% male and 50% female), we will want to upweight the men vs the women so we have “in effect” 200 men and 200 women, matching the 50/50 split of the population. In particular, we would use code like:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span>, times<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span>, </span>
<span>           income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">300</span>, mean<span class="op">=</span><span class="fl">50000</span>, sd<span class="op">=</span><span class="fl">10000</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html">weighted.mean</a></span><span class="op">(</span><span class="va">income</span>, </span>
<span>                                         w<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">gender</span><span class="op">==</span><span class="st">"M"</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  avg_income
1   49848.21</code></pre>
</div>
</div>
<p>This is not too hard to do with a single simple feature like gender, but these<br>
calculations can become quite complex when trying to match on a variety of demographic attributes (income bracket, gender, race, age, state, urban/rural, education level, <em>etc.</em>). Thankfully, the Census Bureau provides us with a set of pre-computed weights that we can use. These are used to adjust ATUS to broader estimates of US demographics like the decadal census and the Current Population Survey (CPS).</p>
<p>These are represented by the <code>TUFNWGTP</code> variable, which I have renamed as <code>survey_weight</code>. If we want to know how much time the average American spent alone every year, we might do something like:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">load_atus_data</span><span class="op">(</span><span class="st">"resp"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_time_alone <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html">weighted.mean</a></span><span class="op">(</span><span class="va">time_alone</span>, <span class="va">survey_weight</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>where we would find that the average American spent about 5 hours (298 minutes) alone per day over the previous two decades. If we want to break this out further by year, we might do something like:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">load_atus_data</span><span class="op">(</span><span class="st">"resp"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">survey_year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>avg_time_alone <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html">weighted.mean</a></span><span class="op">(</span><span class="va">time_alone</span>, <span class="va">survey_weight</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>point_color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">survey_year</span> <span class="op">==</span> <span class="fl">2020</span>, <span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">survey_year</span>, </span>
<span>               y<span class="op">=</span><span class="va">avg_time_alone</span>, </span>
<span>               color<span class="op">=</span><span class="va">point_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"ATUS Survey Year"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Average Time Spent Alone [Minutes]"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>sec.axis<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/sec_axis.html">sec_axis</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.</span> <span class="op">/</span> <span class="fl">60</span>, </span>
<span>                                             name<span class="op">=</span><span class="st">"Average Time Spent Alone [Hours]"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_color_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"ATUS Population-Weighted Estimates of Average Time Spent Alone"</span>, </span>
<span>                <span class="st">"2020 Estimates (Red) are Unreliable"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Estimates Created Using 2003-2024 Public Use Microdata Samples"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="mini02_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We see here an increasing trend in time spent alone, with the post-2020 period leading to significant increases in time spent alone, perhaps indicative of broader trends of social isolation.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p>Note that we can use the same weighting variable here and, because the Census Bureau has done the hard work of developing survey weights for us, the switch from whole-sample to per-year weights does not require adjustments to our code beyond the obvious <code>group_by</code>.</p>
<p>Appendix J of the <a href="https://www.bls.gov/tus/atususersguide.pdf">ATUS User’s Guide</a> gives some more worked examples of how these weights can be used, but note that some of the variable names might differ from what we find in the combined year file. The <a href="https://www.bls.gov/tus/dictionaries/atusintcodebk0324.pdf">2003-2024 ATUS Codebook</a> is your best reference for the data used in this analysis.</p>
</section><section id="exploratory-questions" class="level4"><h4 class="anchored" data-anchor-id="exploratory-questions">Exploratory Questions</h4>
<p>As in <a href="../mini/mini01.html">the previous mini-project</a>, we are going to structure our EDA around several sets of exploratory questions. This time, I am providing <strong>three</strong> sets of questions to be answered in different formats: inline values, tables, plots.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 4: Exploratory Questions - Inline Values">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 4: Exploratory Questions - Inline Values
</div>
</div>
<div class="callout-body-container callout-body">
<p>Answer the following questions: report your answers using Quarto’s <a href="https://quarto.org/docs/computations/inline-code.html">inline code</a> functionality to place the values in a sentence; that is, you should answer in complete sentences, written as normal text with inline code for computed values.</p>
<ol type="1">
<li><p>How many different respondents have answered an ATUS survey since 2003?</p></li>
<li><p>Americans enjoy watching a variety of sports. How many different sports does ATUS ask about watching as a “Level 3” task?</p></li>
<li>
<p>Approximately what percent of Americans are retired?</p>
<p><em>Hint</em>: You will first want to create a new variable for retirement status; after creating this variable, use a weighted version of the “mean of Boolean” trick to answer this question.</p>
</li>
<li><p>On average, how many hours do Americans sleep per night?</p></li>
<li><p>On average, how many hours do Americans with one or more children in the home spend taking care of their children (all activities including healthcare and involvement in their children’s education)?</p></li>
</ol>
<p>See the <a href="../mini/mini01.html#eda">previous mini-project</a> for advice on formatting your responses.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 5: Exploratory Questions - Table Answers">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 5: Exploratory Questions - Table Answers
</div>
</div>
<div class="callout-body-container callout-body">
<p>Answer the following questions: each of these questions can be answered with a table of just a few rows. Use the <code>gt</code> package, introduced in the previous MP, or a similar package to to present your results in an attractive ‘publication-quality’ format, not just a “raw” <code>R</code> output.</p>
<ol type="1">
<li><p>Do retired persons spend more time on lawn-care than people who have full-time employment?</p></li>
<li><p>How does the amount of time spent on social and recreational activities typically compare for married and unmarried people?</p></li>
<li>
<p>Where do high-earning Americans spend the majority of their time?</p>
<p>You may define “high-earning” however you see fit.</p>
</li>
<li><p>What are the most common activities reported by Americans when on a bus, train, subway, boat, or ferry?</p></li>
<li>
<p>How much time per day do Americans spend on <em>your four favorite activities</em> and how does this vary by age group?</p>
<p><em>Hint</em>: The <code>cut</code> function can be used to ‘bin’ a continuous variable. This is useful when trying to break a continuous variable into ‘buckets’ for display in a table. <em>E.g.</em>,</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com">gt</a></span><span class="op">)</span></span>
<span><span class="va">penguins</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>body_mass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">body_mass</span><span class="op">/</span><span class="fl">1000</span>, breaks<span class="op">=</span><span class="fl">6</span>, dig.lab<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">body_mass</span>, .drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from<span class="op">=</span><span class="va">body_mass</span>, </span>
<span>                values_from<span class="op">=</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html">cols_label</a></span><span class="op">(</span>species<span class="op">=</span><span class="st">"Species 🐧"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://gt.rstudio.com/reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span>columns<span class="op">=</span><span class="fl">2</span><span class="op">:</span><span class="fl">7</span>, </span>
<span>                <span class="st">"Body Mass (kg)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Distribution of Penguin Body Mass by Species"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://gt.rstudio.com/reference/tab_source_note.html">tab_source_note</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html">md</a></span><span class="op">(</span></span>
<span>      <span class="st">"Data originally published in by K.B. Gorman, T.D. Williams, and </span></span>
<span><span class="st">      W. R. Fraser in 'Ecological Sexual Dimorphism and Environmental </span></span>
<span><span class="st">      Variability within a Community of Antarctic Penguins (Genus </span></span>
<span><span class="st">      *Pyogscelis*). *PLoS One* 9(3): e90081.</span></span>
<span><span class="st">      &lt;https://doi.org/10.1371/journal.pone.0090081&gt;. Later popularized via </span></span>
<span><span class="st">      the `R` package [`palmerpenguins`](https://allisonhorst.github.io/palmerpenguins/)"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="rtymdkqjwk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rtymdkqjwk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rtymdkqjwk thead, #rtymdkqjwk tbody, #rtymdkqjwk tfoot, #rtymdkqjwk tr, #rtymdkqjwk td, #rtymdkqjwk th {
  border-style: none;
}

#rtymdkqjwk p {
  margin: 0;
  padding: 0;
}

#rtymdkqjwk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rtymdkqjwk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rtymdkqjwk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rtymdkqjwk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rtymdkqjwk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rtymdkqjwk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtymdkqjwk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rtymdkqjwk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rtymdkqjwk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rtymdkqjwk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rtymdkqjwk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rtymdkqjwk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rtymdkqjwk .gt_spanner_row {
  border-bottom-style: hidden;
}

#rtymdkqjwk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rtymdkqjwk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rtymdkqjwk .gt_from_md > :first-child {
  margin-top: 0;
}

#rtymdkqjwk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rtymdkqjwk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rtymdkqjwk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rtymdkqjwk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rtymdkqjwk .gt_row_group_first td {
  border-top-width: 2px;
}

#rtymdkqjwk .gt_row_group_first th {
  border-top-width: 2px;
}

#rtymdkqjwk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtymdkqjwk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rtymdkqjwk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rtymdkqjwk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtymdkqjwk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtymdkqjwk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rtymdkqjwk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rtymdkqjwk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rtymdkqjwk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtymdkqjwk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rtymdkqjwk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtymdkqjwk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rtymdkqjwk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtymdkqjwk .gt_left {
  text-align: left;
}

#rtymdkqjwk .gt_center {
  text-align: center;
}

#rtymdkqjwk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rtymdkqjwk .gt_font_normal {
  font-weight: normal;
}

#rtymdkqjwk .gt_font_bold {
  font-weight: bold;
}

#rtymdkqjwk .gt_font_italic {
  font-style: italic;
}

#rtymdkqjwk .gt_super {
  font-size: 65%;
}

#rtymdkqjwk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rtymdkqjwk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rtymdkqjwk .gt_indent_1 {
  text-indent: 5px;
}

#rtymdkqjwk .gt_indent_2 {
  text-indent: 10px;
}

#rtymdkqjwk .gt_indent_3 {
  text-indent: 15px;
}

#rtymdkqjwk .gt_indent_4 {
  text-indent: 20px;
}

#rtymdkqjwk .gt_indent_5 {
  text-indent: 25px;
}

#rtymdkqjwk .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rtymdkqjwk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="7" class="gt_heading gt_title gt_font_normal gt_bottom_border">Distribution of Penguin Body Mass by Species</th>
</tr>
<tr class="gt_col_headings gt_spanner_row even">
<th rowspan="2" id="species" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Species 🐧</th>
<th colspan="6" id="Body Mass (kg)" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><div class="gt_column_spanner">
Body Mass (kg)
</div></th>
</tr>
<tr class="gt_col_headings header">
<th id="a(2.7,3.3]" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">(2.7,3.3]</th>
<th id="a(3.3,3.9]" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">(3.3,3.9]</th>
<th id="a(3.9,4.5]" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">(3.9,4.5]</th>
<th id="a(4.5,5.1]" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">(4.5,5.1]</th>
<th id="a(5.1,5.7]" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">(5.1,5.7]</th>
<th id="a(5.7,6.3]" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">(5.7,6.3]</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="species">Adelie</td>
<td class="gt_row gt_right" headers="(2.7,3.3]">32</td>
<td class="gt_row gt_right" headers="(3.3,3.9]">74</td>
<td class="gt_row gt_right" headers="(3.9,4.5]">38</td>
<td class="gt_row gt_right" headers="(4.5,5.1]">7</td>
<td class="gt_row gt_right" headers="(5.1,5.7]">0</td>
<td class="gt_row gt_right" headers="(5.7,6.3]">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="species">Chinstrap</td>
<td class="gt_row gt_right" headers="(2.7,3.3]">8</td>
<td class="gt_row gt_right" headers="(3.3,3.9]">40</td>
<td class="gt_row gt_right" headers="(3.9,4.5]">18</td>
<td class="gt_row gt_right" headers="(4.5,5.1]">2</td>
<td class="gt_row gt_right" headers="(5.1,5.7]">0</td>
<td class="gt_row gt_right" headers="(5.7,6.3]">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="species">Gentoo</td>
<td class="gt_row gt_right" headers="(2.7,3.3]">0</td>
<td class="gt_row gt_right" headers="(3.3,3.9]">0</td>
<td class="gt_row gt_right" headers="(3.9,4.5]">17</td>
<td class="gt_row gt_right" headers="(4.5,5.1]">51</td>
<td class="gt_row gt_right" headers="(5.1,5.7]">43</td>
<td class="gt_row gt_right" headers="(5.7,6.3]">12</td>
</tr>
</tbody>
<tfoot><tr class="gt_sourcenotes odd">
<td colspan="7" class="gt_sourcenote">Data originally published in by K.B. Gorman, T.D. Williams, and W. R. Fraser in ’Ecological Sexual Dimorphism and Environmental Variability within a Community of Antarctic Penguins (Genus <em>Pyogscelis</em>). <em>PLoS One</em> 9(3): e90081. <a href="https://doi.org/10.1371/journal.pone.0090081" class="uri">https://doi.org/10.1371/journal.pone.0090081</a>. Later popularized via the <code>R</code> package <a href="https://allisonhorst.github.io/palmerpenguins/"><code>palmerpenguins</code></a>
</td>
</tr></tfoot>
</table>
</div>
</div>
</div>
</li>
</ol>
<p>See the <a href="../mini/mini01.html#eda">previous mini-project</a> for advice on formatting your responses.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 6: Exploratory Questions - Graph Answers">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 6: Exploratory Questions - Graph Answers
</div>
</div>
<div class="callout-body-container callout-body">
<p>Answer the following questions: for each query, produce both i) an appropriate ‘publication-quality’ plot that answers the question; and ii) a sentence or two interpreting the plot. Note that the text needs to guide the reader through the answer: it is not enough to simple ‘point to’ the plot and expect it to be self-describing.</p>
<p>E.g., if the question were “What is the largest species in the <code>penguins</code> data?”, you might produce a plot like:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">island</span>, <span class="op">-</span><span class="va">sex</span>, <span class="op">-</span><span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>body_mass <span class="op">=</span> <span class="va">body_mass</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">species</span>, </span>
<span>                 names_to<span class="op">=</span><span class="st">"measure"</span>,</span>
<span>                 values_to<span class="op">=</span><span class="st">"species_mean"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>measure <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_match.html">case_match</a></span><span class="op">(</span><span class="va">measure</span>, </span>
<span>        <span class="st">"bill_dep"</span> <span class="op">~</span> <span class="st">"Bill Depth (mm)"</span>, </span>
<span>        <span class="st">"bill_len"</span> <span class="op">~</span> <span class="st">"Bill Length (mm)"</span>, </span>
<span>        <span class="st">"body_mass"</span> <span class="op">~</span> <span class="st">"Body Mass (kg)"</span>, </span>
<span>        <span class="st">"flipper_len"</span> <span class="op">~</span> <span class="st">"Flipper Length (mm)"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>measure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">measure</span><span class="op">)</span>, </span>
<span>           measure <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">measure</span>, <span class="st">"Body Mass (kg)"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">measure</span>, </span>
<span>               y<span class="op">=</span><span class="va">species_mean</span>, </span>
<span>               fill<span class="op">=</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>position<span class="op">=</span><span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">measure</span>, scales<span class="op">=</span><span class="st">"free"</span>, nrow<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Species Mean"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"bottom"</span>, </span>
<span>          axis.text.x<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>          strip.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"qual"</span>, </span>
<span>                      palette<span class="op">=</span><span class="fl">2</span>, </span>
<span>                      name<span class="op">=</span><span class="st">"Species"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="mini02_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>and include text to the effect of “By mass, Gentoo penguins are the largest species studied, weighing almost 1.5 kg more than Adelie or Chinstrap penguins on average; despite this, Gentoo bills are typically a bit smaller than other species on multiple dimensions, and Gentoo flipper lengths are broadly in line. This suggests that the extra mass of Gentoo penguins may be an artifact of a larger average torso, but that the other extremities do not scale accordingly.” This sentence directly answers the simplest interpretation of the question (largest by mass), but it also uses some other data to give a fuller context. Additionally, while the plot can be used to give precise figures, the text gives rough figures (“roughly 1.5 kg”, “a bit smaller”, “broadly in line”) for the qualitative comparisons.</p>
<ol type="1">
<li><p>How does the amount of time spent on household activities change as Americans age?</p></li>
<li>
<p>A major perk of working in education is the freedom to spend summers how you wish. What are the most popular activities for Americans employed in education during the summer months (June, July, and August)?</p>
<p><em>Hint</em>: There are several variables that can be used to access the occupation of the respondent. Make sure to pick one that gives you enough detail to focus your analysis to people on a “school year schedule”, but you do not need to be 100% accurate here.</p>
</li>
<li><p>It is often remarked that “education is a privilege wasted on the young”. Among respondents who report being enrolled in a higher-education program, how does the amount of time allocated to various educational activities (attending class, doing homework, studying, <em>etc.</em>) vary by age? Does it seem to be true that older students dedicate more time to their education?</p></li>
<li>
<p>A <a href="https://r-graph-gallery.com/web-bump-plot-with-highlights.html">“bump plot”</a> is an effective way to display <em>ranking</em> (ordinal) data and to show how it changes over time. Use a bump plot to show how the relative interest in different sports changes as a function of either age or income (your choice).</p>
<p><em>Hint</em>: Because bump plots require a discretized <span class="math inline">\(x\)</span>-axis, the <code>cut</code> function may again be your friend here.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Middle_child_syndrome">“Middle-child syndrome”</a> can be explained, at least in part, by the idea that parents have less time to spend <em>per child</em> when they have multiple children.</p>
<p><em>E.g.</em>, a couple with their first child may be able to spend 6 hours per day on child care while maintaining their full-time jobs. After their second child is born, the parents may be able to find some extra time in their schedules and devote 8 hours per day to child care, or approximately four hours per child. Consequently, the second child reports getting 33% less parental attention than their holder sibling.</p>
<p>How does the amount of time parents spend <em>per child</em> change as family size increases?</p>
</li>
</ol>
<p>As with the other exploratory questions, some of these are intentionally a bit open-ended and can be answered in several different equally valid ways.</p>
</div>
</div>
</section></section><section id="final-deliverable-market-research-on-time-use-patterns-in-target-demographics" class="level3"><h3 class="anchored" data-anchor-id="final-deliverable-market-research-on-time-use-patterns-in-target-demographics">Final Deliverable: Market Research on Time Use Patterns in Target Demographics</h3>
<p>You are the product manager for a start-up hoping to launch a new time-tracking app. Unlike regular calendar apps, your product will allow users to compare how they spend their time against other demographically-similar users (<em>e.g.</em>, “Congratulations! You spent 3 more hours exercising this week than other users like you!”), with an intent of using gamification to help instill healthy time-use habits.</p>
<p>In order to design the user interface of this new app, the graphics design team has asked you to prepare estimates of ‘typical’ time use for representative users in your target demographics. For each of these sample users, you need to do the following:</p>
<ol type="i">
<li>
<p>Identify typical demographic parameters for your sample users. Depending on the sample user and target demographic, different demographic parameters or different ranges may be more appropriate. (<em>I.e.</em>, an 18 year-old high-school senior and a 25-year new college graduate just settling into their first job may only be seven years apart, but they are in very distinct ‘life stages’. Conversely, a 38 year-old suburban father of two and a 45 year-old suburban father of two are pretty comparable.)</p>
<p>One of your example users may be a woman who is 23 years, 5 months, and 6 days old, but you won’t have very many respondents in your data set who are the exact same age, so you might define her comparable population to be women 22 to 26. If you’re defining her peer group as “young women fresh out of college”, you might filter for women age 22 to 26 who have a college degree but are not currently enrolled in an educational program.</p>
</li>
<li><p>Identify key activities for your target demographic. These should be activities that are significant time usage and things that your target demo is likely to want to maximize. <em>E.g.</em>, college students might sleep more than middle-aged men, but middle-aged men are likely to care more about getting enough sleep. Similarly, time spent on exercise is likely far less than time at work for most employed individuals, but your users are more likely to want to prioritize exercise.</p></li>
<li><p>Identify a ‘target level’ and ‘typical level’ of time spent by your target demographic on each activity. For the typical level, compute ‘low’, ‘medium’, and ‘high’ values; for the target level, use your best judgement to define a level.</p></li>
<li><p>Determine what fraction of people in your target demographic actually hit the target level of time spent on the key activities.</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 7: Time Use Categories for Target Demographics">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 7: Time Use Categories for Target Demographics
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write up your findings for the product team. Make sure to <em>define</em> your target demographic, the key activities you identified, and give the various time levels. You can use tables or graphs (or a blend of each) to best communicate your finding.</p>
<p>Your target demographics are:</p>
<ol type="i">
<li>“Stay-at-home” dads.</li>
<li>College undergraduates.</li>
<li>A demographic of your choosing. (This can be a demographic group you identify with or one you simple select out of thin air.)</li>
</ol>
</div>
</div>
</section></section><section id="ai-usage-statement" class="level2"><h2 class="anchored" data-anchor-id="ai-usage-statement">AI Usage Statement</h2>
<p>At the end of your report, you <strong>must</strong> include a description of the extent to which you used Generative AI tools to complete the mini-project. This should be a one paragraph section clearly deliniated using a collapsable Quarto <a href="https://quarto.org/docs/authoring/callouts.html">“Callout Note”</a>. Failure to include an AI disclosure will result in an <strong>automatic 25% penalty.</strong></p>
<p><em>E.g.</em>,</p>
<div class="callout callout-style-default callout-note callout-titled" title="AI Usage Statement">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
AI Usage Statement
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>No Generative AI tools were used to complete this mini-project.</p>
</div>
</div>
</div>
<p>or</p>
<div class="callout callout-style-default callout-note callout-titled" title="AI Usage Statement">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
AI Usage Statement
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>GitHub Co-Pilot Pro was used via RStudio integration while completing this project. No other generative AI tools were used.</p>
</div>
</div>
</div>
<p>or</p>
<div class="callout callout-style-default callout-note callout-titled" title="AI Usage Statement">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
AI Usage Statement
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>ChatGPT was used to help write the code in this project, but all non-code text was generated without the use of any Generative AI tools. Additionally, ChatGPT was used to provide additional background information on the topic and to brainstorm ideas for the final open-ended prompt.</p>
</div>
</div>
</div>
<p>Recall that Generative AI <strong>may not</strong> be used to write or edit any non-code text in this course.</p>
<p>These blocks should be created using the following syntax:</p>
<pre><code>
::: {.callout-note title="AI Usage Statement" collapse="true"}

Your text goes here. 

:::
</code></pre>
<p>Make sure to use this specific type of callout (<code>.callout-note</code>), title, and <code>collapse="true"</code> setting.</p>
<p>Please contact the instructor if you have any questions about appropriate AI usage in this course.</p>
</section><section id="extra_credit" class="level2"><h2 class="anchored" data-anchor-id="extra_credit">Extra Credit Opportunities</h2>
<p>There are optional <em>Extra Credit Opportunities</em> where extra points can be awarded for specific additional tasks in this mini-project. The amount of the extra credit is typically not proportional to the work required to complete these tasks, but I provide these for students who want to dive deeper into this project and develop additional data analysis skills not covered in the main part of this mini-project.</p>
<p>For this mini-project, no more than 6 total points of extra credit may be awarded. <strong>Even with extra credit, your grade on this mini-project cannot exceed 80 points total.</strong></p>
<section id="ec01" class="level3"><h3 class="anchored" data-anchor-id="ec01">Extra Credit Opportunity #01: Relationship Diagram</h3>
<p><strong>Possible Extra Credit: Up to 2 Points</strong></p>
<p>After completing Task 01, examine the structure of your data sets and create a suitable <em>data relationship diagram</em>. An <em>data relationship diagram</em> is a visual representation of:</p>
<ol type="1">
<li>The data tables available for an analysis</li>
<li>The columns (names and types) present in each table</li>
<li>The possible <code>join</code> structures that can be used to combine these tables.</li>
</ol>
<p>Generate a suitable visualization and include it in your final submission. Tools like <a href="https://dbdiagram.io" class="uri">https://dbdiagram.io</a> or Canva can be useful for creating this visualization, but you may ultimately use whatever tool is most convenient for you (even a photo of an on-paper sketch). In determining the amount of extra credit awarded, peer evaluators will look at both the aesthetics of the visualization and the accuracy of the depicted relationships.</p>
<p>Note that this data is not ‘fully normalized’ so there may be cross-table relationships between one or more columns, particularly when connecting a ‘wide’ and ‘long’ data set. Note also that some of the join keys are a bit more complex than typical of a standard database set up so you may wish to annotate when a relationship more complex than simple quality is required.</p>
</section><section id="ec02" class="level3"><h3 class="anchored" data-anchor-id="ec02">Extra Credit Opportunity #02: Ring Visualizations</h3>
<p><strong>Possible Extra Credit: Up to 4 Points</strong></p>
<p>After completing Task 07, your engineering team has now started working on the visual components of the user interface (UI). Using <code>ggplot2</code> and extension packages, mock up a possible UI based on the Apple Watch <a href="https://www.apple.com/watch/close-your-rings/">“Activity Rings”</a>. Display your mock-up showing time use target and typical values for your demographic (Target Demographic 3), as well as your own time use over the previous week. Use this visualization to compare how you “should have” spent your time to how you have actually spent your time.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<p>This must be an easy-to-read visual / graphical display, not a table. Note that here you are optimizing for a blend of beauty and easy legibility, not “statistical clarity” or “informational efficiency”, so you can explore different types of graphics than we have used in class. Make sure to choose a “modern” color scheme, font choice, <em>etc.</em></p>
<p>Up to four points of extra credit may be awarded for visualizations that are particularly artful, effective, or otherwise impressive. “Standard” statistical visualizations (<em>i.e.</em>, a generic <code>ggplot2</code> bar chart) will not be given extra credit.</p>
<hr>
<p>This work ©2026 by <a href="https://michael-weylandt.com">Michael Weylandt</a> is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">Creative Commons BY-NC-SA 4.0</a> license. <img src="http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" class="img-fluid" style="width:10.0%"></p>


</section></section><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>This the level of “ChatGPT-level” prose, without obvious flaws but lacking the style and elegance associated with true quality writing.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Throughout this section, replace <code>YOUR_GITHUB_ID</code> with your GitHub ID from <a href="./mini00.html">Mini-Project #00</a>. Note that the automated course infrastructure will be looking for precise formatting, so follow these instructions closely.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Note that the survey collects daily activities for a single day per respondent; this is not 250,000 Americans all of whom were tracked for 20 years.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>This data was extracted from ATUS Lexicon files at <a href="https://www.bls.gov/tus/lexicons.htm" class="uri">https://www.bls.gov/tus/lexicons.htm</a> but the code necessary to convert these files to a usable format was fragile and well-beyond the scope of this course, so I’m providing the cleaned-up data directly.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>This process isn’t fool-proof, but it should cover most use-cases.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>ATUS cautions against using 2020 data and the usual weights, providing an alternative weight variable <code>TU20FWGT</code> for 2020 data that also weights by date to ensure the “peak social isolation” period of March 18 - May 9 is represented. You can ignore this subtlety, but I’m flagging it here in case pandemic-effect questions are of interest.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>If you don’t want to reveal your actual time use patterns or if your Target Demographic 3 is a group to which you don’t belong, feel free to use made-up values here. No one is actually monitoring how you spend your time outside of class.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/michael-weylandt\.com\/STA9750\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/mini/mini02.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/mini/mini02.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>