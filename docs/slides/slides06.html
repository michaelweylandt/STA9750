<!DOCTYPE html>
<html lang="en"><head>
<link href="../_houndfavicon.png" rel="icon" type="image/png">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.33">

  <title>STA 9750 ‚Äì Software Tools for Data AnalysisSTA 9750Michael WeylandtWeek 6 ‚Äì Thursday 2026-03-12Last Updated: 2026-01-14</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-15b32ad5b709753aad51696ffff15817.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="../images/baruch_title.png" data-background-size="100% 100%" class="quarto-title-block center">
  <h1 class="title"><br><br><br><br><br>Software Tools for Data Analysis<br>STA 9750<br>Michael Weylandt<br>Week 6 ‚Äì Thursday 2026-03-12<br>Last Updated: 2026-01-14</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="week" class="slide level2">
<h2>STA 9750 Week 6</h2>
<p>Today: Lecture #05: Multi-Table dplyr Verbs</p>
</section>
<section>
<section id="today" class="title-slide slide level1 center">
<h1>Today</h1>

</section>
<section id="today-1" class="slide level2">
<h2>Today</h2>
<ul>
<li>Course Administration</li>
<li>Mini-Project #01 Reflection</li>
<li>Project Proposal Presentations</li>
<li>Wrap-Up
<ul>
<li>Life Tip of the Day</li>
</ul></li>
<li><em>Time Allowing</em>: <code>dplyr</code> vs <code>SQL</code></li>
</ul>
</section>
<section id="mp01---peer-feedback" class="slide level2">
<h2>MP#01 - Peer Feedback</h2>
<p>Assigned on GitHub - due on 2026-03-22</p>
<ul>
<li><span class="math inline">\(\approx 4\)</span> feedbacks each</li>
<li>Take this seriously: around 20% of this assignment is ‚Äúmeta-review‚Äù</li>
<li>Goal: <em>rigorous</em> <em>constructive</em> critique</li>
</ul>
<p>Use <a href="https://michael-weylandt.com/STA9750/tips.html#find-peer-feedback-assigned-to-me">helper functions</a> to find submissions assigned to you. Ask on Piazza if still having trouble.</p>
</section>
<section id="mp01---peer-feedback-1" class="slide level2">
<h2>MP#01 - Peer Feedback</h2>
<p>Submissions may not map perfectly to rubric - use your best judgement</p>
<div class="fragment">
<p>Be <em>generous</em> but serious:</p>
<ul>
<li>Goal is improvement, so ‚Äúeverything is great, no comments‚Äù is unhelpful
<ul>
<li>Nothing is completely right nor completely wrong</li>
</ul></li>
<li>Remember, <em>meta-review</em> (TA scores of your feedback) to follow</li>
<li>Extra Credit is limited per instructions; only award for exceptional work</li>
</ul>
</div>
<div class="fragment">
<p>Learn from this! What can <em>you</em> adapt for MP#02?</p>
</div>
</section>
<section id="mp01---peer-feedback-2" class="slide level2 scrollable">
<h2>MP#01 - Peer Feedback</h2>
<p>Example of poor feedback:</p>
<div class="smallest">
<pre><code>Scores
Written Communication: 10
Project Skeleton: 10
Formatting &amp; Display: 10
Code Quality: 10
Data Preparation: 10
Extra Credit: 10

Comments
Website looks really good, nice and clean!

Written Communication
Excellent and straight to the point.

Project Skeleton
Solid skeleton, well-organized .

Formatting &amp; Display
Nicely formatted and balanced across the website.

Code Quality
Code runs like Forrest Gump in a Slump.

Data Preparation
Very great. 

Extra Credit
Added graphes for even better understanding.</code></pre>
</div>
<ul>
<li>Improper formatting</li>
<li>Superficial comments / no sign of actually reading work</li>
</ul>
<p>Red Flag: Repeated verbatim on several posts</p>
<p>Reminder: Poor feedback <span class="math inline">\(\neq\)</span> poor work.</p>
</section>
<section id="mp01---peer-feedback-3" class="slide level2 scrollable">
<h2>MP#01 - Peer Feedback</h2>
<p>Example of medium feedback:</p>
<div class="smallest">
<pre><code>## Scores 

- Written Communication: 8
- Project Skeleton: 10
- Formatting &amp; Display: 9
- Code Quality: 10
- Data Preparation: 10
- Extra Credit: 1

## Comments

Love the visuals for Press Releases.

### Written Communication

A short summary or a description of this project would be great to add.

### Project Skeleton

Code completes all instructor-provided tasks correctly.

### Formatting &amp; Display

Tables have well-formatted column names; caption would be great.

### Code Quality

Code is clear and well written.

### Data Preparation

Automatic (10/10). Out of scope for this mini-project.

### Extra Credit

I found all the Press Releases very interesting. The visuals were a great touch.</code></pre>
</div>
<ul>
<li>Proper formatting</li>
<li>Gave actionable suggestions</li>
<li>Directionally correct, but a bit vague</li>
</ul>
</section>
<section id="mp01---peer-feedback-4" class="slide level2 scrollable">
<h2>MP#01 - Peer Feedback</h2>
<p>Example of great feedback:</p>
<div class="smallest">
<pre><code>
## Scores

- Written Communication: 9
- Project Skeleton: 10
- Formatting &amp; Display: 9
- Code Quality: 9
- Data Preparation: 10
- Extra Credit: 2

## Comments

### Written Communication

Overall, your writing is clear and easy to follow. I noticed a few small typos, but nothing major ‚Äî using the built-in spell check in RStudio should catch those quickly. Everything else looks solid, and I didn‚Äôt have any major concerns based on my review.

### Project Skeleton

All tasks were completed satisfactorily. 

### Formatting &amp; Display

Overall, your tables and figures are well-organized and clear. There is one table in the "Data" section with column titles that could be formatted a little more cleanly for easier reading. I also noticed a few small typos in some of the table captions, but they should be easy to fix.

### Code Quality

The code quality is generally good, but there are a few minor linter issues. The comments could be more frequent and clearer in some places. For example, the comment `#checking dupolicate so that github will not block it` should be corrected to "duplicate," and the explanation could be clarified to avoid confusion‚Äìwhat duplicate are you referring to, and how does it block GitHub? It might confuse someone else reading the code.

Also, I would recommend moving all library imports to the top of the script, as that is typically considered standard practice.

### Data Preparation

The data preparation looks solid overall. I like how you handle missing files and JSON parsing failures‚Äìit demonstrates strong defensive programming.

### Extra Credit

Additional two points for using quarto's video support!</code></pre>
</div>
<ul>
<li>Positive tone</li>
<li>Detailed comments</li>
<li>Noted issues &amp; gave suggestions on how to fix</li>
<li>Noted unclear sections for improvement</li>
</ul>
</section>
<section id="mp01---peer-feedback-5" class="slide level2">
<h2>MP#01 - Peer Feedback</h2>
<p>Lack of prior experience <em>is not a hinderance</em> here:</p>
<ul>
<li>If something is unclear to you, that‚Äôs a problem!</li>
<li>Nothing required super-complex code, so anything overly complex probably could have been a simpler way (except for some above-and-beyond stuff)</li>
<li>You don‚Äôt have to be definitive in comments - impressions and questions are just as helpful.</li>
</ul>
</section>
<section id="mp01---impressions" class="slide level2">
<h2>MP#01 - Impressions</h2>
<p>üëè Thank you for excellent work here! üëè</p>
<div class="fragment">
<p>I‚Äôve started reading some submissions - really impressive!</p>
<ul>
<li>Plots (exciting!)</li>
<li>Sophisticated and Insightful Analyses</li>
<li>Lots of <em>K-Pop Demon Hunters</em></li>
<li>Fun for me to get to learn your interests</li>
</ul>
</div>
<div class="fragment">
<p>Hopefully automated checks helpful. If you have ideas for other useful automated ‚Äòsupports‚Äô let me know</p>
</div>
</section>
<section id="mp01---common-questions" class="slide level2">
<h2>MP#01 - Common Questions</h2>
<p>Q: Why doesn‚Äôt my site look the same on GitHub as it does on my laptop?</p>
<div class="fragment">
<p>A: Missing <code>css</code> and <code>js</code> files. Need to <em>upload</em> everything in <code>docs</code>.</p>
</div>
<div class="fragment">
<p>New helper function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">source</span>(<span class="st">"https://michael-weylandt.com/STA9750/load_helpers.R"</span>)</span>
<span id="cb4-2"><a></a><span class="fu">mp_submission_ready</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Tries to make sure all ‚Äòsecondary‚Äô files are present.</p>
</div>
</section>
<section id="mp01---common-questions-1" class="slide level2">
<h2>MP#01 - Common Questions</h2>
<p>Q: Why doesn‚Äôt my submission have the right URL?</p>
<div class="fragment">
<p>A: <em>Most</em> computers have case-sensitive file names, Mac doesn‚Äôt, and Windows is iffy.</p>
</div>
<div class="fragment">
<p>New helper function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">source</span>(<span class="st">"https://michael-weylandt.com/STA9750/load_helpers.R"</span>)</span>
<span id="cb5-2"><a></a><span class="fu">mp_start</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Generates a very basic <code>qmd</code> file with the correct file name and some relevant context.</p>
</div>
</section>
<section id="mini-project-02" class="slide level2">
<h2>Mini-Project #02</h2>
<p><a href="../mini/mini02.html">MP#02 released</a> - TBD</p>
<div class="fragment">
<p><strong>Due2026-04-03 at 11:59pm ET</strong></p>
<ul>
<li>GitHub post (used for peer feedback) AND Brightspace</li>
<li><span class="math inline">\(\approx\)</span> One Month: don‚Äôt wait until the very end</li>
</ul>
</div>
<div class="fragment">
<p>Pay attention to <a href="../mini/mini02.html#rubric">the rubric</a></p>
<ul>
<li>Writing and presentation are about 50% of your grade</li>
<li>Evaluated on <em>rigor</em> and <em>thoughtfulness</em>, not necessarily correctness</li>
</ul>
<div class="smallest">
<p>Thanks to HI and SK for help with Windows-compatibility!</p>
</div>
</div>
</section>
<section id="upcoming-mini-projects" class="slide level2">
<h2>Upcoming Mini-Projects</h2>
<p>Tentative Topics</p>
<ul>
<li>MP#03: NYC Trees - 2026-04-24 at 11:59pm ET</li>
<li>MP#04: US Employment Surveys - 2026-05-15 at 11:59pm ET</li>
</ul>
</section>
<section id="pre-assignments" class="slide level2">
<h2>Pre-Assignments</h2>
<p>Brightspace - day before class</p>
<ul>
<li>Reading, typically on course website</li>
<li>Brightspace auto-grades
<ul>
<li>I have to manually change to completion grading</li>
</ul></li>
</ul>
<p>Next pre-assignment is <strong>2026-03-12 at 6:00pm ET</strong></p>
<div class="fragment">
<p>I missed a few comments in the previous cycle (sorry!) - trying to catch up in the next few days</p>
</div>
</section>
<section id="course-support" class="slide level2">
<h2>Course Support</h2>
<ul>
<li>Synchronous
<ul>
<li>Virtual Office Hours 2x / week on Class Days</li>
</ul></li>
<li>Asynchronous
<ul>
<li>Piazza (<span class="math inline">\(&lt;20\)</span> minute average response time)</li>
</ul></li>
</ul>
</section>
<section id="upcoming-week" class="slide level2">
<h2>Upcoming Week</h2>
<p>Due Wednesday at 11:45pm:</p>
<ul>
<li>Pre-Assignment #07 (Brightspace)
<ul>
<li><strong>Introduction to plotting with <code>ggplot2</code></strong></li>
</ul></li>
</ul>
<p>Expect back:</p>
<ul>
<li>MP#01 grades</li>
<li>Project proposal instructor feedback</li>
</ul>
</section>
<section id="project-proposals" class="slide level2">
<h2>Project Proposals</h2>
<p><a href="https://michael-weylandt.com/STA9750/project.html#project-proposal-presentations">Official Description</a></p>
<ul>
<li><strong>6 minute presentation</strong></li>
<li>Key topics:
<ul>
<li><em>Animating Question</em></li>
<li><em>Team Roster</em></li>
</ul></li>
<li>Also discuss: Possible specific questions, data sources, analytical plan, anticipated challenges</li>
</ul>
<div class="fragment">
<p>Most important: team names!</p>
<p>Previous: Rat Pack, Subway Surfers, Going for Gold, <em>etc.</em></p>
</div>
</section>
<section id="after-proposals" class="slide level2">
<h2>After Proposals</h2>
<p>100% optional discussion of <code>dplyr</code> vs <code>SQL</code></p>
<ul>
<li><code>SQL</code> is a very common Data Scientist interview topic so if you‚Äôre not taking a database course, might be useful</li>
</ul>
</section></section>
<section>
<section id="on-to-the-show" class="title-slide slide level1 center">
<h1>On to the Show!</h1>

</section>
<section id="presentation-order" class="slide level2 scrollable">
<h2>Presentation Order</h2>
<p>TBD</p>
<div class="smaller">

</div>
</section></section>
<section>
<section id="wrap-up" class="title-slide slide level1 center">
<h1>Wrap-Up</h1>

</section>
<section id="orientation" class="slide level2">
<h2>Orientation</h2>
<ul>
<li>Communicating Results (<code>quarto</code>) ‚úÖ</li>
<li><code>R</code> Basics ‚úÖ</li>
<li>Data Manipulation in <code>R</code> ‚úÖ</li>
<li>Data Visualization in <code>R</code> ‚¨ÖÔ∏è</li>
<li>Getting Data into <code>R</code></li>
<li>Statistical Modeling in <code>R</code></li>
</ul>
</section>
<section id="upcoming-work" class="slide level2">
<h2>Upcoming Work</h2>
<p>Upcoming work from <a href="../index.html#calendar">course calendar</a></p>
<ul>
<li class="fragment"><a href="../miniprojects.html">Mini-Project #01 Peer Feedback</a> due on 2026-03-22</li>
<li class="fragment"><a href="../pre/pa07.html">Pre-Assignment #07</a> due 2026-03-12 at 6:00pm ET</li>
<li class="fragment"><a href="../mini/mini02.html">Mini-Project #02</a> due on 2026-04-03 at 11:59pm ET</li>
</ul>
</section>
<section id="life-tip-of-the-week" class="slide level2">
<h2>Life Tip of the Week</h2>
<h3 id="register-to-vote">Register to Vote</h3>
<p>If you want to vote in the upcoming NYC Election, it‚Äôs time to register to vote:</p>
<blockquote>
<p><a href="https://www.vote.nyc/page/register-vote">https://www.vote.nyc/page/register-vote</a></p>
</blockquote>
<p>Early voting begins October 25th: need to be registered by then</p>
<ul>
<li>Forms must be <em>received</em> not just mailed</li>
</ul>
</section>
<section id="life-tip-of-the-week-1" class="slide level2">
<h2>Life Tip of the Week</h2>
<h3 id="on-the-ballot">On the Ballot</h3>
<ul>
<li>Mayor, Comptroller, Advocate</li>
<li>Borough President, Council Member</li>
<li>Judges</li>
<li><strong>5 City Charter Amendments</strong> (<a href="https://www.nycvotes.org/whats-on-the-ballot/2025-ballot-proposals/">Official NYC-CFB Voter Guide</a>)</li>
</ul>
</section>
<section id="musical-treat" class="slide level2">
<h2>Musical Treat</h2>
<p><br></p>
<iframe data-external="1" src="https://www.youtube.com/embed/LBIo5QuEeaA" width="80%" height="400px" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</section></section>
<section>
<section id="optional-material-time-allowing" class="title-slide slide level1 center">
<h1>Optional Material (Time Allowing)</h1>

</section>
<section id="sql" class="slide level2">
<h2>SQL</h2>
<p><em>S</em>tructured <em>Q</em>uery <em>L</em>anguage (ISO 9075)</p>
<ul>
<li class="fragment">Standard language for interacting with <em>Relational Database Management Systems</em> (RDMS)</li>
<li class="fragment">Divided into three main sub-languages:
<ul>
<li class="fragment">Data Manipulation Language (DML)</li>
<li class="fragment">Data Declaration Language (DDL)</li>
<li class="fragment">Data Control Language (DCL)</li>
</ul></li>
<li class="fragment"><em>Declarative</em>, not <em>Imperative</em> Programming</li>
</ul>
</section>
<section id="sql-languages" class="slide level2">
<h2>SQL Languages</h2>
<p>Data Definition Language (DDL)</p>
<div class="small">
<ul>
<li>‚ÄúDesign‚Äù language for DB</li>
<li>What tables are present? What types are the columns? What relationships (keys) are enforced?</li>
</ul>
</div>
<div class="fragment">
<p>Data Manipulation Language (DML)</p>
<div class="small">
<ul>
<li>‚ÄúUser‚Äù interaction with DB: queries, adding, changing, deleting data</li>
<li><code>SELECT</code>, <code>GROUP BY</code>, <code>WHERE</code>, <code>HAVING</code>, <code>JOIN</code>, <em>etc.</em></li>
<li>Roughly coextensive with <code>dplyr</code></li>
</ul>
</div>
</div>
<div class="fragment">
<p>Data Control Language (DCL)</p>
<div class="small">
<ul>
<li>‚ÄúSecurity‚Äù language for DB</li>
<li>What permissions do different users have?</li>
</ul>
</div>
</div>
</section>
<section id="rdms" class="slide level2">
<h2>RDMS</h2>
<p>Relational Database Management System (RDMS)</p>
<ul>
<li class="fragment">Data management server for complex environments</li>
<li class="fragment"><em>Relational</em> tabular data structures</li>
<li class="fragment">Manipulated using SQL
<ul>
<li class="fragment">Common SQL Standard + <em>Many</em> RDMS-specific extensions</li>
</ul></li>
<li class="fragment">ACID Guarantees</li>
</ul>
</section>
<section id="ddl" class="slide level2">
<h2>DDL</h2>
<p>RDMS has a fixed number of <em>tables</em> (roughly <code>data.frame</code>s). DDL specifies</p>
<ul>
<li>Column names and type</li>
<li>Can values be left blank (nullability)?</li>
<li>Identifiers (Primary Keys)</li>
<li>Constraints (non-negative, <code>a &lt; b</code>, <em>etc.</em>)</li>
<li>Relationships to other tables (Foreign Keys)</li>
</ul>
</section>
<section id="ddl-1" class="slide level2">
<h2>DDL</h2>
<p>Basic command is the <code>CREATE TABLE</code> statement.</p>
<p><code>TYPE</code> can be <code>INTEGER</code>, <code>DECIMAL</code>, <code>CHAR</code>, <code>VARCHAR</code>, <code>DATE</code>, <code>TIMESTAMP</code> and more</p>
</section>
<section id="ddl-2" class="slide level2">
<h2>DDL</h2>
<p>Our beloved <code>penguins</code>:</p>
<p>Compare:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species     &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Ad‚Ä¶
$ island      &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgersen, Tor‚Ä¶
$ bill_len    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0, ‚Ä¶
$ bill_dep    &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2, ‚Ä¶
$ flipper_len &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186, 180,‚Ä¶
$ body_mass   &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, 4250, ‚Ä¶
$ sex         &lt;fct&gt; male, female, female, NA, female, male, female, male, NA, ‚Ä¶
$ year        &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="ddl-3" class="slide level2">
<h2>DDL</h2>
<p>We can add a <em>constraint</em> so the year is 2007-2009:</p>
</section>
<section id="ddl-4" class="slide level2">
<h2>DDL</h2>
<p>Constraints for categorical variables (<code>R</code> <code>factor</code>s) can be tricky. Create a <em>normalized</em> set of tables:</p>
<div class="smaller">
<table class="caption-top">
<thead>
<tr class="header">
<th>Sex ID</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Female</td>
</tr>
<tr class="even">
<td>2</td>
<td>Male</td>
</tr>
</tbody>
</table>
<table class="caption-top">
<thead>
<tr class="header">
<th>Penguin ID</th>
<th>Sex ID</th>
<th>Weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>4000</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>3500</td>
</tr>
<tr class="odd">
<td>3</td>
<td>2</td>
<td>5000</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment">
<p>We want to make sure each <code>Sex ID</code> in table 2 matches a row of the first table</p>
</div>
</section>
<section id="ddl-5" class="slide level2">
<h2>DDL</h2>
<p>Constraints for categorical variables (<code>R</code> <code>factor</code>s) can be tricky. Create a <em>normalized</em> set of tables:</p>
</section>
<section id="ddl-normalization" class="slide level2">
<h2>DDL Normalization</h2>
<p>Normalization:</p>
<ol type="1">
<li>Increases integrity via constraints</li>
<li>Reduces redundancy (need to change value in 1 place only)</li>
<li>Slight performance benefits</li>
</ol>
<div class="fragment">
<p>More <code>JOIN</code> work in <code>SQL</code> than in <code>dplyr</code></p>
</div>
<div class="fragment">
<p>Proper table design is a science and an art</p>
</div>
</section>
<section id="dml" class="slide level2">
<h2>DML</h2>
<p><strong>Data Manipulation Language</strong> is for DB users.</p>
<ul>
<li>Close parallels to <code>dplyr</code></li>
<li>Compare:</li>
</ul>
<p><em>vs.</em></p>
<p><code>SELECT *</code> means <em>all columns</em> which matches <code>R</code>‚Äôs default</p>
</section>
<section id="dml-1" class="slide level2">
<h2>DML</h2>
<p><strong>Data Manipulation Language</strong> is for DB users.</p>
<ul>
<li>Close parallels to <code>dplyr</code></li>
<li>Compare:</li>
</ul>
<p><em>vs.</em></p>
</section>
<section id="dml-2" class="slide level2">
<h2>DML</h2>
<p><strong>Data Manipulation Language</strong> is for DB users.</p>
<ul>
<li>Close parallels to <code>dplyr</code></li>
<li>Compare:</li>
</ul>
<p><em>vs.</em></p>
</section>
<section id="dml-3" class="slide level2">
<h2>DML</h2>
<p>Note that</p>
<p>and</p>
<p>are both</p>
<div class="fragment">
<p>Why?</p>
</div>
<div class="fragment">
<p>They <em>commute</em> ‚Äì same result in either order</p>
</div>
</section>
<section id="dml-4" class="slide level2">
<h2>DML</h2>
<ul>
<li><code>R</code> is an <em>imperative</em> paradigm - you say <em>what to do</em></li>
<li><code>SQL</code> is a <em>declarative</em> paradigm - you say <em>what you want</em></li>
</ul>
<div class="fragment">
<p>Declarative paradigms let the server figure out the <em>best</em> way to compute, but are more restrictive</p>
</div>
<div class="fragment">
<p>For a well-defined paradigm like SQL, <em>much</em> work has gone into query optimization</p>
</div>
</section>
<section id="dml-5" class="slide level2">
<h2>DML</h2>
<ul>
<li>Compare:</li>
</ul>
<p><em>vs.</em></p>
<p><code>summarize()</code> is implicit in <code>SELECT</code> clause when we have a <code>GROUP BY</code></p>
</section>
<section id="dml-6" class="slide level2">
<h2>DML</h2>
<p>But:</p>
<p>is</p>
<div class="fragment">
<p>Why not <code>WHERE</code> again?</p>
</div>
</section>
<section id="dml-7" class="slide level2">
<h2>DML</h2>
<p>In <code>SQL</code>: - <code>WHERE</code> happens before a <code>GROUP BY</code>; and - <code>HAVING</code> happens after a <code>GROUP BY</code></p>
<p>In <code>R</code>: - Ordering of <code>summarize()</code> and <code>filter</code> controls execution order</p>
</section>
<section id="acid-guarantees" class="slide level2">
<h2>ACID Guarantees</h2>
<p>Most RDMSs provide a set of four <code>ACID</code> guarantees:</p>
<ul>
<li class="fragment"><strong>Atomicity</strong>: Changes occur all-or-nothing
<ul>
<li class="fragment"><em>E.g.</em>: Add charge to customer‚Äôs account + schedule item for shipping</li>
</ul></li>
<li class="fragment"><strong>Consistency</strong>: DDL Constraints are always valid
<ul>
<li class="fragment"><em>E.g.</em>: Can‚Äôt create a user without having an email on file</li>
</ul></li>
<li class="fragment"><strong>Isolation</strong>: Two different users don‚Äôt ‚Äústep on each other‚Äôs toes‚Äù
<ul>
<li class="fragment"><em>E.g.</em>: If I‚Äôm updating prices while you are checking out, you get your original price</li>
</ul></li>
<li class="fragment"><strong>Durability</strong>: When a change is complete, it is guaranteed to be saved to disk</li>
</ul>
</section>
<section id="getting-started-with-rdms" class="slide level2">
<h2>Getting Started with RDMS</h2>
<p>Easiest RDMS to use is <code>SQLite</code></p>
<ul>
<li>Most ubiquitous DB in the world (by a long-shot)</li>
<li>Already installed on your computer (many times over!)</li>
<li>Access directly through <code>sqlite3</code> or <code>sqlite3.exe</code></li>
<li>Access from <code>R</code> with <code>RSQLite</code> package</li>
</ul>
<div class="fragment">
<p><a href="https://sqlite.org/lang.html">Excellent documentation</a></p>
</div>
</section>
<section id="dbplyr" class="slide level2">
<h2>dbplyr</h2>
<p>Can use <code>dbplyr</code> (extra <code>b</code>!) to put <code>dplyr</code>-UX on DB</p>
<p><em>E.g.</em></p>
</section>
<section id="dbplyr-1" class="slide level2">
<h2>dbplyr</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;`penguins`&gt; [?? x 8]
# Database: sqlite 3.50.4 [:memory:]
   species island    bill_len bill_dep flipper_len body_mass sex     year
   &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
 1 Adelie  Torgersen     39.1     18.7         181      3750 male    2007
 2 Adelie  Torgersen     39.5     17.4         186      3800 female  2007
 3 Adelie  Torgersen     40.3     18           195      3250 female  2007
 4 Adelie  Torgersen     NA       NA            NA        NA &lt;NA&gt;    2007
 5 Adelie  Torgersen     36.7     19.3         193      3450 female  2007
 6 Adelie  Torgersen     39.3     20.6         190      3650 male    2007
 7 Adelie  Torgersen     38.9     17.8         181      3625 female  2007
 8 Adelie  Torgersen     39.2     19.6         195      4675 male    2007
 9 Adelie  Torgersen     34.1     18.1         193      3475 &lt;NA&gt;    2007
10 Adelie  Torgersen     42       20.2         190      4250 &lt;NA&gt;    2007
# ‚Ñπ more rows</code></pre>
</div>
</div>
</section>
<section id="dbplyr-2" class="slide level2">
<h2>dbplyr</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;SQL&gt;
SELECT `species`, AVG(`body_mass`) AS `mean_mass`
FROM `penguins`
GROUP BY `species`</code></pre>
</div>
</div>
<p>Extra step - <code>show_query</code> to see SQL or <code>collect()</code> to run in DB:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  species   mean_mass
  &lt;chr&gt;         &lt;dbl&gt;
1 Adelie        3701.
2 Chinstrap     3733.
3 Gentoo        5076.</code></pre>
</div>
</div>
</section>
<section id="dbplyr-3" class="slide level2">
<h2>dbplyr</h2>
<div class="smaller">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;SQL&gt;
SELECT `species`, AVG(`body_mass`) AS `mean_mass`
FROM (
  SELECT `penguins`.*
  FROM `penguins`
  WHERE (`body_mass` &gt; 4000.0)
) AS `q01`
GROUP BY `species`</code></pre>
</div>
</div>
<p>Compared to:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;SQL&gt;
SELECT `species`, AVG(`body_mass`) AS `mean_mass`
FROM `penguins`
GROUP BY `species`
HAVING (AVG(`body_mass`) &gt; 4000.0)</code></pre>
</div>
</div>
<p>Not the best SQL, but RDMS can make quick work of it</p>
</div>
</section>
<section id="dbplyr-4" class="slide level2 scrollable">
<h2>dbplyr</h2>
<p>A more substantial example:</p>
<div class="smaller">

</div>
</section>
<section id="dbplyr-5" class="slide level2 scrollable">
<h2>dbplyr</h2>
<p>A more substantial example:</p>
<div class="smaller">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>CREATE TABLE `AllstarFull` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `gameNum` INTEGER,
  `gameID` TEXT,
  `teamID` TEXT,
  `lgID` TEXT,
  `GP` INTEGER,
  `startingPos` TEXT
);
CREATE INDEX `AllstarFull_playerID` ON `AllstarFull` (`playerID`);
CREATE INDEX `AllstarFull_yearID` ON `AllstarFull` (`yearID`);
CREATE INDEX `AllstarFull_gameID` ON `AllstarFull` (`gameID`);
CREATE INDEX `AllstarFull_teamID` ON `AllstarFull` (`teamID`);
CREATE INDEX `AllstarFull_lgID` ON `AllstarFull` (`lgID`);
CREATE TABLE sqlite_stat1(tbl,idx,stat);
CREATE TABLE sqlite_stat4(tbl,idx,neq,nlt,ndlt,sample);
CREATE TABLE `Appearances` (
  `yearID` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `playerID` TEXT,
  `G_all` INTEGER,
  `GS` INTEGER,
  `G_batting` INTEGER,
  `G_defense` INTEGER,
  `G_p` INTEGER,
  `G_c` INTEGER,
  `G_1b` INTEGER,
  `G_2b` INTEGER,
  `G_3b` INTEGER,
  `G_ss` INTEGER,
  `G_lf` INTEGER,
  `G_cf` INTEGER,
  `G_rf` INTEGER,
  `G_of` INTEGER,
  `G_dh` INTEGER,
  `G_ph` INTEGER,
  `G_pr` INTEGER
);
CREATE INDEX `Appearances_yearID` ON `Appearances` (`yearID`);
CREATE INDEX `Appearances_teamID` ON `Appearances` (`teamID`);
CREATE INDEX `Appearances_lgID` ON `Appearances` (`lgID`);
CREATE INDEX `Appearances_playerID` ON `Appearances` (`playerID`);
CREATE TABLE `AwardsManagers` (
  `playerID` TEXT,
  `awardID` TEXT,
  `yearID` INTEGER,
  `lgID` TEXT,
  `tie` TEXT,
  `notes` TEXT
);
CREATE INDEX `AwardsManagers_playerID` ON `AwardsManagers` (`playerID`);
CREATE INDEX `AwardsManagers_awardID` ON `AwardsManagers` (`awardID`);
CREATE INDEX `AwardsManagers_yearID` ON `AwardsManagers` (`yearID`);
CREATE INDEX `AwardsManagers_lgID` ON `AwardsManagers` (`lgID`);
CREATE TABLE `AwardsPlayers` (
  `playerID` TEXT,
  `awardID` TEXT,
  `yearID` INTEGER,
  `lgID` TEXT,
  `tie` TEXT,
  `notes` TEXT
);
CREATE INDEX `AwardsPlayers_playerID` ON `AwardsPlayers` (`playerID`);
CREATE INDEX `AwardsPlayers_awardID` ON `AwardsPlayers` (`awardID`);
CREATE INDEX `AwardsPlayers_yearID` ON `AwardsPlayers` (`yearID`);
CREATE INDEX `AwardsPlayers_lgID` ON `AwardsPlayers` (`lgID`);
CREATE TABLE `AwardsShareManagers` (
  `awardID` TEXT,
  `yearID` INTEGER,
  `lgID` TEXT,
  `playerID` TEXT,
  `pointsWon` INTEGER,
  `pointsMax` INTEGER,
  `votesFirst` INTEGER
);
CREATE INDEX `AwardsShareManagers_awardID` ON `AwardsShareManagers` (`awardID`);
CREATE INDEX `AwardsShareManagers_yearID` ON `AwardsShareManagers` (`yearID`);
CREATE INDEX `AwardsShareManagers_lgID` ON `AwardsShareManagers` (`lgID`);
CREATE INDEX `AwardsShareManagers_playerID` ON `AwardsShareManagers` (`playerID`);
CREATE TABLE `AwardsSharePlayers` (
  `awardID` TEXT,
  `yearID` INTEGER,
  `lgID` TEXT,
  `playerID` TEXT,
  `pointsWon` INTEGER,
  `pointsMax` INTEGER,
  `votesFirst` INTEGER
);
CREATE INDEX `AwardsSharePlayers_awardID` ON `AwardsSharePlayers` (`awardID`);
CREATE INDEX `AwardsSharePlayers_yearID` ON `AwardsSharePlayers` (`yearID`);
CREATE INDEX `AwardsSharePlayers_lgID` ON `AwardsSharePlayers` (`lgID`);
CREATE INDEX `AwardsSharePlayers_playerID` ON `AwardsSharePlayers` (`playerID`);
CREATE TABLE `Batting` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `stint` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `G` INTEGER,
  `AB` INTEGER,
  `R` INTEGER,
  `H` INTEGER,
  `X2B` INTEGER,
  `X3B` INTEGER,
  `HR` INTEGER,
  `RBI` INTEGER,
  `SB` INTEGER,
  `CS` INTEGER,
  `BB` INTEGER,
  `SO` INTEGER,
  `IBB` INTEGER,
  `HBP` INTEGER,
  `SH` INTEGER,
  `SF` INTEGER,
  `GIDP` INTEGER
);
CREATE INDEX `Batting_playerID` ON `Batting` (`playerID`);
CREATE INDEX `Batting_yearID` ON `Batting` (`yearID`);
CREATE INDEX `Batting_teamID` ON `Batting` (`teamID`);
CREATE INDEX `Batting_lgID` ON `Batting` (`lgID`);
CREATE TABLE `BattingPost` (
  `yearID` INTEGER,
  `round` TEXT,
  `playerID` TEXT,
  `teamID` TEXT,
  `lgID` TEXT,
  `G` INTEGER,
  `AB` INTEGER,
  `R` INTEGER,
  `H` INTEGER,
  `X2B` INTEGER,
  `X3B` INTEGER,
  `HR` INTEGER,
  `RBI` INTEGER,
  `SB` INTEGER,
  `CS` INTEGER,
  `BB` INTEGER,
  `SO` INTEGER,
  `IBB` INTEGER,
  `HBP` INTEGER,
  `SH` INTEGER,
  `SF` INTEGER,
  `GIDP` INTEGER
);
CREATE INDEX `BattingPost_yearID` ON `BattingPost` (`yearID`);
CREATE INDEX `BattingPost_playerID` ON `BattingPost` (`playerID`);
CREATE INDEX `BattingPost_teamID` ON `BattingPost` (`teamID`);
CREATE INDEX `BattingPost_lgID` ON `BattingPost` (`lgID`);
CREATE TABLE `CollegePlaying` (
  `playerID` TEXT,
  `schoolID` TEXT,
  `yearID` INTEGER
);
CREATE INDEX `CollegePlaying_playerID` ON `CollegePlaying` (`playerID`);
CREATE INDEX `CollegePlaying_schoolID` ON `CollegePlaying` (`schoolID`);
CREATE INDEX `CollegePlaying_yearID` ON `CollegePlaying` (`yearID`);
CREATE TABLE `Fielding` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `stint` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `POS` TEXT,
  `G` INTEGER,
  `GS` INTEGER,
  `InnOuts` INTEGER,
  `PO` INTEGER,
  `A` INTEGER,
  `E` INTEGER,
  `DP` INTEGER,
  `PB` INTEGER,
  `WP` INTEGER,
  `SB` INTEGER,
  `CS` INTEGER,
  `ZR` INTEGER
);
CREATE INDEX `Fielding_playerID` ON `Fielding` (`playerID`);
CREATE INDEX `Fielding_yearID` ON `Fielding` (`yearID`);
CREATE INDEX `Fielding_teamID` ON `Fielding` (`teamID`);
CREATE INDEX `Fielding_lgID` ON `Fielding` (`lgID`);
CREATE TABLE `FieldingOF` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `stint` INTEGER,
  `Glf` INTEGER,
  `Gcf` INTEGER,
  `Grf` INTEGER
);
CREATE INDEX `FieldingOF_playerID` ON `FieldingOF` (`playerID`);
CREATE INDEX `FieldingOF_yearID` ON `FieldingOF` (`yearID`);
CREATE TABLE `FieldingOFsplit` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `stint` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `POS` TEXT,
  `G` INTEGER,
  `GS` INTEGER,
  `InnOuts` INTEGER,
  `PO` INTEGER,
  `A` INTEGER,
  `E` INTEGER,
  `DP` INTEGER,
  `PB` INTEGER,
  `WP` INTEGER,
  `SB` INTEGER,
  `CS` INTEGER,
  `ZR` INTEGER
);
CREATE INDEX `FieldingOFsplit_playerID` ON `FieldingOFsplit` (`playerID`);
CREATE INDEX `FieldingOFsplit_yearID` ON `FieldingOFsplit` (`yearID`);
CREATE INDEX `FieldingOFsplit_teamID` ON `FieldingOFsplit` (`teamID`);
CREATE INDEX `FieldingOFsplit_lgID` ON `FieldingOFsplit` (`lgID`);
CREATE TABLE `FieldingPost` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `round` TEXT,
  `POS` TEXT,
  `G` INTEGER,
  `GS` INTEGER,
  `InnOuts` INTEGER,
  `PO` INTEGER,
  `A` INTEGER,
  `E` INTEGER,
  `DP` INTEGER,
  `TP` INTEGER,
  `PB` INTEGER,
  `SB` INTEGER,
  `CS` INTEGER
);
CREATE INDEX `FieldingPost_playerID` ON `FieldingPost` (`playerID`);
CREATE INDEX `FieldingPost_yearID` ON `FieldingPost` (`yearID`);
CREATE INDEX `FieldingPost_teamID` ON `FieldingPost` (`teamID`);
CREATE INDEX `FieldingPost_lgID` ON `FieldingPost` (`lgID`);
CREATE TABLE `HallOfFame` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `votedBy` TEXT,
  `ballots` REAL,
  `needed` REAL,
  `votes` REAL,
  `inducted` TEXT,
  `category` TEXT,
  `needed_note` TEXT
);
CREATE INDEX `HallOfFame_playerID` ON `HallOfFame` (`playerID`);
CREATE INDEX `HallOfFame_yearID` ON `HallOfFame` (`yearID`);
CREATE TABLE `HomeGames` (
  `year.key` INTEGER,
  `league.key` TEXT,
  `team.key` TEXT,
  `park.key` TEXT,
  `span.first` TEXT,
  `span.last` TEXT,
  `games` INTEGER,
  `openings` INTEGER,
  `attendance` INTEGER
);
CREATE TABLE `LahmanData` (
  `file` TEXT,
  `class` TEXT,
  `nobs` REAL,
  `nvar` REAL,
  `title` TEXT
);
CREATE TABLE `Managers` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `inseason` INTEGER,
  `G` INTEGER,
  `W` INTEGER,
  `L` INTEGER,
  `rank` INTEGER,
  `plyrMgr` TEXT
);
CREATE INDEX `Managers_playerID` ON `Managers` (`playerID`);
CREATE INDEX `Managers_yearID` ON `Managers` (`yearID`);
CREATE INDEX `Managers_teamID` ON `Managers` (`teamID`);
CREATE INDEX `Managers_lgID` ON `Managers` (`lgID`);
CREATE TABLE `ManagersHalf` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `inseason` INTEGER,
  `half` INTEGER,
  `G` INTEGER,
  `W` INTEGER,
  `L` INTEGER,
  `rank` INTEGER
);
CREATE INDEX `ManagersHalf_playerID` ON `ManagersHalf` (`playerID`);
CREATE INDEX `ManagersHalf_yearID` ON `ManagersHalf` (`yearID`);
CREATE INDEX `ManagersHalf_teamID` ON `ManagersHalf` (`teamID`);
CREATE INDEX `ManagersHalf_lgID` ON `ManagersHalf` (`lgID`);
CREATE TABLE `Parks` (
  `park.alias` TEXT,
  `park.key` TEXT,
  `park.name` TEXT,
  `city` TEXT,
  `state` TEXT,
  `country` TEXT
);
CREATE TABLE `People` (
  `playerID` TEXT,
  `birthYear` INTEGER,
  `birthMonth` INTEGER,
  `birthDay` INTEGER,
  `birthCity` TEXT,
  `birthCountry` TEXT,
  `birthState` TEXT,
  `deathYear` INTEGER,
  `deathMonth` INTEGER,
  `deathDay` INTEGER,
  `deathCountry` TEXT,
  `deathState` TEXT,
  `deathCity` TEXT,
  `nameFirst` TEXT,
  `nameLast` TEXT,
  `nameGiven` TEXT,
  `weight` INTEGER,
  `height` INTEGER,
  `bats` TEXT,
  `throws` TEXT,
  `debut` TEXT,
  `bbrefID` TEXT,
  `finalGame` TEXT,
  `retroID` TEXT,
  `deathDate` REAL,
  `birthDate` REAL
);
CREATE INDEX `People_playerID` ON `People` (`playerID`);
CREATE INDEX `People_bbrefID` ON `People` (`bbrefID`);
CREATE INDEX `People_retroID` ON `People` (`retroID`);
CREATE TABLE `Pitching` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `stint` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `W` INTEGER,
  `L` INTEGER,
  `G` INTEGER,
  `GS` INTEGER,
  `CG` INTEGER,
  `SHO` INTEGER,
  `SV` INTEGER,
  `IPouts` INTEGER,
  `H` INTEGER,
  `ER` INTEGER,
  `HR` INTEGER,
  `BB` INTEGER,
  `SO` INTEGER,
  `BAOpp` REAL,
  `ERA` REAL,
  `IBB` INTEGER,
  `WP` INTEGER,
  `HBP` INTEGER,
  `BK` INTEGER,
  `BFP` INTEGER,
  `GF` INTEGER,
  `R` INTEGER,
  `SH` INTEGER,
  `SF` INTEGER,
  `GIDP` INTEGER
);
CREATE INDEX `Pitching_playerID` ON `Pitching` (`playerID`);
CREATE INDEX `Pitching_yearID` ON `Pitching` (`yearID`);
CREATE INDEX `Pitching_teamID` ON `Pitching` (`teamID`);
CREATE INDEX `Pitching_lgID` ON `Pitching` (`lgID`);
CREATE TABLE `PitchingPost` (
  `playerID` TEXT,
  `yearID` INTEGER,
  `round` TEXT,
  `teamID` TEXT,
  `lgID` TEXT,
  `W` INTEGER,
  `L` INTEGER,
  `G` INTEGER,
  `GS` INTEGER,
  `CG` INTEGER,
  `SHO` INTEGER,
  `SV` INTEGER,
  `IPouts` INTEGER,
  `H` INTEGER,
  `ER` INTEGER,
  `HR` INTEGER,
  `BB` INTEGER,
  `SO` INTEGER,
  `BAOpp` REAL,
  `ERA` REAL,
  `IBB` INTEGER,
  `WP` INTEGER,
  `HBP` INTEGER,
  `BK` INTEGER,
  `BFP` INTEGER,
  `GF` INTEGER,
  `R` INTEGER,
  `SH` INTEGER,
  `SF` INTEGER,
  `GIDP` INTEGER
);
CREATE INDEX `PitchingPost_playerID` ON `PitchingPost` (`playerID`);
CREATE INDEX `PitchingPost_yearID` ON `PitchingPost` (`yearID`);
CREATE INDEX `PitchingPost_teamID` ON `PitchingPost` (`teamID`);
CREATE INDEX `PitchingPost_lgID` ON `PitchingPost` (`lgID`);
CREATE TABLE `Salaries` (
  `yearID` INTEGER,
  `teamID` TEXT,
  `lgID` TEXT,
  `playerID` TEXT,
  `salary` INTEGER
);
CREATE INDEX `Salaries_yearID` ON `Salaries` (`yearID`);
CREATE INDEX `Salaries_teamID` ON `Salaries` (`teamID`);
CREATE INDEX `Salaries_lgID` ON `Salaries` (`lgID`);
CREATE INDEX `Salaries_playerID` ON `Salaries` (`playerID`);
CREATE TABLE `Schools` (
  `schoolID` TEXT,
  `name_full` TEXT,
  `city` TEXT,
  `state` TEXT,
  `country` TEXT
);
CREATE INDEX `Schools_schoolID` ON `Schools` (`schoolID`);
CREATE TABLE `SeriesPost` (
  `yearID` INTEGER,
  `round` TEXT,
  `teamIDwinner` TEXT,
  `lgIDwinner` TEXT,
  `teamIDloser` TEXT,
  `lgIDloser` TEXT,
  `wins` INTEGER,
  `losses` INTEGER,
  `ties` INTEGER
);
CREATE INDEX `SeriesPost_yearID` ON `SeriesPost` (`yearID`);
CREATE TABLE `Teams` (
  `yearID` INTEGER,
  `lgID` TEXT,
  `teamID` TEXT,
  `franchID` TEXT,
  `divID` TEXT,
  `Rank` INTEGER,
  `G` INTEGER,
  `Ghome` INTEGER,
  `W` INTEGER,
  `L` INTEGER,
  `DivWin` TEXT,
  `WCWin` TEXT,
  `LgWin` TEXT,
  `WSWin` TEXT,
  `R` INTEGER,
  `AB` INTEGER,
  `H` INTEGER,
  `X2B` INTEGER,
  `X3B` INTEGER,
  `HR` INTEGER,
  `BB` INTEGER,
  `SO` INTEGER,
  `SB` INTEGER,
  `CS` INTEGER,
  `HBP` INTEGER,
  `SF` INTEGER,
  `RA` INTEGER,
  `ER` INTEGER,
  `ERA` REAL,
  `CG` INTEGER,
  `SHO` INTEGER,
  `SV` INTEGER,
  `IPouts` INTEGER,
  `HA` INTEGER,
  `HRA` INTEGER,
  `BBA` INTEGER,
  `SOA` INTEGER,
  `E` INTEGER,
  `DP` INTEGER,
  `FP` REAL,
  `name` TEXT,
  `park` TEXT,
  `attendance` INTEGER,
  `BPF` INTEGER,
  `PPF` INTEGER,
  `teamIDBR` TEXT,
  `teamIDlahman45` TEXT,
  `teamIDretro` TEXT
);
CREATE INDEX `Teams_yearID` ON `Teams` (`yearID`);
CREATE INDEX `Teams_lgID` ON `Teams` (`lgID`);
CREATE INDEX `Teams_teamID` ON `Teams` (`teamID`);
CREATE INDEX `Teams_franchID` ON `Teams` (`franchID`);
CREATE INDEX `Teams_divID` ON `Teams` (`divID`);
CREATE TABLE `TeamsFranchises` (
  `franchID` TEXT,
  `franchName` TEXT,
  `active` TEXT,
  `NAassoc` TEXT
);
CREATE INDEX `TeamsFranchises_franchID` ON `TeamsFranchises` (`franchID`);
CREATE TABLE `TeamsHalf` (
  `yearID` INTEGER,
  `lgID` TEXT,
  `teamID` TEXT,
  `Half` INTEGER,
  `divID` TEXT,
  `DivWin` TEXT,
  `Rank` INTEGER,
  `G` INTEGER,
  `W` INTEGER,
  `L` INTEGER
);
CREATE INDEX `TeamsHalf_yearID` ON `TeamsHalf` (`yearID`);
CREATE INDEX `TeamsHalf_lgID` ON `TeamsHalf` (`lgID`);
CREATE INDEX `TeamsHalf_teamID` ON `TeamsHalf` (`teamID`);
CREATE INDEX `TeamsHalf_divID` ON `TeamsHalf` (`divID`);</code></pre>
</div>
</div>
</div>
</section>
<section id="dbplyr-6" class="slide level2 scrollable">
<h2>dbplyr</h2>
<p>List the 5 modern-era managers with the highest winning percentages. (Define modern-era as managed over 1000 games post 1920.)</p>
<div class="smaller">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;SQL&gt;
SELECT `nameGiven` || ' ' || `nameLast` AS `name`, `W`, `L`, `G`, `record`
FROM (
  SELECT `q01`.*, RANK() OVER (ORDER BY `record` DESC) AS `col01`
  FROM (
    SELECT
      `LHS`.*,
      `birthYear`,
      `birthMonth`,
      `birthDay`,
      `birthCity`,
      `birthCountry`,
      `birthState`,
      `deathYear`,
      `deathMonth`,
      `deathDay`,
      `deathCountry`,
      `deathState`,
      `deathCity`,
      `nameFirst`,
      `nameLast`,
      `nameGiven`,
      `weight`,
      `height`,
      `bats`,
      `throws`,
      `debut`,
      `bbrefID`,
      `finalGame`,
      `retroID`,
      `deathDate`,
      `birthDate`
    FROM (
      SELECT `q01`.*, `W` / (`G` + 0.0) AS `record`
      FROM (
        SELECT `q01`.*, `W` + `L` AS `G`
        FROM (
          SELECT `playerID`, SUM(`W`) AS `W`, SUM(`L`) AS `L`
          FROM (
            SELECT `Managers`.*
            FROM `Managers`
            WHERE (`yearID` &gt;= 1920.0)
          ) AS `q01`
          GROUP BY `playerID`
        ) AS `q01`
      ) AS `q01`
      WHERE (`G` &gt; 1000.0)
    ) AS `LHS`
    INNER JOIN `People`
      ON (`LHS`.`playerID` = `People`.`playerID`)
  ) AS `q01`
) AS `q01`
WHERE (`col01` &lt;= 5)</code></pre>
</div>
</div>
</div>
</section>
<section id="dbplyr-7" class="slide level2 scrollable">
<h2>dbplyr</h2>
<p>Add <code>|&gt; explain()</code> to see the DB internal <em>query plan</em>:</p>
<div class="smaller">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;SQL&gt;
SELECT `nameGiven` || ' ' || `nameLast` AS `name`, `W`, `L`, `G`, `record`
FROM (
  SELECT `q01`.*, RANK() OVER (ORDER BY `record` DESC) AS `col01`
  FROM (
    SELECT
      `LHS`.*,
      `birthYear`,
      `birthMonth`,
      `birthDay`,
      `birthCity`,
      `birthCountry`,
      `birthState`,
      `deathYear`,
      `deathMonth`,
      `deathDay`,
      `deathCountry`,
      `deathState`,
      `deathCity`,
      `nameFirst`,
      `nameLast`,
      `nameGiven`,
      `weight`,
      `height`,
      `bats`,
      `throws`,
      `debut`,
      `bbrefID`,
      `finalGame`,
      `retroID`,
      `deathDate`,
      `birthDate`
    FROM (
      SELECT `q01`.*, `W` / (`G` + 0.0) AS `record`
      FROM (
        SELECT `q01`.*, `W` + `L` AS `G`
        FROM (
          SELECT `playerID`, SUM(`W`) AS `W`, SUM(`L`) AS `L`
          FROM (
            SELECT `Managers`.*
            FROM `Managers`
            WHERE (`yearID` &gt;= 1920.0)
          ) AS `q01`
          GROUP BY `playerID`
        ) AS `q01`
      ) AS `q01`
      WHERE (`G` &gt; 1000.0)
    ) AS `LHS`
    INNER JOIN `People`
      ON (`LHS`.`playerID` = `People`.`playerID`)
  ) AS `q01`
) AS `q01`
WHERE (`col01` &lt;= 5)

&lt;PLAN&gt;
   id parent notused                                                 detail
1   2      0       0                                         CO-ROUTINE q01
2   5      2       0                                CO-ROUTINE (subquery-8)
3   7      5       0                                         CO-ROUTINE q01
4  14      7     142            SCAN Managers USING INDEX Managers_playerID
5  55      5      82                                               SCAN q01
6  62      5      42 SEARCH People USING INDEX People_playerID (playerID=?)
7 120      5       0                           USE TEMP B-TREE FOR ORDER BY
8 163      2      81                                      SCAN (subquery-8)
9 285      0      81                                               SCAN q01</code></pre>
</div>
</div>
</div>
<p>Beyond this class to interpret, but in general use of <code>INDEX</code> yields good performance. Take DB classes for <em>much more</em></p>
</section>
<section id="dbplyr-8" class="slide level2 scrollable">
<h2>dbplyr</h2>
<p>List the 5 modern-era managers with the highest winning percentages. (Define modern-era as managed over 1000 games post 1920.)</p>
<div class="smaller">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 5
  name                          W     L     G record
  &lt;chr&gt;                     &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
1 David Ray Roberts           851   507  1358  0.627
2 Joseph Vincent McCarthy    2125  1333  3458  0.615
3 Miller James Huggins        927   597  1524  0.608
4 William Harold Southworth  1044   704  1748  0.597
5 Aaron John Boone            603   428  1031  0.585</code></pre>
</div>
</div>
</div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: '80%',

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/michael-weylandt\.com\/STA9750\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>