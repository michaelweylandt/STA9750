<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>STA 9750 Mini-Project #01: Welcome to the Commission to Analyze Taxpayer Spending (CATS) – STA 9750</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-7a426326b279d3ba9cc0818763c3c226.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../../site_libs/datatables-binding-0.33/datatables.js"></script>
<script src="../../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="../../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">STA 9750</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../.././syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../.././preassignments.html"> 
<span class="menu-text">Pre-Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../.././labs.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../.././miniprojects.html"> 
<span class="menu-text">Mini Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../.././project.html"> 
<span class="menu-text">Course Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../.././resources.html"> 
<span class="menu-text">Additional Resources and Course Policies</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../.././objectives.html"> 
<span class="menu-text">Learning Objectives</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-prior-offerings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Prior Offerings</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-prior-offerings">    
        <li>
    <a class="dropdown-item" href="../../.././archive/AY-2024-SPRING/">
 <span class="dropdown-text">Spring 2024</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../.././archive/AY-2024-FALL/">
 <span class="dropdown-text">Fall 2024</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#due-dates" id="toc-due-dates" class="nav-link active" data-scroll-target="#due-dates">Due Dates</a></li>
  <li><a href="#welcome-to-mini-projects" id="toc-welcome-to-mini-projects" class="nav-link" data-scroll-target="#welcome-to-mini-projects">Welcome to STA 9750 Mini Projects!</a>
  <ul class="collapse">
  <li><a href="#rubric" id="toc-rubric" class="nav-link" data-scroll-target="#rubric">Rubric</a></li>
  <li><a href="#submission-instructions" id="toc-submission-instructions" class="nav-link" data-scroll-target="#submission-instructions">Submission Instructions</a></li>
  </ul></li>
  <li><a href="#mini-project" id="toc-mini-project" class="nav-link" data-scroll-target="#mini-project">Mini-Project #01: Welcome to the Commission to Analyze Taxpayer Spending (CATS)</a>
  <ul class="collapse">
  <li><a href="#acquiring-payroll-data" id="toc-acquiring-payroll-data" class="nav-link" data-scroll-target="#acquiring-payroll-data">Acquiring Payroll Data</a></li>
  <li><a href="#importing-data-into-r-and-preparing-for-analysis" id="toc-importing-data-into-r-and-preparing-for-analysis" class="nav-link" data-scroll-target="#importing-data-into-r-and-preparing-for-analysis">Importing Data into <code>R</code> and Preparing for Analysis</a></li>
  <li><a href="#initial-exploration" id="toc-initial-exploration" class="nav-link" data-scroll-target="#initial-exploration">Initial Exploration</a></li>
  <li><a href="#policy-analysis" id="toc-policy-analysis" class="nav-link" data-scroll-target="#policy-analysis">Policy Analysis</a></li>
  </ul></li>
  <li><a href="#deliverable-policy-analysis-white-paper" id="toc-deliverable-policy-analysis-white-paper" class="nav-link" data-scroll-target="#deliverable-policy-analysis-white-paper">Deliverable: Policy Analysis “White Paper”</a></li>
  <li><a href="#extra-credit" id="toc-extra-credit" class="nav-link" data-scroll-target="#extra-credit">Extra Credit</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/archive/AY-2024-SPRING/miniprojects/mini01.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/archive/AY-2024-SPRING/miniprojects/mini01.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">STA 9750 Mini-Project #01: Welcome to the Commission to Analyze Taxpayer Spending (CATS)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="due-dates" class="level3">
<h3 class="anchored" data-anchor-id="due-dates">Due Dates</h3>
<ul>
<li>Released to Students: 2025-02-13</li>
<li><strong>Initial Submission: 2025-03-05 11:45pm ET on GitHub and Brightspace</strong></li>
<li><strong>Peer Feedback:</strong>
<ul>
<li>Peer Feedback Assigned: 2025-03-06 on GitHub</li>
<li><strong>Peer Feedback Due: 2025-03-12 11:45pm ET on GitHub</strong></li>
</ul></li>
</ul>
<p><em>Estimated Time to Complete: 9 Hours</em></p>
<p><em>Estimated Time for Peer Feedback: 1 Hour</em></p>
</section>
<section id="welcome-to-mini-projects" class="level2">
<h2 class="anchored" data-anchor-id="welcome-to-mini-projects">Welcome to STA 9750 Mini Projects!</h2>
<p>In the STA 9750 Mini-Projects, you will perform basic data analyses intended to model best practices for your course final project. (Note, however, that these are <em>mini</em>-projects; your final course project is expected to be far more extensive than any single MP.)</p>
<p>For purposes of MPs, we are dividing the basic data analytic workflow into several major stages:</p>
<ul>
<li>Data Ingest and Cleaning: Given a single data source, read it into <code>R</code> and transform it to a reasonably useful standardized format.</li>
<li>Data Combination and Alignment: Combine multiple data sources to enable insights not possible from a single source.</li>
<li>Descriptive Statistical Analysis: Take a data table and compute informative summary statistics from both the entire population and relevant subgroups</li>
<li>Data Visualization: Generate insightful data visualizations to spur insights not attainable from point statistics</li>
<li>Inferential Statistical Analysis and Modeling: Develop relevant predictive models and statistical analyses to generate insights about the <em>underlying population</em> and not simply the data at hand.</li>
</ul>
<p>In this course, our primary focus is on the first four stages: you will take other courses that develop analytical and modeling techniques for a variety of data types. As we progress through the course, you will eventually be responsible for the first four steps. Specifically, you are responsible for the following stages of each mini-project:</p>
<table class="table-hover caption-top table">
<caption>Students’ Responsibilities in Mini-Project Analyses</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 17%">
<col style="width: 22%">
<col style="width: 27%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">Ingest and Cleaning</th>
<th style="text-align: center;">Combination and Alignment</th>
<th style="text-align: center;">Descriptive Statistical Analysis</th>
<th style="text-align: center;">Visualization</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #01</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #02</strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Mini-Project #03</strong></td>
<td style="text-align: center;"><strong>½</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Mini-Project #04</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
<td style="text-align: center;"><strong>✓</strong></td>
</tr>
</tbody>
</table>
<p>In early stages of the course, such as this MP, I will ‘scaffold’ much of the analysis for you, leaving only those stages we have discussed in class for you to fill in. As the course progresses, the mini-projects will be more self-directed and results less standardized.</p>
<section id="rubric" class="level3">
<h3 class="anchored" data-anchor-id="rubric">Rubric</h3>
<p>STA 9750 Mini-Projects are evaluated using <em>peer grading</em> with <em>meta-review</em> by the course GTAs. Specifically, variants of the following rubric will be used for the mini-projects:</p>
<table class="caption-top table">
<caption>Mini-Project Grading Rubric</caption>
<colgroup>
<col style="width: 2%">
<col style="width: 23%">
<col style="width: 19%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th>Course Element</th>
<th>Excellent (9-10)</th>
<th>Great (7-8)</th>
<th>Good (5-6)</th>
<th>Adequate (3-4)</th>
<th>Needs Improvement (1-2)</th>
<th>Extra Credit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Written Communication</td>
<td>Report is well-written and flows naturally. Motivation for key steps is clearly explained to reader without excessive detail. Key findings are highlighted and appropriately given context.</td>
<td>Report has no grammatical or writing issues. Writing is accessible and flows naturally. Key findings are highlighted, but lack suitable motivation and context.</td>
<td>Report has no grammatical or writing issues. Key findings are present but insufficiently highlighted.</td>
<td>Writing is intelligible, but has some grammatical errors. Key findings are obscured.</td>
<td>Report exhibits significant weakness in written communication. Key points are difficult to discern.</td>
<td>Report includes extra context beyond instructor provided information.</td>
</tr>
<tr class="even">
<td>Project Skeleton</td>
<td>Code completes all instructor-provided tasks correctly</td>
<td>Response to one instructor provided task is skipped, incorrect, or otherwise incomplete.</td>
<td>Responses to two instructor provided tasks are skipped, incorrect, or otherwise incomplete.</td>
<td>Response to three instructor provided tasks are skipped, incorrect, or otherwise incomplete.</td>
<td>Less than half of the instructor-provided tasks were successfully completed.</td>
<td>Report exhibits particularly creative insights beyond instructor specifications.</td>
</tr>
<tr class="odd">
<td>Formatting &amp; Display</td>
<td>Tables have well-formatted column names, suitable numbers of digits, and attractive presentation. Table has a suitable caption.</td>
<td>Column names and digits are well-chosen, but formatting could be improved.</td>
<td>Bad column names (opaque variable names or other undefined acronyms)</td>
<td>Unfiltered ‘data dump’ instead of curated table.</td>
<td>No tables.</td>
<td>Report includes one or more high-quality graphics (created using <code>R</code>).</td>
</tr>
<tr class="even">
<td>Code Quality</td>
<td><p>Code is (near) flawless.</p>
<p>Code passes all <code>styler</code> and <code>lintr</code> type analyses without issue.</p></td>
<td>Comments give context of the analysis, not simply defining functions used in a particular line.</td>
<td>Code has well-chosen variable names and basic comments.</td>
<td>Code executes properly, but is difficult to read.</td>
<td>Code fails to execute properly.</td>
<td>Code takes advantage of advanced <code>Quarto</code> features to improve presentation of results.</td>
</tr>
<tr class="odd">
<td>Data Preparation</td>
<td>Automatic (10/10). Out of scope for this mini-project</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Report modifies instructor-provided import code to use additional columns or data sources in a way that creates novel insights.</td>
</tr>
</tbody>
</table>
<p>Note that this rubric is designed with copious opportunities for extra credit if students go <em>above and beyond</em> the instructor-provided scaffolding. Students pursuing careers in data analytics are strongly encouraged to go beyond the strict ambit of the mini-projects to i) further refine their skills; ii) learn additional techniques that can be used in the final course project; and iii) develop a more impressive professional portfolio.</p>
<p>Because students are encouraged to use STA 9750 mini-projects as the basis for a professional portfolio, the basic skeleton of each project will be released under a fairly permissive usage license. Take advantage of it!</p>
</section>
<section id="submission-instructions" class="level3">
<h3 class="anchored" data-anchor-id="submission-instructions">Submission Instructions</h3>
<p>After completing the analysis, write up your findings, <em>showing all of your code</em>, using a dynamic <code>quarto</code> document and post it to your course repository. The <code>qmd</code> file should be named <code>mp01.qmd</code> so the rendered document can be found at <code>docs/mp01.html</code> in the student’s repository and served at the URL:<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<blockquote class="blockquote">
<p><code>https://&lt;GITHUB_ID&gt;.github.io/STA9750-2025-FALL/mp01.html</code></p>
</blockquote>
<p>Once you confirm this website works (substituting <code>&lt;GITHUB_ID&gt;</code> for the actual GitHub username provided to the professor in <a href="./mini00.html">MP#00</a> of course), open a new issue at</p>
<blockquote class="blockquote">
<p><code>https://github.com/michaelweylandt/STA9750-2025-FALL/issues/new</code> .</p>
</blockquote>
<p>Title the issue <code>STA 9750 &lt;GITHUB_ID&gt; MiniProject #01</code> and fill in the following text for the issue:</p>
<div id="submission-text">
<pre><code>Hi @michaelweylandt!

I've uploaded my work for MiniProject #**01** - check it out!

https://&lt;GITHUB_ID&gt;.github.io/STA9750-2025-FALL/mp01.html</code></pre>
</div>
<p>Once the submission deadline passes, the instructor will tag classmates for peer feedback in this issue thread.</p>
<p><em>Additionally</em>, a PDF export of this report should be submitted on Brightspace. To create a PDF from the uploaded report, simply use your browser’s ‘Print to PDF’ functionality.</p>
<p><strong>NB</strong>: The analysis outline below specifies key <em>tasks</em> you need to perform within your write up. Your peer evaluators will check that you complete these. You are encouraged to do extra analysis, but the bolded <strong>Tasks</strong> are <em>mandatory</em>.</p>
<p><strong>NB</strong>: Your final submission should look like a <em>report</em>, not simply a list of facts answering questions. Add introductions, conclusions, and your own commentary. You should be practicing both raw <em>coding</em> skills and written <em>communication</em> in all mini-projects. There is little value in data points stated without context or motivation.</p>
</section>
</section>
<section id="mini-project" class="level2">
<h2 class="anchored" data-anchor-id="mini-project">Mini-Project #01: Welcome to the Commission to Analyze Taxpayer Spending (CATS)</h2>
<p>Congratulations! You have just been appointed as a senior technical analyst working with New York City’s new <em>Commission to Analyze Taxpayer Spending</em> (CATS). As a technical analyst, you are tasked with helping the Commissioners understand New York City’s expenses and identifying opportunities to spend taxyper monies more effectively. Specifically, the Commission chair, Mr.&nbsp;Keno Slum, has asked you to analyze the City payroll and to identify instances in which senior agency officials make significantly more than rank-and-file city employees.</p>
<p>In this mini-project, you will analyze City payroll data and write a report highlighting possible savings to be submitted to the CATS Commissioners. In this mini-project, you will:</p>
<ol type="1">
<li>Begin to work with <a href="https://opendata.cityofnewyork.us/">NYC Open Data</a></li>
<li>Practice Use of <code>dplyr</code> for analysis of tabular data</li>
<li>Practice Use of <code>quarto</code> and Reproducible Research Tools for Effective Communication of Data Analysis Results</li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled" title="Writing Requirements">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Writing Requirements
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recall that you are <em>evaluated</em> on writing and communication in these Mini-Projects. You are required write a report in the prescribed style, here an internal policy briefing ‘white paper’. A submission that performs the instructor-specified tasks, but does not write and give appropriate context and commentary will score very poorly on the relevant rubric elements.</p>
<p>In particular, if a submission is not in “white paper” style, peer evaluators should judge it to have “Good” quality Written Communication (at best) as key findings are not conveyed appropriately.</p>
<p>Quarto’s <a href="https://quarto.org/docs/output-formats/html-code.html#folding-code">cold folding</a> functionality is useful for “hiding” code so that it doesn’t break the flow of your writing.</p>
<p>You can also make use of <a href="https://quarto.org/docs/authoring/contents.html">Quarto’s <code>contents</code> shortcode</a> to present code and findings in an order other than how the code should be executed. This is particularly useful if you want to include a figure or table in an “Executive Summary” at the top of your submission.</p>
</div>
</div>
<section id="acquiring-payroll-data" class="level3">
<h3 class="anchored" data-anchor-id="acquiring-payroll-data">Acquiring Payroll Data</h3>
<p>The following code will download the city payroll data and create a file <code>nyc_payroll_export.csv</code> in a <code>data/mp01</code> directory. If this doesn’t work for whatever reason, you can download the data directly from <a href="https://data.cityofnewyork.us/City-Government/Citywide-Payroll-Data-Fiscal-Year-/k397-673e/about_data">NYC OpenData</a>, though you will need to make sure it is in a suitable location and format for use in this mini-project.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">"data/mp01/nyc_payroll_export.csv"</span>)){</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="st">"data/mp01"</span>, <span class="at">showWarnings=</span><span class="cn">FALSE</span>, <span class="at">recursive=</span><span class="cn">TRUE</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    ENDPOINT <span class="ot">&lt;-</span> <span class="st">"https://data.cityofnewyork.us/resource/k397-673e.json"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"httr2"</span>)) <span class="fu">install.packages</span>(<span class="st">"httr2"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(httr2)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"jsonlite"</span>)) <span class="fu">install.packages</span>(<span class="st">"jsonlite"</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(jsonlite)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"dplyr"</span>)) <span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(dplyr)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"readr"</span>)) <span class="fu">install.packages</span>(<span class="st">"readr"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(readr)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    BATCH_SIZE <span class="ot">&lt;-</span> <span class="dv">50000</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    OFFSET     <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    END_OF_EXPORT <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    ALL_DATA <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span>(<span class="sc">!</span>END_OF_EXPORT){</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">"Requesting items"</span>, OFFSET, <span class="st">"to"</span>, BATCH_SIZE <span class="sc">+</span> OFFSET, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        req <span class="ot">&lt;-</span> <span class="fu">request</span>(ENDPOINT) <span class="sc">|&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">req_url_query</span>(<span class="st">`</span><span class="at">$limit</span><span class="st">`</span>  <span class="ot">=</span> BATCH_SIZE, </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">$offset</span><span class="st">`</span> <span class="ot">=</span> OFFSET)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        resp <span class="ot">&lt;-</span> <span class="fu">req_perform</span>(req)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        batch_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">resp_body_string</span>(resp))</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        ALL_DATA <span class="ot">&lt;-</span> <span class="fu">c</span>(ALL_DATA, <span class="fu">list</span>(batch_data))</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">NROW</span>(batch_data) <span class="sc">!=</span> BATCH_SIZE){</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>            END_OF_EXPORT <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>            <span class="fu">cat</span>(<span class="st">"End of Data Export Reached</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>            OFFSET <span class="ot">&lt;-</span> OFFSET <span class="sc">+</span> BATCH_SIZE</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    ALL_DATA <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(ALL_DATA)</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Data export complete:"</span>, <span class="fu">NROW</span>(ALL_DATA), <span class="st">"rows and"</span>, <span class="fu">NCOL</span>(ALL_DATA), <span class="st">"columns."</span>)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">write_csv</span>(ALL_DATA, <span class="st">"data/mp01/nyc_payroll_export.csv"</span>)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You do not (yet) need to understand the code above, so please use the course discussion board if you have trouble getting it working.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 1: Data Acquisition">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 1: Data Acquisition
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using the code above, acquire the latest NYC Payroll Data.</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="Do Not `git add` Data Files">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Do Not <code>git add</code> Data Files
</div>
</div>
<div class="callout-body-container callout-body">
<p>Make sure that <code>git</code> is set to ignore data files, such as the one created above. Check the <code>git</code> pane in <code>RStudio</code> and make sure that <code>nyc_payroll_export.csv</code> does not appear. (If you set up your <code>.gitignore</code> file correctly in <a href="./mini00.html">MP#00</a>, it should already be ignored.) If it is appearing, you may need to edit your <code>.gitignore</code> file.</p>
<p>Removing a large data file from <code>git</code> is possible, but difficult. Don’t get into a bad state!</p>
</div>
</div>
</section>
<section id="importing-data-into-r-and-preparing-for-analysis" class="level3">
<h3 class="anchored" data-anchor-id="importing-data-into-r-and-preparing-for-analysis">Importing Data into <code>R</code> and Preparing for Analysis</h3>
<p>Before we can analyze this data, we need to get it into <code>R</code> and in a suitable format. The <code>read_csv</code> function from the <code>readr</code> package can be used to read <code>csv</code> files into <code>R</code> (imagine that!). The above download code will handle most of the irregularities in the city data,<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> so we only need to make a few changes before beginning our analysis. In particular, let’s change some of the string columns to more conventional punctuation. The <code>str_to_title</code> function from the <code>stringr</code> package isn’t <em>perfect</em> (name capitalization rules can be rather idiosyncratic), but it will get us pretty close.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 2: Data Import and Preparation">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 2: Data Import and Preparation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Read your data into <code>R</code> using the <code>read_csv</code> function from the <code>readr</code> package. Before continuing, use a <code>mutate</code> command and the <code>str_to_title</code> function from the <code>stringr</code> package to convert the following columns to more conventional formatting.</p>
<ul>
<li>Agency Name</li>
<li>Last Name</li>
<li>First Name</li>
<li>Work Location (Borough)</li>
<li>Title / Job Description</li>
<li>Leave Status</li>
</ul>
</div>
</div>
<p>It is good practice to always visually check your data to make sure it is properly formatting. You can use the <code>glimpse</code> function for a quick look here. We will use more refined formatting below.</p>
</section>
<section id="initial-exploration" class="level3">
<h3 class="anchored" data-anchor-id="initial-exploration">Initial Exploration</h3>
<section id="identifying-individual-records" class="level4">
<h4 class="anchored" data-anchor-id="identifying-individual-records">Identifying Individual Records</h4>
<p>Any time you are analyzing a new data set, you should begin by making sure you understand what the relevant columns are. In this case, we have basic descriptions of each column from the <a href="https://data.cityofnewyork.us/City-Government/Citywide-Payroll-Data-Fiscal-Year-/k397-673e/about_data">data page</a>. We seem, however, to lack a few things you would normally want in a data set like this: in particular, we don’t have a unique ID for employees (a “primary key” in database parlance). This will make it harder for us to track individuals across years or across agencies (if they have two jobs at different agencies in the same fiscal year); we can approximate a unique identifier with First+Middle+Last, but it won’t be perfect.</p>
<p>Let’s begin by reviewing the career of the current mayor, <strong>Eric L. Adams</strong>. Use a combination of <code>filter</code>, <code>rename</code>, <code>arrange</code> to create a table like the following. (You may also need to use <code>group_by</code> and <code>summarize</code>.)</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Fiscal Year</th>
<th>Position</th>
<th>Agency</th>
<th>Total Salary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2020</td>
<td>Game Keeper</td>
<td>Parks and Recreation</td>
<td>15000</td>
</tr>
<tr class="even">
<td>2021</td>
<td>Fish Sorter</td>
<td>Environmental Protection</td>
<td>25000</td>
</tr>
<tr class="odd">
<td>2022</td>
<td>Mayor</td>
<td>Office of the Mayor</td>
<td>35000</td>
</tr>
<tr class="even">
<td>2023</td>
<td>Hamburgler</td>
<td>McDonald’s on 23rd</td>
<td>20000</td>
</tr>
</tbody>
</table>
<p>(Obviously, these numbers and details are not correct.) Note that the Mayoral term does not line up with the City’s fiscal year, so you can choose how best to combine years in which Mr.&nbsp;Adams held more than one job. Once you have created the career table for Mr.&nbsp;Adams, you can use the <code>DT</code> package to create an attractive visualization of your results.</p>
<p>For example,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>tbl_txt <span class="ot">&lt;-</span> <span class="st">"</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="st">Fiscal Year, Position, Agency, Total Salary</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="st">2020,Game Keeper, Parks and Recreation, 15000</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="st">2021, Fish Sorter, Environmental Protection, 25000</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="st">2022, Mayor, Office of the Mayor, 35000</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="st">2023, Hamburgler, McDonald's on 23rd,20000"</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(tbl_txt) <span class="sc">|&gt;</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Total Salary</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">dollar</span>(<span class="st">`</span><span class="at">Total Salary</span><span class="st">`</span>)) <span class="sc">|&gt;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">datatable</span>(<span class="at">options=</span><span class="fu">list</span>(<span class="at">searching=</span><span class="cn">FALSE</span>, </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                           <span class="at">paging=</span><span class="cn">FALSE</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                           <span class="at">info=</span><span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-70193a6309c7ff71098f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-70193a6309c7ff71098f">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],[2020,2021,2022,2023],["Game Keeper","Fish Sorter","Mayor","Hamburgler"],["Parks and Recreation","Environmental Protection","Office of the Mayor","McDonald's on 23rd"],["$15,000","$25,000","$35,000","$20,000"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Fiscal Year<\/th>\n      <th>Position<\/th>\n      <th>Agency<\/th>\n      <th>Total Salary<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"paging":false,"info":false,"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Fiscal Year","targets":1},{"name":"Position","targets":2},{"name":"Agency","targets":3},{"name":"Total Salary","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The <a href="https://rstudio.github.io/DT/"><code>DT</code> package</a> wraps the Javascript <a href="https://datatables.net/"><code>datatables</code> library</a> to to provide interactive tables. This library has <em>many</em> options to control formatting. Later in this course, you will also counter the <a href="https://gt.rstudio.com/"><code>gt</code> package</a> to create complex tables natively in <code>R</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 3: Create an Employee Salary Table">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 3: Create an Employee Salary Table
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create an employee salary table for <strong>Eric L. Adams</strong> similar to that shown above, but with real salary and employment records.</p>
</div>
</div>
</section>
<section id="calculating-aggregate-salaries" class="level4">
<h4 class="anchored" data-anchor-id="calculating-aggregate-salaries">Calculating Aggregate Salaries</h4>
<p>For high-ranking officials like Mayor Adams, their total compensation is a fixed salary. For other NYC employees, total compensation is computed using their hourly wage and the total hours worked (both regular and overtime). As a general rule, overtime is paid at 1.5x premium, so an employee who worked 40 hours of scheduled time and 20 hours of overtime with a base pay of $25 per hour, will be paid:</p>
<p><span class="math display">\[ \$25 * (40 + 20 * 1.5) = \$1750 \]</span></p>
<p>Other employees are paid a “day rate” - that is, a fixed amount per day worked. For purposes of this exercise, you can covert hours worked to days at a fixed rate of 7.5 hours per day. That is, if an employee is paid $100 per day and reports 1500 hours worked, you can estimate their pay as:</p>
<p><span class="math display">\[ \$100 * \frac{1500}{7.5} = \$20,000 \]</span></p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 3: Calculation of Total Compensation">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 3: Calculation of Total Compensation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use these calculations to compute actual total compensation for each employee record in our data set. You will need to use a <code>case_when()</code> function inside a <code>mutate()</code> command to handle different pay structures.</p>
</div>
</div>
<p>Now that we have computed total compensation for each city employee, we are ready to begin our analysis of the city payroll. Before we go further, answer some general questions about this data set to make sure you are comfortable with it.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 4: Instructor-Provided Questions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 4: Instructor-Provided Questions
</div>
</div>
<div class="callout-body-container callout-body">
<p>Answer the following questions about city payroll data. In your final write-up, include these in the form of a “quick facts” bullet as part of your introduction.</p>
<ol type="1">
<li>Which job title has the highest base rate of pay? (If needed, assume a standard 2000 hour work year and no overtime.)</li>
<li>Which individual &amp; in what year had the single highest city total payroll (regular and overtime combined)?</li>
<li>Which individual worked the most overtime hours in this data set?</li>
<li>Which agency has the highest average total annual payroll (base and overtime pay per employee)?</li>
<li>Which agency has the most employees on payroll in each year?</li>
<li>Which agency has the highest overtime usage (compared to regular hours)?</li>
<li>What is the average salary of employees who work outside the five boroughs? (That is, whose <code>work_location_borough</code> is not one of the five counties.)</li>
<li>How much has the city’s aggregate payroll grown over the past 10 years?</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="Avoid Using the 'Paid' Columns">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Avoid Using the ‘Paid’ Columns
</div>
</div>
<div class="callout-body-container callout-body">
<p>Our data set includes columns <code>regular_gross_paid</code>, <code>total_ot_paid</code> and <code>total_other_paid</code> that seem like they could be used for this mini-project. If you look closely, you will see that these amounts do not match what you might calculate by hand. This is because these include adjustments for i) use of deferred compensation plans; ii) pre-tax benefit withholding; iii) various <em>ad hoc</em> adjustments negotiated as part of collective bargaining agreements. Understanding all of these is far beyond the scope of this project, so you should use the simplified calculations described above.</p>
</div>
</div>
</section>
</section>
<section id="policy-analysis" class="level3">
<h3 class="anchored" data-anchor-id="policy-analysis">Policy Analysis</h3>
<p>CATS has asked you to analyze three possible policy changes to analyze their impact on overall spending. Your supervisor has suggested two policies and has asked you to create a third for analysis. For each policy,</p>
<ol type="1">
<li>compute its impact on city payroll, <em>i.e.</em>, determine how the total payroll expenses would have changed if that policy had been in place historically;</li>
<li>determine any other staffing adjustments required to implement that policy, <em>e.g.</em>, hiring more employees; and</li>
<li>make a recommendation to the CATS commissioners on whether this policy should be adopted.</li>
</ol>
<section id="policy-i-capping-salaries-at-mayoral-level" class="level4">
<h4 class="anchored" data-anchor-id="policy-i-capping-salaries-at-mayoral-level">Policy I: Capping Salaries at Mayoral Level</h4>
<p>Many governments require that the no subordinate employee be paid more than the chief executive (mayor, governor, president). CATS is considering recommending that the city adopt such a policy. To analyze it:</p>
<ol type="1">
<li>Compute the total mayor pay for each fiscal year and identify employees who made more than this amount in the same fiscal year.</li>
<li>Determine total savings if these employees’ compensation were capped at the mayor’s salary.</li>
<li>Identify which agencies and job titles (if any) would bear the brunt of this policy.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 5: Analyze the Impact of Capping Salaries at Mayoral Level">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 5: Analyze the Impact of Capping Salaries at Mayoral Level
</div>
</div>
<div class="callout-body-container callout-body">
<p>Analyze the impact of capping total aggregate compensation for any employee at the level of the mayor’s annual salary. Make a recommendation to CATS based on your findings.</p>
</div>
</div>
</section>
<section id="policy-ii-increasing-staffing-to-reduce-overtime-expenses" class="level4">
<h4 class="anchored" data-anchor-id="policy-ii-increasing-staffing-to-reduce-overtime-expenses">Policy II: Increasing Staffing to Reduce Overtime Expenses</h4>
<p>A major driver of payroll expenditures is the “1.5x” premium associated with overtime work. That is, it may be cheaper to hire two employees to each work 30 hours to complete a task than to hire one employee to work 40 regular hours and 20 overtime hours to complete the same task.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> The CATS Commissioners are considering urging certain city agencies to hire more employees and to reduce the amount of overtime used.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>Analyze the potential upside of increasing employment to reduce overtime.</p>
<ol type="1">
<li>For each combination of agency and job title, identify the total number of overtime hours worked and see how many full-time employees it would take to replace that much overtime.</li>
<li>For each combination of agency and job title, calculate the total savings possible by converting all overtime hours to regular time hours for (new employees).</li>
<li>Determine the aggregate savings possible by agency. This will let the CATS Commission recommend the agencies where this hiring action would have the largest benefit.</li>
</ol>
<p>Note that much of this analysis must be done on an agency + job title basis. If, <em>e.g.</em>, NYPD is paying lots of overtime to Sargents, hiring additional IT Specialists will not help. Similarly, hiring additional IT Specialists into NYPD will not help reduce the need for IT Specialists at the NYC Housing Authority. After completing this analysis at the agency + job title basis, you can aggregate (over job titles) to the agency level, as this is the most likely level at which hiring policy adjustments can be made.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 6: Analyze the Potential Savings of Hiring Additional Employees to Reduce Overtime Expenses">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 6: Analyze the Potential Savings of Hiring Additional Employees to Reduce Overtime Expenses
</div>
</div>
<div class="callout-body-container callout-body">
<p>Analyze the impact of authorizing agencies to hire more employees with the intent to reduce overtime expenses. Make sure to report the total potential savings, the total number of employees needed, and the agencies and job titles where such a change in policy would have the largest impact. The CATS Commissioners are particularly interested in a job title analysis as it may be hard to hire additional employees in certain positions.</p>
</div>
</div>
</section>
<section id="policy-iii-create-your-own-policy-proposal" class="level4">
<h4 class="anchored" data-anchor-id="policy-iii-create-your-own-policy-proposal">Policy III: Create Your Own Policy Proposal</h4>
<div class="callout callout-style-default callout-tip callout-titled" title="Task 7: Create and Analyze an Additional Policy Proposal">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task 7: Create and Analyze an Additional Policy Proposal
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create your own policy proposal and analyze it in the same manner as the previous two policies. You are encouraged to draw upon real-world proposals to reduce city payroll.</p>
</div>
</div>
</section>
</section>
</section>
<section id="deliverable-policy-analysis-white-paper" class="level2">
<h2 class="anchored" data-anchor-id="deliverable-policy-analysis-white-paper">Deliverable: Policy Analysis “White Paper”</h2>
<p>Write up your findings in the form of a “white paper” to be shared with the CATS Commissioners.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> Your submission should include all three policy analyses as well as sufficient background and context for a reader who is not already familiar with NYC pay structures. Note any assumptions or limitations of your analysis and explain how they might introduce error into your projections. You are encouraged to add images and figures as necessary, as well as linking to prior published analyses of NYC payroll.</p>
</section>
<section id="extra-credit" class="level2">
<h2 class="anchored" data-anchor-id="extra-credit">Extra Credit</h2>
<p>There is no extra credit available on this mini-project beyond that specified in the rubric above. In particular, peer evaluators are authorized to give up to 8 points (total across all categories) for</p>
<ol type="1">
<li>Reports that are particularly well-written and include, at a minimum, citations to existing analyses and policy proposal documents raised by local think-tanks and political candidates. Such citations are made stronger by a comparison of results and outcomes: you shouldn’t just say Think-Tank A made a similar proposal, but you should also see if your results differ with theirs and, if so, report any source(s) of the difference.</li>
<li>Policy proposals that are particularly creative and effective. When awarding extra credit, peer evaluators should be sure to assess the <em>political</em> feasibility of proposals. A proposal to, <em>e.g.</em>, eliminate all public schools would certainly reduce the city’s spending on teachers but stands no chance of actually being implemented. A good policy proposal is both effective and effectible.</li>
</ol>
<hr>
<p>This work ©2025 by <a href="https://michael-weylandt.com">Michael Weylandt</a> is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">Creative Commons BY-NC-SA 4.0</a> license. <img src="http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" class="img-fluid" style="width:10.0%"></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Throughout this section, replace <code>&lt;GITHUB_ID&gt;</code> with your GitHub ID from <a href="./mini00.html">Mini-Project #00</a>, making sure to remove the angle brackets. Note that the automated course infrastructure will be looking for precise formatting, so follow these instructions closely.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>For some reason, this data takes up to seven or eight minutes to download from the city website, even though it’s really not that complicated or massive. Don’t fret.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>In particular, if you use the CSV export, the names of the columns in the data file will be “non-syntactic.” This means they are tricky to use in <code>R</code> and require use of backticks throughout your code. You will want to change these column names before proceeding. The <code>rename</code> function can be useful here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>DATA <span class="ot">&lt;-</span> DATA <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">column_name=</span><span class="st">`</span><span class="at">Column Name</span><span class="st">`</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">other_column=</span><span class="st">`</span><span class="at">Other Column</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that you will need to change <em>all</em> column names in this fashion.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>A commonly-raised criticism of public sector unions, such as those covering NYC employees, is that they make it difficult to hire additional employees, thereby directing more overtime hours to their (current) membership. I do not know of any reputable analysis supporting or refuting this claim in the context of NYC, though I would be interested in reading one if you come across one in your background reading.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>A <a href="https://www.nytimes.com/2025/02/04/nyregion/nypd-overtime-hiring.html">recent NYT article</a> describes recent struggles of the NYPD to increase staffing and to decrease the use of overtime pay. It’s not as simple as one might hope… (As a Baruch student, you have a free subscription to the <em>New York Times</em>; find registration details <a href="https://zicklin.baruch.cuny.edu/current/graduate-advisement-hub/campus-resources/free-subscriptions-for-zicklin-students/">here</a>.)<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>This <a href="https://rockinst.org/wp-content/uploads/2024/12/2024-12-Foundation-Aid-Report.pdf">recent white paper</a> from the Rockefeller Institute regarding updating NYS’ public school funding formula is a good example of the genre. Clearly your report does not need to be this long or this detailed.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/michael-weylandt\.com\/STA9750\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/michaelweylandt/STA9750/edit/main/archive/AY-2024-SPRING/miniprojects/mini01.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/michaelweylandt/STA9750/blob/main/archive/AY-2024-SPRING/miniprojects/mini01.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/michaelweylandt/STA9750/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>